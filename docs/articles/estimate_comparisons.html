<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="redistribute">
<title>Estimate Comparisons • redistribute</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Estimate Comparisons">
<meta property="og:description" content="redistribute">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">redistribute</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/introduction.html">Introduction</a>
    <a class="dropdown-item" href="../articles/estimate_comparisons.html">Method Comparisons</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/uva-bi-sdad/redistribute/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="estimate_comparisons_files/htmlwidgets-1.6.2/htmlwidgets.js"></script><link href="estimate_comparisons_files/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="estimate_comparisons_files/leaflet-1.3.1/leaflet.js"></script><link href="estimate_comparisons_files/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="estimate_comparisons_files/proj4-2.6.2/proj4.min.js"></script><script src="estimate_comparisons_files/Proj4Leaflet-1.0.1/proj4leaflet.js"></script><link href="estimate_comparisons_files/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="estimate_comparisons_files/leaflet-binding-2.1.2/leaflet.js"></script><script src="estimate_comparisons_files/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script><script src="estimate_comparisons_files/leaflet-providers-plugin-2.1.2/leaflet-providers-plugin.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Estimate Comparisons</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/uva-bi-sdad/redistribute/blob/HEAD/vignettes/estimate_comparisons.Rmd" class="external-link"><code>vignettes/estimate_comparisons.Rmd</code></a></small>
      <div class="d-none name"><code>estimate_comparisons.Rmd</code></div>
    </div>

    
    
<p><em>Built with R 4.3.0</em></p>
<hr>
<p>Redistribution means rearranging values such that totals remain the
same, and the original distribution could be recovered when
re-aggregating from a perfectly contained disaggregate.</p>
<p>This may be desirable if your goal is to simply display the same data
in different forms.</p>
<p>If, however, your goal is to come up with values at scales you don’t
have observations of, it may be desirable to combine various
observations at different scales and use them to come up with new
estimates.</p>
<p>In the case of estimation, there are many more methods to consider,
and validating their results is less straightforward, so this article
will consider a few estimation and validation methods.</p>
<div class="section level2">
<h2 id="data">Data<a class="anchor" aria-label="anchor" href="#data"></a>
</h2>
<p>We’ll focus on a single county (Arlington, VA), with census block
groups and Public Use Microdata Samples (PUMS) as our primary source
data.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># directory to save data in</span></span>
<span><span class="va">base_dir</span> <span class="op">&lt;-</span> <span class="st">"../estimate_comparison"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="va">base_dir</span>, <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># geographies</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">catchment</span><span class="op">)</span></span>
<span><span class="va">geography_bg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/catchment/man/download_census_shapes.html" class="external-link">download_census_shapes</a></span><span class="op">(</span><span class="va">base_dir</span>, <span class="st">"va"</span>, <span class="st">"bg"</span>, year <span class="op">=</span> <span class="fl">2021</span><span class="op">)</span></span>
<span><span class="va">geography_bg</span> <span class="op">&lt;-</span> <span class="va">geography_bg</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grep</a></span><span class="op">(</span><span class="st">"^51013"</span>, <span class="va">geography_bg</span><span class="op">$</span><span class="va">GEOID</span><span class="op">)</span>, <span class="op">]</span></span>
<span><span class="va">geography_tr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/catchment/man/download_census_shapes.html" class="external-link">download_census_shapes</a></span><span class="op">(</span><span class="va">base_dir</span>, <span class="st">"va"</span>, <span class="st">"tr"</span>, year <span class="op">=</span> <span class="fl">2021</span><span class="op">)</span></span>
<span><span class="va">geography_tr</span> <span class="op">&lt;-</span> <span class="va">geography_tr</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grep</a></span><span class="op">(</span><span class="st">"^51013"</span>, <span class="va">geography_tr</span><span class="op">$</span><span class="va">GEOID</span><span class="op">)</span>, <span class="op">]</span></span>
<span></span>
<span><span class="co"># ACS data</span></span>
<span></span>
<span><span class="co">## block groups</span></span>
<span><span class="va">block_groups</span> <span class="op">&lt;-</span> <span class="fu">tidycensus</span><span class="fu">::</span><span class="fu"><a href="https://walker-data.com/tidycensus/reference/get_acs.html" class="external-link">get_acs</a></span><span class="op">(</span></span>
<span>  year <span class="op">=</span> <span class="fl">2021</span>,</span>
<span>  state <span class="op">=</span> <span class="st">"51"</span>,</span>
<span>  county <span class="op">=</span> <span class="st">"013"</span>,</span>
<span>  geography <span class="op">=</span> <span class="st">"block group"</span>,</span>
<span>  output <span class="op">=</span> <span class="st">"wide"</span>,</span>
<span>  variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    total <span class="op">=</span> <span class="st">"B01001_001"</span>,</span>
<span>    race_white <span class="op">=</span> <span class="st">"B02001_002"</span>,</span>
<span>    race_black <span class="op">=</span> <span class="st">"B02001_003"</span>,</span>
<span>    race_native <span class="op">=</span> <span class="st">"B02001_004"</span>,</span>
<span>    race_asian <span class="op">=</span> <span class="st">"B02001_005"</span>,</span>
<span>    sex_male <span class="op">=</span> <span class="st">"B01001_002"</span>,</span>
<span>    sex_female <span class="op">=</span> <span class="st">"B01001_026"</span>,</span>
<span>    tenure_total <span class="op">=</span> <span class="st">"B25003_001"</span>,</span>
<span>    tenure_owner <span class="op">=</span> <span class="st">"B25003_002"</span>,</span>
<span>    tenure_renter <span class="op">=</span> <span class="st">"B25003_003"</span>,</span>
<span>    income_total <span class="op">=</span> <span class="st">"B19001_001"</span>,</span>
<span>    income_lt10 <span class="op">=</span> <span class="st">"B19001_002"</span>,</span>
<span>    income_10_15 <span class="op">=</span> <span class="st">"B19001_003"</span>,</span>
<span>    income_15_20 <span class="op">=</span> <span class="st">"B19001_004"</span>,</span>
<span>    income_20_25 <span class="op">=</span> <span class="st">"B19001_005"</span>,</span>
<span>    income_25_30 <span class="op">=</span> <span class="st">"B19001_006"</span>,</span>
<span>    income_30_35 <span class="op">=</span> <span class="st">"B19001_007"</span>,</span>
<span>    income_35_40 <span class="op">=</span> <span class="st">"B19001_008"</span>,</span>
<span>    income_40_45 <span class="op">=</span> <span class="st">"B19001_009"</span>,</span>
<span>    income_45_50 <span class="op">=</span> <span class="st">"B19001_010"</span>,</span>
<span>    income_50_60 <span class="op">=</span> <span class="st">"B19001_011"</span>,</span>
<span>    income_60_75 <span class="op">=</span> <span class="st">"B19001_012"</span>,</span>
<span>    income_75_100 <span class="op">=</span> <span class="st">"B19001_013"</span>,</span>
<span>    income_100_125 <span class="op">=</span> <span class="st">"B19001_014"</span>,</span>
<span>    income_125_150 <span class="op">=</span> <span class="st">"B19001_015"</span>,</span>
<span>    income_150_200 <span class="op">=</span> <span class="st">"B19001_016"</span>,</span>
<span>    income_gt200 <span class="op">=</span> <span class="st">"B19001_017"</span>,</span>
<span>    avg_hhsize <span class="op">=</span> <span class="st">"B25010_001"</span>,</span>
<span>    avg_hhsize_own <span class="op">=</span> <span class="st">"B25010_002"</span>,</span>
<span>    avg_hhsize_rent <span class="op">=</span> <span class="st">"B25010_003"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span><span class="op">[</span>, <span class="op">-</span><span class="fl">2</span><span class="op">]</span></span>
<span><span class="co">#&gt; Getting data from the 2017-2021 5-year ACS</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">block_groups</span><span class="op">)</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"Total"</span></span>
<span><span class="va">block_groups</span><span class="op">$</span><span class="va">race_other</span> <span class="op">&lt;-</span> <span class="va">block_groups</span><span class="op">$</span><span class="va">Total</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">rowSums</a></span><span class="op">(</span></span>
<span>  <span class="va">block_groups</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grep</a></span><span class="op">(</span><span class="st">"^race_.*E$"</span>, <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">block_groups</span><span class="op">)</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">block_groups</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">sub</a></span><span class="op">(</span><span class="st">"E$"</span>, <span class="st">""</span>, <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">block_groups</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">### impute missing average household sizes</span></span>
<span><span class="va">block_groups</span><span class="op">$</span><span class="va">avg_hhsize</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">block_groups</span><span class="op">$</span><span class="va">avg_hhsize</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span></span>
<span>  <span class="va">block_groups</span><span class="op">$</span><span class="va">avg_hhsize</span>,</span>
<span>  na.rm <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="va">su</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">block_groups</span><span class="op">$</span><span class="va">avg_hhsize_own</span><span class="op">)</span></span>
<span><span class="va">block_groups</span><span class="op">$</span><span class="va">avg_hhsize_own</span><span class="op">[</span><span class="va">su</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">rowMeans</a></span><span class="op">(</span></span>
<span>  <span class="va">block_groups</span><span class="op">[</span><span class="va">su</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"avg_hhsize"</span>, <span class="st">"avg_hhsize_rent"</span><span class="op">)</span><span class="op">]</span>,</span>
<span>  na.rm <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="va">block_groups</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">block_groups</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span></span>
<span><span class="co">### make larger income groups</span></span>
<span><span class="va">income_vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grep</a></span><span class="op">(</span><span class="st">"income"</span>, <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">block_groups</span><span class="op">)</span>, value <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">block_groups</span><span class="op">$</span><span class="va">income_lt50</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">rowSums</a></span><span class="op">(</span></span>
<span>  <span class="va">block_groups</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grep</a></span><span class="op">(</span><span class="st">"_(?:lt1|[1-4][05]_).*\\d$"</span>, <span class="va">income_vars</span>, value <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="op">)</span></span>
<span><span class="va">block_groups</span><span class="op">$</span><span class="va">income_50_100</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">rowSums</a></span><span class="op">(</span></span>
<span>  <span class="va">block_groups</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grep</a></span><span class="op">(</span><span class="st">"income_[5-7].*\\d$"</span>, <span class="va">income_vars</span>, value <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="op">)</span></span>
<span><span class="va">block_groups</span><span class="op">$</span><span class="va">income_100_200</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">rowSums</a></span><span class="op">(</span></span>
<span>  <span class="va">block_groups</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grep</a></span><span class="op">(</span><span class="st">"_1\\d{2}.*\\d$"</span>, <span class="va">income_vars</span>, value <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="op">)</span></span>
<span><span class="va">income_vars_select</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"income_lt50"</span>, <span class="st">"income_50_100"</span>, <span class="st">"income_100_200"</span>, <span class="st">"income_gt200"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">geography_bg</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">geography_bg</span><span class="op">$</span><span class="va">GEOID</span></span>
<span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">block_groups</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">geography_bg</span><span class="op">[</span><span class="va">block_groups</span><span class="op">$</span><span class="va">GEOID</span>, <span class="op">]</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># parcel data</span></span>
<span><span class="va">parcel_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">base_dir</span>, <span class="st">"/parcels.rds"</span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.exists</a></span><span class="op">(</span><span class="va">parcel_file</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">parcels</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html" class="external-link">st_read</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span></span>
<span>    <span class="st">"https://arlgis.arlingtonva.us/arcgis/rest/"</span>,</span>
<span>    <span class="st">"services/Open_Data/od_MHUD_Polygons/"</span>,</span>
<span>    <span class="st">"FeatureServer/0/query?where=1=1&amp;outFields=*&amp;outSR=4326&amp;f=json"</span></span>
<span>  <span class="op">)</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">saveRDS</a></span><span class="op">(</span><span class="va">parcels</span>, <span class="va">parcel_file</span>, compress <span class="op">=</span> <span class="st">"xz"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="va">parcels</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="va">parcel_file</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">parcels</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">parcels</span><span class="op">)</span> <span class="op">==</span> <span class="st">"Total_Units"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"Total"</span></span>
<span><span class="va">parcels</span><span class="op">$</span><span class="va">OBJECTID</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">parcels</span><span class="op">$</span><span class="va">OBJECTID</span><span class="op">)</span></span>
<span><span class="va">parcels</span> <span class="op">&lt;-</span> <span class="va">parcels</span><span class="op">[</span><span class="va">parcels</span><span class="op">$</span><span class="va">Year_Built</span> <span class="op">&lt;=</span> <span class="fl">2021</span>, <span class="op">]</span></span></code></pre></div>
<p>Ultimately, we’ll want to use these methods to get values for
unobserved geographies, but for this comparison of methods, we’ll want a
way to test their results against known values.</p>
<p>For this test case, we can simply start at a higher geolevel, and
make estimates at the block group level. To do that, we’ll need to
aggregate our block group data up to tracts:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tracts</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/redistribute.html">redistribute</a></span><span class="op">(</span><span class="va">block_groups</span>, <span class="va">geography_tr</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="redistribution">Redistribution<a class="anchor" aria-label="anchor" href="#redistribution"></a>
</h2>
<p>As a baseline, the first method to consider is proportional
redistribution of the block group summary estimates alone.</p>
<div class="section level3">
<h3 id="direct">Direct<a class="anchor" aria-label="anchor" href="#direct"></a>
</h3>
<p>We could do this from tracts to block groups directly:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># going from tracts to block groups with no information</span></span>
<span><span class="va">estimate_tr_to_bg</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/redistribute.html">redistribute</a></span><span class="op">(</span></span>
<span>  <span class="va">tracts</span>, <span class="va">block_groups</span>,</span>
<span>  source_id <span class="op">=</span> <span class="st">"id"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># mean absolute error between total population estimates</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="va">estimate_tr_to_bg</span><span class="op">$</span><span class="va">Total</span> <span class="op">-</span> <span class="va">block_groups</span><span class="op">$</span><span class="va">Total</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 319.8405</span></span></code></pre></div>
<p>We can see in this case, the error introduce when we only have
proportional information at the lower level; block groups that once
varied within tract now have the same value:</p>
<p><img src="estimate_comparisons_files/figure-html/unnamed-chunk-5-1.svg" width="50%"><img src="estimate_comparisons_files/figure-html/unnamed-chunk-5-2.svg" width="50%"></p>
</div>
<div class="section level3">
<h3 id="down-and-up">Down and Up<a class="anchor" aria-label="anchor" href="#down-and-up"></a>
</h3>
<p>Or we could go from tracts down to parcels, then back up to block
groups:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># function to apply tract to parcel to block group redistribution</span></span>
<span><span class="va">redist_downup</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span></span>
<span>    <span class="va">top</span>, <span class="va">bottom</span>, <span class="va">middle</span>, <span class="va">map_tb</span> <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">map_bm</span> <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>    <span class="va">weight</span> <span class="op">=</span> <span class="st">"Total"</span>, <span class="va">source_id</span> <span class="op">=</span> <span class="st">"id"</span>,</span>
<span>    <span class="va">target_id</span> <span class="op">=</span> <span class="st">"OBJECTID"</span>, <span class="va">target_id_mid</span> <span class="op">=</span> <span class="st">"GEOID"</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">to_bottom</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/redistribute.html">redistribute</a></span><span class="op">(</span></span>
<span>    <span class="va">top</span>, <span class="va">bottom</span>, <span class="va">map_tb</span>,</span>
<span>    weight <span class="op">=</span> <span class="va">weight</span>, source_id <span class="op">=</span> <span class="va">source_id</span>, target_id <span class="op">=</span> <span class="va">target_id</span>,</span>
<span>    default_value <span class="op">=</span> <span class="fl">0</span></span>
<span>  <span class="op">)</span></span>
<span>  <span class="fu"><a href="../reference/redistribute.html">redistribute</a></span><span class="op">(</span></span>
<span>    <span class="va">to_bottom</span>, <span class="va">middle</span>, <span class="va">map_bm</span>,</span>
<span>    source_id <span class="op">=</span> <span class="st">"id"</span>, target_id <span class="op">=</span> <span class="va">target_id_mid</span>,</span>
<span>    default_value <span class="op">=</span> <span class="fl">0</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># pre-make maps</span></span>
<span></span>
<span><span class="co">## from block groups to parcels</span></span>
<span><span class="va">map_bg_to_parcel</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/redistribute.html">redistribute</a></span><span class="op">(</span></span>
<span>  <span class="va">block_groups</span>, <span class="va">parcels</span>,</span>
<span>  target_id <span class="op">=</span> <span class="st">"OBJECTID"</span>, return_map <span class="op">=</span> <span class="cn">TRUE</span>, overlaps <span class="op">=</span> <span class="st">"first"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">parcels</span><span class="op">$</span><span class="va">geoid</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/structure.html" class="external-link">structure</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">map_bg_to_parcel</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">vapply</a></span><span class="op">(</span><span class="va">map_bg_to_parcel</span>, <span class="va">length</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unname.html" class="external-link">unname</a></span><span class="op">(</span><span class="va">map_bg_to_parcel</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span><span class="op">[</span><span class="va">parcels</span><span class="op">$</span><span class="va">OBJECTID</span><span class="op">]</span></span>
<span><span class="va">block_groups</span> <span class="op">&lt;-</span> <span class="va">block_groups</span><span class="op">[</span><span class="va">block_groups</span><span class="op">$</span><span class="va">GEOID</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">parcels</span><span class="op">$</span><span class="va">geoid</span>, <span class="op">]</span></span>
<span></span>
<span><span class="co">## from tracts to parcels</span></span>
<span><span class="va">map_tr_to_parcel</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/split.html" class="external-link">split</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unname.html" class="external-link">unname</a></span><span class="op">(</span><span class="va">map_bg_to_parcel</span><span class="op">)</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/substr.html" class="external-link">substring</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">map_bg_to_parcel</span><span class="op">)</span>, <span class="fl">1</span>, <span class="fl">11</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">vapply</a></span><span class="op">(</span><span class="va">map_bg_to_parcel</span>, <span class="va">length</span>, <span class="fl">0</span><span class="op">)</span></span>
<span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># check that down from and up to the same level works</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="fu">redist_downup</span><span class="op">(</span></span>
<span>    <span class="va">block_groups</span>, <span class="va">parcels</span>, <span class="va">block_groups</span>, <span class="va">map_bg_to_parcel</span>, <span class="va">map_bg_to_parcel</span>,</span>
<span>    source_id <span class="op">=</span> <span class="st">"GEOID"</span></span>
<span>  <span class="op">)</span><span class="op">[</span>, <span class="op">-</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">block_groups</span><span class="op">[</span>, <span class="op">-</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span></span>
<span><span class="co"># redistribute</span></span>
<span><span class="va">estimate_redist</span> <span class="op">&lt;-</span> <span class="fu">redist_downup</span><span class="op">(</span></span>
<span>  <span class="va">tracts</span>, <span class="va">parcels</span>, <span class="va">block_groups</span>, <span class="va">map_tr_to_parcel</span>, <span class="va">map_bg_to_parcel</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># mean absolute error between total population estimates</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="va">estimate_redist</span><span class="op">$</span><span class="va">Total</span> <span class="op">-</span> <span class="va">block_groups</span><span class="op">$</span><span class="va">Total</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 231.1852</span></span></code></pre></div>
<p>Now there is more of the original variation between block groups:</p>
<p><img src="estimate_comparisons_files/figure-html/unnamed-chunk-7-1.svg" width="50%"><img src="estimate_comparisons_files/figure-html/unnamed-chunk-7-2.svg" width="50%"></p>
<p>Because the parcel totals are living units rather than individuals,
we may be able to refine our redistribution based on some heuristic
estimates of number of people per living unit:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 2.5 for multi-unit parcels, 5.5 for single-unit parcels</span></span>
<span><span class="va">parcels</span><span class="op">$</span><span class="va">Residents</span> <span class="op">&lt;-</span> <span class="va">parcels</span><span class="op">$</span><span class="va">Total</span> <span class="op">*</span> <span class="op">(</span><span class="fl">2.5</span> <span class="op">+</span> <span class="op">(</span><span class="va">parcels</span><span class="op">$</span><span class="va">Total</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span> <span class="op">*</span> <span class="fl">3</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># now see if this improved our redistribution</span></span>
<span><span class="va">estimate_redist_adj</span> <span class="op">&lt;-</span> <span class="fu">redist_downup</span><span class="op">(</span></span>
<span>  <span class="va">tracts</span>, <span class="va">parcels</span>, <span class="va">block_groups</span>, <span class="va">map_tr_to_parcel</span>, <span class="va">map_bg_to_parcel</span>,</span>
<span>  weight <span class="op">=</span> <span class="st">"Residents"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># mean absolute error between total population estimates</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="va">estimate_redist_adj</span><span class="op">$</span><span class="va">Total</span> <span class="op">-</span> <span class="va">block_groups</span><span class="op">$</span><span class="va">Total</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 194.0749</span></span></code></pre></div>
<p>For a better sense of what this resident adjustment is doing, we can
look at the difference made in a single tract:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># identify the most different tract between variants</span></span>
<span><span class="va">tract</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/substr.html" class="external-link">substring</a></span><span class="op">(</span><span class="va">block_groups</span><span class="op">$</span><span class="va">GEOID</span><span class="op">[</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/which.min.html" class="external-link">which.max</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="va">estimate_redist_adj</span><span class="op">$</span><span class="va">Total</span> <span class="op">-</span> <span class="va">estimate_redist</span><span class="op">$</span><span class="va">Total</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">]</span>, <span class="fl">1</span>, <span class="fl">11</span><span class="op">)</span></span>
<span><span class="va">su</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/substr.html" class="external-link">substring</a></span><span class="op">(</span><span class="va">estimate_redist</span><span class="op">$</span><span class="va">id</span>, <span class="fl">1</span>, <span class="fl">11</span><span class="op">)</span> <span class="op">==</span> <span class="va">tract</span></span>
<span><span class="va">tsu</span> <span class="op">&lt;-</span> <span class="va">tracts</span><span class="op">$</span><span class="va">id</span> <span class="op">==</span> <span class="va">tract</span></span>
<span><span class="va">psu</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/substr.html" class="external-link">substring</a></span><span class="op">(</span><span class="va">parcels</span><span class="op">$</span><span class="va">geoid</span>, <span class="fl">1</span>, <span class="fl">11</span><span class="op">)</span> <span class="op">==</span> <span class="va">tract</span></span>
<span></span>
<span><span class="co"># recalculate parcel-level values within that tract</span></span>
<span><span class="va">differences</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  parcels <span class="op">=</span> <span class="fu"><a href="../reference/redistribute.html">redistribute</a></span><span class="op">(</span></span>
<span>    <span class="va">tracts</span><span class="op">$</span><span class="va">Total</span><span class="op">[</span><span class="va">tsu</span><span class="op">]</span>, <span class="va">parcels</span><span class="op">[</span><span class="va">psu</span>, <span class="op">]</span>,</span>
<span>    target_id <span class="op">=</span> <span class="st">"OBJECTID"</span>, weight <span class="op">=</span> <span class="st">"Residents"</span>, return_geometry <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span><span class="op">[</span>, <span class="fl">2</span><span class="op">]</span> <span class="op">-</span> <span class="fu"><a href="../reference/redistribute.html">redistribute</a></span><span class="op">(</span></span>
<span>    <span class="va">tracts</span><span class="op">$</span><span class="va">Total</span><span class="op">[</span><span class="va">tsu</span><span class="op">]</span>, <span class="va">parcels</span><span class="op">[</span><span class="va">psu</span>, <span class="op">]</span>,</span>
<span>    target_id <span class="op">=</span> <span class="st">"OBJECTID"</span>, weight <span class="op">=</span> <span class="st">"Total"</span>, return_geometry <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span><span class="op">[</span>, <span class="fl">2</span><span class="op">]</span>,</span>
<span>  block_group <span class="op">=</span> <span class="va">estimate_redist_adj</span><span class="op">$</span><span class="va">Total</span><span class="op">[</span><span class="va">su</span><span class="op">]</span> <span class="op">-</span> <span class="va">estimate_redist</span><span class="op">$</span><span class="va">Total</span><span class="op">[</span><span class="va">su</span><span class="op">]</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Now we can look at the difference in the contained parcels and block
groups:</p>
<p><img src="estimate_comparisons_files/figure-html/unnamed-chunk-10-1.svg" width="777.6"></p>
<p>In this case, the difference mostly comes down to two buildings with
many units that get less relative weight with the resident values.</p>
</div>
</div>
<div class="section level2">
<h2 id="pums-raking">PUMS + Raking<a class="anchor" aria-label="anchor" href="#pums-raking"></a>
</h2>
<p>So far, we’ve used some additional information (total units) at the
parcel level to improve the distribution of values across block groups,
relative to a uniform distribution.</p>
<p>We have some more information at the parcel level, such as unit type
and number of renter versus owner designations, but to make use of this
information, we need some association between source values and those
features. This is where the census microdata sample can come in: The
Public Use Microdata Sample (PUMS) consists of individual-level
observations that include demographic features and housing features.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pums</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/download_census_pums.html">download_census_pums</a></span><span class="op">(</span><span class="va">base_dir</span>, <span class="st">"va"</span>, <span class="fl">2021</span>, one_year <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> loading household sample: <span style="color: #00BB00;">h.csv.xz</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> loading person sample: <span style="color: #00BB00;">p.csv.xz</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> loading crosswalk <span style="color: #00BB00;">2020_Census_Tract_to_2020_PUMA.txt</span></span></span>
<span></span>
<span><span class="co"># prepare IDs</span></span>
<span><span class="va">pums</span><span class="op">$</span><span class="va">crosswalk</span><span class="op">$</span><span class="va">GEOID</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">paste0</span>, <span class="va">pums</span><span class="op">$</span><span class="va">crosswalk</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">pums</span><span class="op">$</span><span class="va">person</span><span class="op">$</span><span class="va">ID</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">paste0</span>, <span class="va">pums</span><span class="op">$</span><span class="va">person</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"SERIALNO"</span>, <span class="st">"SPORDER"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># prepare variables</span></span>
<span></span>
<span><span class="co">## survey categories</span></span>
<span><span class="va">pums</span><span class="op">$</span><span class="va">person</span><span class="op">$</span><span class="va">sex_cat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sex_male"</span>, <span class="st">"sex_female"</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">pums</span><span class="op">$</span><span class="va">person</span><span class="op">$</span><span class="va">SEX</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="va">pums</span><span class="op">$</span><span class="va">person</span><span class="op">$</span><span class="va">race_cat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"race_"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"white"</span>, <span class="st">"black"</span>, <span class="st">"native"</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"other"</span>, <span class="fl">2</span><span class="op">)</span>, <span class="st">"asian"</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"other"</span>, <span class="fl">3</span><span class="op">)</span></span>
<span><span class="op">)</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">pums</span><span class="op">$</span><span class="va">person</span><span class="op">$</span><span class="va">RAC1P</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="va">pums</span><span class="op">$</span><span class="va">household</span><span class="op">$</span><span class="va">income_cat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cut.html" class="external-link">cut</a></span><span class="op">(</span></span>
<span>  <span class="va">pums</span><span class="op">$</span><span class="va">household</span><span class="op">$</span><span class="va">HINCP</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="cn">Inf</span>, <span class="fl">50</span>, <span class="fl">100</span>, <span class="fl">200</span>, <span class="cn">Inf</span><span class="op">)</span> <span class="op">*</span> <span class="fl">1e3</span>, <span class="va">income_vars_select</span>,</span>
<span>  right <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## unit categories</span></span>
<span><span class="va">pums</span><span class="op">$</span><span class="va">household</span> <span class="op">&lt;-</span> <span class="va">pums</span><span class="op">$</span><span class="va">household</span><span class="op">[</span></span>
<span>  <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">pums</span><span class="op">$</span><span class="va">household</span><span class="op">$</span><span class="va">BLD</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">pums</span><span class="op">$</span><span class="va">household</span><span class="op">$</span><span class="va">TEN</span><span class="op">)</span>,</span>
<span><span class="op">]</span></span>
<span><span class="va">pums</span><span class="op">$</span><span class="va">household</span><span class="op">$</span><span class="va">building_type</span> <span class="op">&lt;-</span> <span class="st">"MULTI"</span></span>
<span><span class="va">pums</span><span class="op">$</span><span class="va">household</span><span class="op">$</span><span class="va">building_type</span><span class="op">[</span><span class="va">pums</span><span class="op">$</span><span class="va">household</span><span class="op">$</span><span class="va">BLD</span> <span class="op">==</span> <span class="st">"02"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"SFD"</span></span>
<span><span class="va">pums</span><span class="op">$</span><span class="va">household</span><span class="op">$</span><span class="va">building_type</span><span class="op">[</span><span class="va">pums</span><span class="op">$</span><span class="va">household</span><span class="op">$</span><span class="va">BLD</span> <span class="op">==</span> <span class="st">"03"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"SFA"</span></span>
<span></span>
<span><span class="va">pums</span><span class="op">$</span><span class="va">household</span><span class="op">$</span><span class="va">status</span> <span class="op">&lt;-</span> <span class="st">"RENTER"</span></span>
<span><span class="va">pums</span><span class="op">$</span><span class="va">household</span><span class="op">$</span><span class="va">status</span><span class="op">[</span><span class="va">pums</span><span class="op">$</span><span class="va">household</span><span class="op">$</span><span class="va">TEN</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"OWNER"</span></span></code></pre></div>
<p>The PUM sample is only located down to PUM areas, which are made up
of tracts, so this is where we can start for a baseline.</p>
<p>We will use associations between demographic and housing features
within each PUMA to get probabilities at the parcel level, then
redistribute our source values to them like before.</p>
<p>The first step to this end is to prepare our data so it is easy to
associate the individual PUMS variables with their per-level summaries
at the tract level:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># define variables of interest</span></span>
<span><span class="va">vars_house</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  ID <span class="op">=</span> <span class="st">"SERIALNO"</span>, weight <span class="op">=</span> <span class="st">"WGTP"</span>, type <span class="op">=</span> <span class="st">"building_type"</span>,</span>
<span>  status <span class="op">=</span> <span class="st">"status"</span>, income <span class="op">=</span> <span class="st">"income_cat"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">vars_person</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  ID <span class="op">=</span> <span class="st">"ID"</span>, weight <span class="op">=</span> <span class="st">"PWGTP"</span>, sex_cat <span class="op">=</span> <span class="st">"sex_cat"</span>, race_cat <span class="op">=</span> <span class="st">"race_cat"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">vars_units</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  type <span class="op">=</span> <span class="st">"Unit_Type"</span>, renters <span class="op">=</span> <span class="st">"Renter_Occupied"</span>, owners <span class="op">=</span> <span class="st">"Owner_Occupied"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co">## get their levels</span></span>
<span><span class="va">vars_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">vars_person</span><span class="op">[</span><span class="op">-</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">)</span><span class="op">]</span>, <span class="kw">function</span><span class="op">(</span><span class="va">var</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">pums</span><span class="op">$</span><span class="va">person</span><span class="op">[[</span><span class="va">var</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  income_cat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">pums</span><span class="op">$</span><span class="va">household</span><span class="op">$</span><span class="va">income_cat</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">return_vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">vars_list</span><span class="op">)</span></span>
<span><span class="va">pvars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="va">vars_list</span>, use.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">pvars</span>, <span class="st">"avg_hhsize_own"</span>, <span class="st">"avg_hhsize_rent"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># prepare datasets split into PUMAs</span></span>
<span><span class="va">pumas_focal</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">pums</span><span class="op">$</span><span class="va">crosswalk</span><span class="op">$</span><span class="va">PUMA5CE</span><span class="op">[</span><span class="va">pums</span><span class="op">$</span><span class="va">crosswalk</span><span class="op">$</span><span class="va">GEOID</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">tracts</span><span class="op">$</span><span class="va">id</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/structure.html" class="external-link">structure</a></span><span class="op">(</span><span class="va">pumas_focal</span>, names <span class="op">=</span> <span class="va">pumas_focal</span><span class="op">)</span>, <span class="kw">function</span><span class="op">(</span><span class="va">puma</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">households</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">pums</span><span class="op">$</span><span class="va">household</span><span class="op">[</span><span class="va">pums</span><span class="op">$</span><span class="va">household</span><span class="op">$</span><span class="va">PUMA</span> <span class="op">==</span> <span class="va">puma</span>, <span class="va">vars_house</span><span class="op">]</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">households</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">households</span><span class="op">$</span><span class="va">SERIALNO</span></span>
<span>  <span class="va">ids</span> <span class="op">&lt;-</span> <span class="va">pums</span><span class="op">$</span><span class="va">crosswalk</span><span class="op">$</span><span class="va">GEOID</span><span class="op">[</span></span>
<span>    <span class="va">pums</span><span class="op">$</span><span class="va">crosswalk</span><span class="op">$</span><span class="va">PUMA5CE</span> <span class="op">==</span> <span class="va">puma</span> <span class="op">&amp;</span> <span class="va">pums</span><span class="op">$</span><span class="va">crosswalk</span><span class="op">$</span><span class="va">GEOID</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">tracts</span><span class="op">$</span><span class="va">id</span></span>
<span>  <span class="op">]</span></span>
<span>  <span class="va">person</span> <span class="op">&lt;-</span> <span class="va">pums</span><span class="op">$</span><span class="va">person</span><span class="op">[</span><span class="va">pums</span><span class="op">$</span><span class="va">person</span><span class="op">$</span><span class="va">SERIALNO</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">households</span><span class="op">$</span><span class="va">SERIALNO</span>, <span class="op">]</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    individuals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">households</span><span class="op">[</span><span class="va">person</span><span class="op">$</span><span class="va">SERIALNO</span>, <span class="op">]</span>, <span class="va">person</span><span class="op">)</span>,</span>
<span>    source <span class="op">=</span> <span class="va">tracts</span><span class="op">[</span><span class="va">tracts</span><span class="op">$</span><span class="va">id</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">ids</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"id"</span>, <span class="va">vars</span><span class="op">)</span>, drop <span class="op">=</span> <span class="cn">TRUE</span><span class="op">]</span>,</span>
<span>    parcels <span class="op">=</span> <span class="va">parcels</span><span class="op">[</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/substr.html" class="external-link">substring</a></span><span class="op">(</span><span class="va">parcels</span><span class="op">$</span><span class="va">geoid</span>, <span class="fl">1</span>, <span class="fl">11</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">ids</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"geoid"</span>, <span class="st">"OBJECTID"</span>, <span class="va">vars_units</span><span class="op">)</span>,</span>
<span>      drop <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>    <span class="op">]</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># function to apply each method to the data</span></span>
<span><span class="va">apply_method</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">data</span>, <span class="va">method</span>, <span class="va">parcel_only</span> <span class="op">=</span> <span class="cn">FALSE</span>, <span class="va">rescale</span> <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">rbind</span>, <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">data</span>, <span class="kw">function</span><span class="op">(</span><span class="va">set</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">set</span><span class="op">$</span><span class="va">source</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_drop_geometry</a></span><span class="op">(</span><span class="va">set</span><span class="op">$</span><span class="va">source</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">rbind</span>, <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">set</span><span class="op">$</span><span class="va">source</span><span class="op">$</span><span class="va">id</span><span class="op">)</span>, <span class="kw">function</span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">source</span> <span class="op">&lt;-</span> <span class="va">set</span><span class="op">$</span><span class="va">source</span><span class="op">[</span><span class="va">set</span><span class="op">$</span><span class="va">source</span><span class="op">$</span><span class="va">id</span> <span class="op">==</span> <span class="va">id</span>, <span class="op">-</span><span class="fl">1</span><span class="op">]</span></span>
<span>      <span class="va">target</span> <span class="op">&lt;-</span> <span class="va">set</span><span class="op">$</span><span class="va">parcels</span><span class="op">[</span><span class="kw">if</span> <span class="op">(</span><span class="st">"map"</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">set</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="kw">if</span> <span class="op">(</span><span class="st">"geography"</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">set</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>          <span class="va">set</span><span class="op">$</span><span class="va">parcels</span><span class="op">$</span><span class="va">geoid</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">set</span><span class="op">$</span><span class="va">map</span><span class="op">[[</span><span class="va">id</span><span class="op">]</span><span class="op">]</span></span>
<span>        <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>          <span class="va">set</span><span class="op">$</span><span class="va">parcels</span><span class="op">$</span><span class="va">geoid</span> <span class="op">==</span> <span class="va">id</span></span>
<span>        <span class="op">}</span></span>
<span>      <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/substr.html" class="external-link">substring</a></span><span class="op">(</span><span class="va">set</span><span class="op">$</span><span class="va">parcels</span><span class="op">$</span><span class="va">geoid</span>, <span class="fl">1</span>, <span class="fl">11</span><span class="op">)</span> <span class="op">==</span> <span class="va">id</span></span>
<span>      <span class="op">}</span>, <span class="op">]</span></span>
<span>      <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">target</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="va">est</span> <span class="op">&lt;-</span> <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">source</span><span class="op">)</span><span class="op">)</span> <span class="fu">method</span><span class="op">(</span><span class="va">source</span>, <span class="va">target</span><span class="op">[</span>, <span class="op">-</span><span class="fl">1</span><span class="op">]</span>, <span class="va">set</span><span class="op">$</span><span class="va">individuals</span><span class="op">)</span> <span class="kw">else</span> <span class="cn">NULL</span></span>
<span>        <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">est</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>          <span class="kw">if</span> <span class="op">(</span><span class="va">rescale</span><span class="op">)</span> <span class="op">{</span></span>
<span>            <span class="va">totals</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">colSums</a></span><span class="op">(</span><span class="va">est</span><span class="op">)</span></span>
<span>            <span class="va">totals</span><span class="op">[</span><span class="op">!</span><span class="va">totals</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span>            <span class="va">est</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sweep.html" class="external-link">sweep</a></span><span class="op">(</span><span class="va">est</span>, <span class="fl">2</span>, <span class="va">totals</span>, <span class="st">"/"</span><span class="op">)</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span></span>
<span>              <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">source</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">est</span><span class="op">)</span><span class="op">]</span><span class="op">)</span>,</span>
<span>              each <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">est</span><span class="op">)</span></span>
<span>            <span class="op">)</span></span>
<span>          <span class="op">}</span></span>
<span>          <span class="va">su</span> <span class="op">&lt;-</span> <span class="op">!</span><span class="va">pvars</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">est</span><span class="op">)</span></span>
<span>          <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/any.html" class="external-link">any</a></span><span class="op">(</span><span class="va">su</span><span class="op">)</span><span class="op">)</span> <span class="va">est</span><span class="op">[</span>, <span class="va">pvars</span><span class="op">[</span><span class="va">su</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span>          <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">target</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span>, <span class="va">est</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">target</span><span class="op">$</span><span class="va">OBJECTID</span><span class="op">)</span>, <span class="va">pvars</span><span class="op">]</span><span class="op">)</span></span>
<span>        <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>          <span class="va">est</span> <span class="op">&lt;-</span> <span class="va">target</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span></span>
<span>          <span class="va">est</span><span class="op">[</span>, <span class="va">pvars</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span>          <span class="va">est</span></span>
<span>        <span class="op">}</span></span>
<span>      <span class="op">}</span></span>
<span>    <span class="op">}</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">parcel_only</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">p</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>parcels <span class="op">=</span> <span class="va">p</span>, block_groups <span class="op">=</span> <span class="fu"><a href="../reference/redistribute.html">redistribute</a></span><span class="op">(</span></span>
<span>      <span class="va">p</span><span class="op">[</span>, <span class="op">-</span><span class="fl">1</span><span class="op">]</span>, <span class="va">block_groups</span>, <span class="va">map_bg_to_parcel</span>,</span>
<span>      source_id <span class="op">=</span> <span class="st">"OBJECTID"</span>, target_id <span class="op">=</span> <span class="st">"GEOID"</span>, default_value <span class="op">=</span> <span class="fl">0</span></span>
<span>    <span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># function to calculate estimates from weights</span></span>
<span><span class="va">make_estimates</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">rbind</span>, <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">target</span><span class="op">$</span><span class="va">Unit_Type</span><span class="op">)</span>, <span class="kw">function</span><span class="op">(</span><span class="va">type</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">d</span> <span class="op">&lt;-</span> <span class="va">target</span><span class="op">[</span></span>
<span>      <span class="va">target</span><span class="op">$</span><span class="va">Unit_Type</span> <span class="op">==</span> <span class="va">type</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"OBJECTID"</span>, <span class="st">"Renter_Occupied"</span>, <span class="st">"Owner_Occupied"</span><span class="op">)</span></span>
<span>    <span class="op">]</span></span>
<span>    <span class="va">d</span><span class="op">$</span><span class="va">Renter_Occupied</span> <span class="op">&lt;-</span> <span class="va">d</span><span class="op">$</span><span class="va">Renter_Occupied</span> <span class="op">*</span> <span class="va">source</span><span class="op">$</span><span class="va">avg_hhsize_rent</span></span>
<span>    <span class="va">d</span><span class="op">$</span><span class="va">Owner_Occupied</span> <span class="op">&lt;-</span> <span class="va">d</span><span class="op">$</span><span class="va">Owner_Occupied</span> <span class="op">*</span> <span class="va">source</span><span class="op">$</span><span class="va">avg_hhsize_own</span></span>
<span>    <span class="va">nd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"RENTER"</span>, <span class="st">"OWNER"</span><span class="op">)</span></span>
<span>    <span class="va">i</span> <span class="op">&lt;-</span> <span class="va">individuals</span><span class="op">[</span></span>
<span>      <span class="va">individuals</span><span class="op">$</span><span class="va">building_type</span> <span class="op">==</span> <span class="va">type</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"weight"</span>, <span class="st">"status"</span>, <span class="va">return_vars</span><span class="op">)</span></span>
<span>    <span class="op">]</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/funprog.html" class="external-link">Reduce</a></span><span class="op">(</span><span class="st">"+"</span>, <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span></span>
<span>      <span class="op">(</span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">is.factor</a></span><span class="op">(</span><span class="va">i</span><span class="op">$</span><span class="va">status</span><span class="op">)</span><span class="op">)</span> <span class="va">levels</span> <span class="kw">else</span> <span class="va">unique</span><span class="op">)</span><span class="op">(</span><span class="va">i</span><span class="op">$</span><span class="va">status</span><span class="op">)</span>,</span>
<span>      <span class="kw">function</span><span class="op">(</span><span class="va">s</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="va">ii</span> <span class="op">&lt;-</span> <span class="va">i</span><span class="op">[</span><span class="va">i</span><span class="op">$</span><span class="va">status</span> <span class="op">==</span> <span class="va">s</span>, <span class="op">]</span></span>
<span>        <span class="va">weight_total</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">ii</span><span class="op">$</span><span class="va">weight</span><span class="op">)</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">cbind</span>, <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">return_vars</span>, <span class="kw">function</span><span class="op">(</span><span class="va">cat</span><span class="op">)</span> <span class="op">{</span></span>
<span>          <span class="va">props</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tapply.html" class="external-link">tapply</a></span><span class="op">(</span><span class="va">ii</span><span class="op">$</span><span class="va">weight</span>, <span class="va">ii</span><span class="op">[[</span><span class="va">cat</span><span class="op">]</span><span class="op">]</span>, <span class="va">sum</span><span class="op">)</span> <span class="op">/</span> <span class="va">weight_total</span></span>
<span>          <span class="va">props</span><span class="op">[</span><span class="va">vars_list</span><span class="op">[[</span><span class="va">cat</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="op">!</span><span class="va">vars_list</span><span class="op">[[</span><span class="va">cat</span><span class="op">]</span><span class="op">]</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">props</span><span class="op">)</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span>          <span class="va">props</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">props</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span>          <span class="va">props</span> <span class="op">&lt;-</span> <span class="va">props</span><span class="op">[</span><span class="va">vars_list</span><span class="op">[[</span><span class="va">cat</span><span class="op">]</span><span class="op">]</span><span class="op">]</span></span>
<span>          <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span></span>
<span>            <span class="va">d</span><span class="op">[[</span><span class="va">s</span><span class="op">]</span><span class="op">]</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="va">props</span>, each <span class="op">=</span> <span class="va">nd</span><span class="op">)</span>,</span>
<span>            <span class="va">nd</span>,</span>
<span>            dimnames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">d</span><span class="op">$</span><span class="va">OBJECTID</span>, <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">props</span><span class="op">)</span><span class="op">)</span></span>
<span>          <span class="op">)</span></span>
<span>        <span class="op">}</span><span class="op">)</span><span class="op">)</span></span>
<span>      <span class="op">}</span></span>
<span>    <span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Now we can apply each method to this same set of data.</p>
<p>Before the new methods, we can also update our heuristic adjustment
to the proportional redistribution method with PUMS information:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># make single-family-home indicators</span></span>
<span><span class="va">pums</span><span class="op">$</span><span class="va">household</span><span class="op">$</span><span class="va">single_family_home</span> <span class="op">&lt;-</span> <span class="va">pums</span><span class="op">$</span><span class="va">household</span><span class="op">$</span><span class="va">building_type</span> <span class="op">!=</span> <span class="st">"MULTI"</span></span>
<span><span class="va">parcels</span><span class="op">$</span><span class="va">single_family_home</span> <span class="op">&lt;-</span> <span class="va">parcels</span><span class="op">$</span><span class="va">Unit_Type</span> <span class="op">!=</span> <span class="st">"MULTI"</span></span>
<span></span>
<span><span class="co"># update resident estimates with average household size for</span></span>
<span><span class="co"># single family versus other home types within the county</span></span>
<span><span class="va">pums</span><span class="op">$</span><span class="va">household</span><span class="op">$</span><span class="va">size</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">pums</span><span class="op">$</span><span class="va">person</span><span class="op">$</span><span class="va">SERIALNO</span><span class="op">)</span><span class="op">[</span><span class="va">pums</span><span class="op">$</span><span class="va">household</span><span class="op">$</span><span class="va">SERIALNO</span><span class="op">]</span></span>
<span><span class="va">households</span> <span class="op">&lt;-</span> <span class="va">pums</span><span class="op">$</span><span class="va">household</span><span class="op">[</span><span class="va">pums</span><span class="op">$</span><span class="va">household</span><span class="op">$</span><span class="va">PUMA</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">pumas_focal</span>, <span class="op">]</span></span>
<span><span class="va">parcels</span><span class="op">$</span><span class="va">Residents</span> <span class="op">&lt;-</span> <span class="va">parcels</span><span class="op">$</span><span class="va">Total</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/tapply.html" class="external-link">tapply</a></span><span class="op">(</span></span>
<span>  <span class="va">households</span><span class="op">$</span><span class="va">size</span>, <span class="va">households</span><span class="op">$</span><span class="va">single_family_home</span>, <span class="va">mean</span></span>
<span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">parcels</span><span class="op">$</span><span class="va">single_family_home</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># recalculate the adjusted redistribution results</span></span>
<span><span class="va">estimate_redist_adj</span> <span class="op">&lt;-</span> <span class="fu">redist_downup</span><span class="op">(</span></span>
<span>  <span class="va">tracts</span>, <span class="va">parcels</span>, <span class="va">block_groups</span>, <span class="va">map_tr_to_parcel</span>, <span class="va">map_bg_to_parcel</span>,</span>
<span>  weight <span class="op">=</span> <span class="st">"Residents"</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="va">estimate_redist_adj</span><span class="op">$</span><span class="va">Total</span> <span class="op">-</span> <span class="va">block_groups</span><span class="op">$</span><span class="va">Total</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 201.2044</span></span></code></pre></div>
<div class="section level3">
<h3 id="initial-weights">Initial Weights<a class="anchor" aria-label="anchor" href="#initial-weights"></a>
</h3>
<p>As a baseline, we can calculate a set of proportions for each PUMA,
then apply that to the parcels in each contained tract:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># function to apply the method:</span></span>
<span><span class="co"># - source: the tract-level totals</span></span>
<span><span class="co"># - target: the parcels</span></span>
<span><span class="co"># - individuals: the individual PUM responses</span></span>
<span><span class="va">est_baseline</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">source</span>, <span class="va">target</span>, <span class="va">individuals</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">individuals</span><span class="op">$</span><span class="va">weight</span> <span class="op">&lt;-</span> <span class="va">individuals</span><span class="op">$</span><span class="va">PWGTP</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/environment.html" class="external-link">environment</a></span><span class="op">(</span><span class="va">make_estimates</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/environment.html" class="external-link">environment</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="fu">make_estimates</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># apply across PUMAs and tracts within them</span></span>
<span><span class="co"># and aggregate to block groups</span></span>
<span><span class="va">estimate_baseline</span> <span class="op">&lt;-</span> <span class="fu">apply_method</span><span class="op">(</span><span class="va">data</span>, <span class="va">est_baseline</span><span class="op">)</span></span></code></pre></div>
<p>Because this method does not make estimates that recover their
initial values, we have to rescale them to be comparable. For
illustration:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># adjust tract counts so they match</span></span>
<span><span class="co"># unit totals * average household size across parcels</span></span>
<span><span class="va">tr_adj</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_drop_geometry</a></span><span class="op">(</span><span class="va">tracts</span><span class="op">)</span></span>
<span><span class="va">pid</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/substr.html" class="external-link">substring</a></span><span class="op">(</span><span class="va">parcels</span><span class="op">$</span><span class="va">geoid</span>, <span class="fl">1</span>, <span class="fl">11</span><span class="op">)</span></span>
<span><span class="va">parcels</span><span class="op">$</span><span class="va">renter_est</span> <span class="op">&lt;-</span> <span class="va">parcels</span><span class="op">$</span><span class="va">Renter_Occupied</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/structure.html" class="external-link">structure</a></span><span class="op">(</span></span>
<span>  <span class="va">tracts</span><span class="op">$</span><span class="va">avg_hhsize_rent</span>,</span>
<span>  names <span class="op">=</span> <span class="va">tracts</span><span class="op">$</span><span class="va">id</span></span>
<span><span class="op">)</span><span class="op">[</span><span class="va">pid</span><span class="op">]</span></span>
<span><span class="va">parcels</span><span class="op">$</span><span class="va">owner_est</span> <span class="op">&lt;-</span> <span class="va">parcels</span><span class="op">$</span><span class="va">Owner_Occupied</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/structure.html" class="external-link">structure</a></span><span class="op">(</span></span>
<span>  <span class="va">tracts</span><span class="op">$</span><span class="va">avg_hhsize_own</span>,</span>
<span>  names <span class="op">=</span> <span class="va">tracts</span><span class="op">$</span><span class="va">id</span></span>
<span><span class="op">)</span><span class="op">[</span><span class="va">pid</span><span class="op">]</span></span>
<span><span class="va">parcels</span><span class="op">$</span><span class="va">resident_est</span> <span class="op">&lt;-</span> <span class="va">parcels</span><span class="op">$</span><span class="va">renter_est</span> <span class="op">+</span> <span class="va">parcels</span><span class="op">$</span><span class="va">owner_est</span></span>
<span><span class="va">tr_adj</span><span class="op">$</span><span class="va">Total</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tapply.html" class="external-link">tapply</a></span><span class="op">(</span><span class="va">parcels</span><span class="op">$</span><span class="va">resident_est</span>, <span class="va">pid</span>, <span class="va">sum</span><span class="op">)</span><span class="op">[</span><span class="va">tr_adj</span><span class="op">$</span><span class="va">id</span><span class="op">]</span></span>
<span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">g</span> <span class="kw">in</span> <span class="va">vars_list</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">tr_adj</span><span class="op">[</span>, <span class="va">g</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">tr_adj</span><span class="op">[</span>, <span class="va">g</span><span class="op">]</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">rowSums</a></span><span class="op">(</span><span class="va">tr_adj</span><span class="op">[</span>, <span class="va">g</span><span class="op">]</span><span class="op">)</span> <span class="op">*</span> <span class="va">tr_adj</span><span class="op">$</span><span class="va">Total</span></span>
<span><span class="op">}</span></span>
<span><span class="va">tr_adj</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">tr_adj</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span></span>
<span><span class="co"># make baseline parcel-level estimates without rescaling</span></span>
<span><span class="va">data_adj</span> <span class="op">&lt;-</span> <span class="va">data</span></span>
<span><span class="va">data_adj</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">source</span> <span class="op">&lt;-</span> <span class="va">tr_adj</span><span class="op">[</span><span class="va">tr_adj</span><span class="op">$</span><span class="va">id</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">data</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">source</span><span class="op">$</span><span class="va">id</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"id"</span>, <span class="va">vars</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">data_adj</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">source</span> <span class="op">&lt;-</span> <span class="va">tr_adj</span><span class="op">[</span><span class="va">tr_adj</span><span class="op">$</span><span class="va">id</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">data</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">source</span><span class="op">$</span><span class="va">id</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"id"</span>, <span class="va">vars</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">parcel_adj</span> <span class="op">&lt;-</span> <span class="fu">apply_method</span><span class="op">(</span></span>
<span>  <span class="va">data_adj</span>, <span class="va">est_baseline</span>,</span>
<span>  rescale <span class="op">=</span> <span class="cn">FALSE</span>, parcel_only <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># aggregate back up to tracts and measure per-category error</span></span>
<span><span class="va">tr_est</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/redistribute.html">redistribute</a></span><span class="op">(</span></span>
<span>  <span class="va">parcel_adj</span>, <span class="va">tr_adj</span>, <span class="va">map_tr_to_parcel</span>,</span>
<span>  source_id <span class="op">=</span> <span class="st">"OBJECTID"</span>, target_id <span class="op">=</span> <span class="st">"id"</span>, default_value <span class="op">=</span> <span class="fl">0</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>MAE <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">vapply</a></span><span class="op">(</span></span>
<span>  <span class="va">pvars</span>, <span class="kw">function</span><span class="op">(</span><span class="va">var</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="va">tr_est</span><span class="op">[[</span><span class="va">var</span><span class="op">]</span><span class="op">]</span> <span class="op">-</span> <span class="va">tr_adj</span><span class="op">[[</span><span class="va">var</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>, <span class="fl">0</span></span>
<span><span class="op">)</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;                      MAE</span></span>
<span><span class="co">#&gt; sex_female     324.83377</span></span>
<span><span class="co">#&gt; sex_male       324.83377</span></span>
<span><span class="co">#&gt; race_black     493.47636</span></span>
<span><span class="co">#&gt; race_white     955.89524</span></span>
<span><span class="co">#&gt; race_other     671.14696</span></span>
<span><span class="co">#&gt; race_asian     434.54822</span></span>
<span><span class="co">#&gt; race_native     49.05462</span></span>
<span><span class="co">#&gt; income_lt50    761.46177</span></span>
<span><span class="co">#&gt; income_gt200   706.96859</span></span>
<span><span class="co">#&gt; income_100_200 780.96264</span></span>
<span><span class="co">#&gt; income_50_100  640.36018</span></span>
<span></span>
<span><span class="co">## this method does recover the parcel-level totals and overall totals</span></span>
<span><span class="va">g</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sex_female"</span>, <span class="st">"sex_male"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/all.html" class="external-link">all</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">rowSums</a></span><span class="op">(</span><span class="va">parcel_adj</span><span class="op">[</span>, <span class="va">g</span><span class="op">]</span><span class="op">)</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/structure.html" class="external-link">structure</a></span><span class="op">(</span></span>
<span>  <span class="va">parcels</span><span class="op">$</span><span class="va">resident_est</span>,</span>
<span>  names <span class="op">=</span> <span class="va">parcels</span><span class="op">$</span><span class="va">OBJECTID</span></span>
<span><span class="op">)</span><span class="op">[</span><span class="va">parcel_adj</span><span class="op">$</span><span class="va">OBJECTID</span><span class="op">]</span><span class="op">)</span> <span class="op">&lt;</span> <span class="fl">1e-12</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  original <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">data_adj</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">source</span><span class="op">[</span>, <span class="va">g</span><span class="op">]</span>, <span class="va">data_adj</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">source</span><span class="op">[</span>, <span class="va">g</span><span class="op">]</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  parcel <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">parcel_adj</span><span class="op">[</span>, <span class="va">g</span><span class="op">]</span><span class="op">)</span>,</span>
<span>  tract <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">tr_est</span><span class="op">[</span>, <span class="va">g</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; original   parcel    tract </span></span>
<span><span class="co">#&gt; 866301.2 866301.2 866301.2</span></span>
<span></span>
<span><span class="co"># rescaling makes the totals line up</span></span>
<span><span class="va">parcel_adj_rescaled</span> <span class="op">&lt;-</span> <span class="fu">apply_method</span><span class="op">(</span></span>
<span>  <span class="va">data_adj</span>, <span class="va">est_baseline</span>,</span>
<span>  parcel_only <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="va">tr_est_rescaled</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/redistribute.html">redistribute</a></span><span class="op">(</span></span>
<span>  <span class="va">parcel_adj_rescaled</span>, <span class="va">tr_adj</span>, <span class="va">map_tr_to_parcel</span>,</span>
<span>  source_id <span class="op">=</span> <span class="st">"OBJECTID"</span>, target_id <span class="op">=</span> <span class="st">"id"</span>, default_value <span class="op">=</span> <span class="fl">0</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>MAE <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">vapply</a></span><span class="op">(</span></span>
<span>  <span class="va">pvars</span>, <span class="kw">function</span><span class="op">(</span><span class="va">var</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="va">tr_est_rescaled</span><span class="op">[[</span><span class="va">var</span><span class="op">]</span><span class="op">]</span> <span class="op">-</span> <span class="va">tr_adj</span><span class="op">[[</span><span class="va">var</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>, <span class="fl">0</span></span>
<span><span class="op">)</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;                MAE</span></span>
<span><span class="co">#&gt; sex_female       0</span></span>
<span><span class="co">#&gt; sex_male         0</span></span>
<span><span class="co">#&gt; race_black       0</span></span>
<span><span class="co">#&gt; race_white       0</span></span>
<span><span class="co">#&gt; race_other       0</span></span>
<span><span class="co">#&gt; race_asian       0</span></span>
<span><span class="co">#&gt; race_native      0</span></span>
<span><span class="co">#&gt; income_lt50      0</span></span>
<span><span class="co">#&gt; income_gt200     0</span></span>
<span><span class="co">#&gt; income_100_200   0</span></span>
<span><span class="co">#&gt; income_50_100    0</span></span>
<span></span>
<span><span class="co"># just like the redistribution methods</span></span>
<span><span class="va">tr_redist</span> <span class="op">&lt;-</span> <span class="fu">redist_downup</span><span class="op">(</span></span>
<span>  <span class="va">tr_adj</span>, <span class="va">parcels</span>, <span class="va">tr_adj</span>, <span class="va">map_tr_to_parcel</span>, <span class="va">map_tr_to_parcel</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>MAE <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">vapply</a></span><span class="op">(</span></span>
<span>  <span class="va">pvars</span>, <span class="kw">function</span><span class="op">(</span><span class="va">var</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="va">tr_redist</span><span class="op">[[</span><span class="va">var</span><span class="op">]</span><span class="op">]</span> <span class="op">-</span> <span class="va">tr_adj</span><span class="op">[[</span><span class="va">var</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>, <span class="fl">0</span></span>
<span><span class="op">)</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;                MAE</span></span>
<span><span class="co">#&gt; sex_female       0</span></span>
<span><span class="co">#&gt; sex_male         0</span></span>
<span><span class="co">#&gt; race_black       0</span></span>
<span><span class="co">#&gt; race_white       0</span></span>
<span><span class="co">#&gt; race_other       0</span></span>
<span><span class="co">#&gt; race_asian       0</span></span>
<span><span class="co">#&gt; race_native      0</span></span>
<span><span class="co">#&gt; income_lt50      0</span></span>
<span><span class="co">#&gt; income_gt200     0</span></span>
<span><span class="co">#&gt; income_100_200   0</span></span>
<span><span class="co">#&gt; income_50_100    0</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="raking">Raking<a class="anchor" aria-label="anchor" href="#raking"></a>
</h3>
<p>In the baseline, we’re using PUMS weights to calculate proportions,
but these weights are meant to bring totals in line with PUMA-level
estimates; Since we have lower-level information in the form of
tract-level totals, we can adjust those weights to match each
smaller-area summary:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">anesrake</span><span class="op">)</span></span>
<span><span class="va">rake_prep</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/eval.html" class="external-link">eval</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="op">{</span></span>
<span>    <span class="kw">for</span> <span class="op">(</span><span class="va">var</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">totals</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">individuals</span><span class="op">[[</span><span class="va">var</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">individuals</span><span class="op">[[</span><span class="va">var</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span>      <span class="va">l</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels</a></span><span class="op">(</span><span class="va">individuals</span><span class="op">[[</span><span class="va">var</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span>      <span class="va">totals</span><span class="op">[[</span><span class="va">var</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">totals</span><span class="op">[[</span><span class="va">var</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="va">l</span><span class="op">]</span></span>
<span>      <span class="va">su</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">totals</span><span class="op">[[</span><span class="va">var</span><span class="op">]</span><span class="op">]</span><span class="op">)</span> <span class="op">|</span> <span class="va">totals</span><span class="op">[[</span><span class="va">var</span><span class="op">]</span><span class="op">]</span> <span class="op">==</span> <span class="fl">0</span></span>
<span>      <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">su</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="va">individuals</span> <span class="op">&lt;-</span> <span class="va">individuals</span><span class="op">[</span><span class="op">!</span><span class="va">individuals</span><span class="op">[[</span><span class="va">var</span><span class="op">]</span><span class="op">]</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">l</span><span class="op">[</span><span class="va">su</span><span class="op">]</span>, <span class="op">]</span></span>
<span>        <span class="va">individuals</span><span class="op">[[</span><span class="va">var</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/droplevels.html" class="external-link">droplevels</a></span><span class="op">(</span><span class="va">individuals</span><span class="op">[[</span><span class="va">var</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span>        <span class="va">totals</span><span class="op">[[</span><span class="va">var</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">totals</span><span class="op">[[</span><span class="va">var</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="op">!</span><span class="va">su</span><span class="op">]</span></span>
<span>      <span class="op">}</span></span>
<span>      <span class="va">total</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">totals</span><span class="op">[[</span><span class="va">var</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span>      <span class="kw">if</span> <span class="op">(</span><span class="va">total</span><span class="op">)</span> <span class="va">totals</span><span class="op">[[</span><span class="va">var</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">totals</span><span class="op">[[</span><span class="va">var</span><span class="op">]</span><span class="op">]</span> <span class="op">/</span> <span class="va">total</span></span>
<span>    <span class="op">}</span></span>
<span>    <span class="va">totals</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/funprog.html" class="external-link">Filter</a></span><span class="op">(</span><span class="va">length</span>, <span class="va">totals</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/sys.parent.html" class="external-link">parent.frame</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="va">est_rake</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">source</span>, <span class="va">target</span>, <span class="va">individuals</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">totals</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/structure.html" class="external-link">structure</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">vars_list</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span>, names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">vars_list</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span>,</span>
<span>    <span class="kw">function</span><span class="op">(</span><span class="va">n</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="va">source</span><span class="op">[</span>, <span class="va">vars_list</span><span class="op">[[</span><span class="va">n</span><span class="op">]</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span>  <span class="fu">rake_prep</span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="va">individuals</span><span class="op">$</span><span class="va">status</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">individuals</span><span class="op">$</span><span class="va">status</span><span class="op">)</span></span>
<span>  <span class="va">individuals</span><span class="op">$</span><span class="va">building_type</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">individuals</span><span class="op">$</span><span class="va">building_type</span><span class="op">)</span></span>
<span>  <span class="va">individuals</span><span class="op">$</span><span class="va">income_cat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">individuals</span><span class="op">$</span><span class="va">income_cat</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/capture.output.html" class="external-link">capture.output</a></span><span class="op">(</span><span class="va">individuals</span><span class="op">$</span><span class="va">weight</span> <span class="op">&lt;-</span> <span class="kw"><a href="https://rdrr.io/r/base/conditions.html" class="external-link">tryCatch</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/anesrake/man/anesrake.html" class="external-link">anesrake</a></span><span class="op">(</span></span>
<span>      <span class="va">totals</span>, <span class="va">individuals</span>, <span class="va">individuals</span><span class="op">$</span><span class="va">ID</span>, <span class="va">individuals</span><span class="op">$</span><span class="va">PWGTP</span>,</span>
<span>      pctlim <span class="op">=</span> <span class="fl">.001</span></span>
<span>    <span class="op">)</span><span class="op">$</span><span class="va">weightvec</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">individuals</span><span class="op">$</span><span class="va">ID</span><span class="op">)</span><span class="op">]</span>,</span>
<span>    error <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">e</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="kw"><a href="https://rdrr.io/r/base/warning.html" class="external-link">warning</a></span><span class="op">(</span><span class="va">e</span><span class="op">$</span><span class="va">message</span><span class="op">)</span></span>
<span>      <span class="va">individuals</span><span class="op">$</span><span class="va">PWGTP</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">)</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/environment.html" class="external-link">environment</a></span><span class="op">(</span><span class="va">make_estimates</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/environment.html" class="external-link">environment</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="fu">make_estimates</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="va">estimate_rake</span> <span class="op">&lt;-</span> <span class="fu">apply_method</span><span class="op">(</span><span class="va">data</span>, <span class="va">est_rake</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="two-step-raking">Two Step Raking<a class="anchor" aria-label="anchor" href="#two-step-raking"></a>
</h3>
<p>In the initial raking approach, we only considered the person-level
variables, but we also have household-level information, so we might try
to account for this as well by first adjusting the household weights,
then using those adjusted weights to initialize the adjusted
person-level weights:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">est_twostep</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">source</span>, <span class="va">target</span>, <span class="va">individuals</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">all</span> <span class="op">&lt;-</span> <span class="va">individuals</span></span>
<span>  <span class="va">individuals</span> <span class="op">&lt;-</span> <span class="va">individuals</span><span class="op">[</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/duplicated.html" class="external-link">duplicated</a></span><span class="op">(</span><span class="va">individuals</span><span class="op">$</span><span class="va">SERIALNO</span><span class="op">)</span>, <span class="op">]</span></span>
<span>  <span class="co"># step 1: initial weights at household level</span></span>
<span>  <span class="va">totals</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    income_cat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="va">source</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grep</a></span><span class="op">(</span><span class="st">"^income_"</span>, <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">source</span><span class="op">)</span><span class="op">)</span><span class="op">]</span><span class="op">)</span>,</span>
<span>    status <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/structure.html" class="external-link">structure</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">colSums</a></span><span class="op">(</span><span class="va">target</span><span class="op">[</span>, <span class="va">vars_units</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>,</span>
<span>      names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"RENTER"</span>, <span class="st">"OWNER"</span><span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    building_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tapply.html" class="external-link">tapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">rowSums</a></span><span class="op">(</span><span class="va">target</span><span class="op">[</span>, <span class="va">vars_units</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>, <span class="va">target</span><span class="op">$</span><span class="va">Unit_Type</span>, <span class="va">sum</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span>  <span class="fu">rake_prep</span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/capture.output.html" class="external-link">capture.output</a></span><span class="op">(</span><span class="va">initial</span> <span class="op">&lt;-</span> <span class="kw"><a href="https://rdrr.io/r/base/conditions.html" class="external-link">tryCatch</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/anesrake/man/anesrake.html" class="external-link">anesrake</a></span><span class="op">(</span></span>
<span>      <span class="va">totals</span>, <span class="va">individuals</span>, <span class="va">individuals</span><span class="op">$</span><span class="va">SERIALNO</span>, <span class="va">individuals</span><span class="op">$</span><span class="va">WGTP</span>,</span>
<span>      pctlim <span class="op">=</span> <span class="fl">.001</span></span>
<span>    <span class="op">)</span><span class="op">$</span><span class="va">weightvec</span>,</span>
<span>    error <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">e</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="kw"><a href="https://rdrr.io/r/base/warning.html" class="external-link">warning</a></span><span class="op">(</span><span class="va">e</span><span class="op">$</span><span class="va">message</span><span class="op">)</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/structure.html" class="external-link">structure</a></span><span class="op">(</span><span class="va">individuals</span><span class="op">$</span><span class="va">WGTP</span>, names <span class="op">=</span> <span class="va">individuals</span><span class="op">$</span><span class="va">SERIALNO</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">)</span><span class="op">)</span></span>
<span>  <span class="va">all</span><span class="op">$</span><span class="va">weight</span> <span class="op">&lt;-</span> <span class="va">initial</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">all</span><span class="op">$</span><span class="va">SERIALNO</span><span class="op">)</span><span class="op">]</span></span>
<span>  <span class="va">all</span> <span class="op">&lt;-</span> <span class="va">all</span><span class="op">[</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">all</span><span class="op">$</span><span class="va">weight</span><span class="op">)</span>, <span class="op">]</span></span>
<span>  <span class="va">individuals</span> <span class="op">&lt;-</span> <span class="va">all</span></span>
<span>  <span class="co"># step 2: adjust at person level</span></span>
<span>  <span class="va">totals</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/structure.html" class="external-link">structure</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">vars_list</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span>, names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">vars_list</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span>,</span>
<span>    <span class="kw">function</span><span class="op">(</span><span class="va">n</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="va">source</span><span class="op">[</span>, <span class="va">vars_list</span><span class="op">[[</span><span class="va">n</span><span class="op">]</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span>  <span class="fu">rake_prep</span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="va">initial</span> <span class="op">&lt;-</span> <span class="va">individuals</span><span class="op">$</span><span class="va">weight</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/capture.output.html" class="external-link">capture.output</a></span><span class="op">(</span><span class="va">individuals</span><span class="op">$</span><span class="va">weight</span> <span class="op">&lt;-</span> <span class="kw"><a href="https://rdrr.io/r/base/conditions.html" class="external-link">tryCatch</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/anesrake/man/anesrake.html" class="external-link">anesrake</a></span><span class="op">(</span></span>
<span>      <span class="va">totals</span>, <span class="va">individuals</span>, <span class="va">individuals</span><span class="op">$</span><span class="va">ID</span>,</span>
<span>      <span class="va">individuals</span><span class="op">$</span><span class="va">PWGTP</span> <span class="op">*</span> <span class="va">initial</span> <span class="op">/</span> <span class="va">individuals</span><span class="op">$</span><span class="va">WGTP</span>,</span>
<span>      pctlim <span class="op">=</span> <span class="fl">.001</span></span>
<span>    <span class="op">)</span><span class="op">$</span><span class="va">weightvec</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">individuals</span><span class="op">$</span><span class="va">ID</span><span class="op">)</span><span class="op">]</span>,</span>
<span>    error <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">e</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="kw"><a href="https://rdrr.io/r/base/warning.html" class="external-link">warning</a></span><span class="op">(</span><span class="va">e</span><span class="op">$</span><span class="va">message</span><span class="op">)</span></span>
<span>      <span class="va">individuals</span><span class="op">$</span><span class="va">PWGTP</span> <span class="op">*</span> <span class="va">initial</span> <span class="op">/</span> <span class="va">individuals</span><span class="op">$</span><span class="va">WGTP</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">)</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/environment.html" class="external-link">environment</a></span><span class="op">(</span><span class="va">make_estimates</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/environment.html" class="external-link">environment</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="fu">make_estimates</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="va">estimate_twostep</span> <span class="op">&lt;-</span> <span class="fu">apply_method</span><span class="op">(</span><span class="va">data</span>, <span class="va">est_twostep</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="n-step-raking">N Step Raking<a class="anchor" aria-label="anchor" href="#n-step-raking"></a>
</h3>
<p>We can take the two-step method further by repeating the process to
try and better fit both the household and individual data:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">est_nstep</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">source</span>, <span class="va">target</span>, <span class="va">individuals</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">individuals</span><span class="op">$</span><span class="va">weight</span> <span class="op">&lt;-</span> <span class="va">individuals</span><span class="op">$</span><span class="va">PWGTP</span></span>
<span>  <span class="va">all</span> <span class="op">&lt;-</span> <span class="va">individuals</span></span>
<span>  <span class="va">iter</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">individuals</span> <span class="op">&lt;-</span> <span class="va">individuals</span><span class="op">[</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/duplicated.html" class="external-link">duplicated</a></span><span class="op">(</span><span class="va">individuals</span><span class="op">$</span><span class="va">SERIALNO</span><span class="op">)</span>, <span class="op">]</span></span>
<span>    <span class="co"># step 1: initial weights at household level</span></span>
<span>    <span class="va">totals</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      income_cat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="va">source</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grep</a></span><span class="op">(</span><span class="st">"^income_"</span>, <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">source</span><span class="op">)</span><span class="op">)</span><span class="op">]</span><span class="op">)</span>,</span>
<span>      status <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/structure.html" class="external-link">structure</a></span><span class="op">(</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">colSums</a></span><span class="op">(</span><span class="va">target</span><span class="op">[</span>, <span class="va">vars_units</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>,</span>
<span>        names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"RENTER"</span>, <span class="st">"OWNER"</span><span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      building_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tapply.html" class="external-link">tapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">rowSums</a></span><span class="op">(</span><span class="va">target</span><span class="op">[</span>, <span class="va">vars_units</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>, <span class="va">target</span><span class="op">$</span><span class="va">Unit_Type</span>, <span class="va">sum</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>    <span class="fu">rake_prep</span><span class="op">(</span><span class="op">)</span></span>
<span>    <span class="va">household_totals</span> <span class="op">&lt;-</span> <span class="va">totals</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/utils/capture.output.html" class="external-link">capture.output</a></span><span class="op">(</span><span class="va">initial</span> <span class="op">&lt;-</span> <span class="kw"><a href="https://rdrr.io/r/base/conditions.html" class="external-link">tryCatch</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/pkg/anesrake/man/anesrake.html" class="external-link">anesrake</a></span><span class="op">(</span></span>
<span>        <span class="va">totals</span>, <span class="va">individuals</span>, <span class="va">individuals</span><span class="op">$</span><span class="va">SERIALNO</span>,</span>
<span>        <span class="va">individuals</span><span class="op">$</span><span class="va">weight</span> <span class="op">/</span> <span class="va">individuals</span><span class="op">$</span><span class="va">PWGTP</span> <span class="op">*</span> <span class="va">individuals</span><span class="op">$</span><span class="va">WGTP</span>,</span>
<span>        pctlim <span class="op">=</span> <span class="fl">.001</span></span>
<span>      <span class="op">)</span><span class="op">$</span><span class="va">weightvec</span>,</span>
<span>      error <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">e</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="kw"><a href="https://rdrr.io/r/base/warning.html" class="external-link">warning</a></span><span class="op">(</span><span class="va">e</span><span class="op">$</span><span class="va">message</span><span class="op">)</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/structure.html" class="external-link">structure</a></span><span class="op">(</span></span>
<span>          <span class="va">individuals</span><span class="op">$</span><span class="va">weight</span> <span class="op">/</span> <span class="va">individuals</span><span class="op">$</span><span class="va">PWGTP</span> <span class="op">*</span> <span class="va">individuals</span><span class="op">$</span><span class="va">WGTP</span>,</span>
<span>          names <span class="op">=</span> <span class="va">individuals</span><span class="op">$</span><span class="va">SERIALNO</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">}</span></span>
<span>    <span class="op">)</span><span class="op">)</span></span>
<span>    <span class="va">all</span><span class="op">$</span><span class="va">weight</span> <span class="op">&lt;-</span> <span class="va">initial</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">all</span><span class="op">$</span><span class="va">SERIALNO</span><span class="op">)</span><span class="op">]</span></span>
<span>    <span class="va">all</span> <span class="op">&lt;-</span> <span class="va">all</span><span class="op">[</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">all</span><span class="op">$</span><span class="va">weight</span><span class="op">)</span>, <span class="op">]</span></span>
<span>    <span class="va">individuals</span> <span class="op">&lt;-</span> <span class="va">all</span></span>
<span>    <span class="co"># step 2: adjust at person level</span></span>
<span>    <span class="va">totals</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/structure.html" class="external-link">structure</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">vars_list</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span>, names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">vars_list</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span>,</span>
<span>      <span class="kw">function</span><span class="op">(</span><span class="va">n</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="va">source</span><span class="op">[</span>, <span class="va">vars_list</span><span class="op">[[</span><span class="va">n</span><span class="op">]</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>    <span class="fu">rake_prep</span><span class="op">(</span><span class="op">)</span></span>
<span>    <span class="va">initial</span> <span class="op">&lt;-</span> <span class="va">individuals</span><span class="op">$</span><span class="va">weight</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/utils/capture.output.html" class="external-link">capture.output</a></span><span class="op">(</span><span class="va">individuals</span><span class="op">$</span><span class="va">weight</span> <span class="op">&lt;-</span> <span class="kw"><a href="https://rdrr.io/r/base/conditions.html" class="external-link">tryCatch</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/pkg/anesrake/man/anesrake.html" class="external-link">anesrake</a></span><span class="op">(</span></span>
<span>        <span class="va">totals</span>, <span class="va">individuals</span>, <span class="va">individuals</span><span class="op">$</span><span class="va">ID</span>,</span>
<span>        <span class="va">individuals</span><span class="op">$</span><span class="va">PWGTP</span> <span class="op">*</span> <span class="va">initial</span> <span class="op">/</span> <span class="va">individuals</span><span class="op">$</span><span class="va">WGTP</span>,</span>
<span>        pctlim <span class="op">=</span> <span class="fl">.001</span></span>
<span>      <span class="op">)</span><span class="op">$</span><span class="va">weightvec</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">individuals</span><span class="op">$</span><span class="va">ID</span><span class="op">)</span><span class="op">]</span>,</span>
<span>      error <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">e</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="kw"><a href="https://rdrr.io/r/base/warning.html" class="external-link">warning</a></span><span class="op">(</span><span class="va">e</span><span class="op">$</span><span class="va">message</span><span class="op">)</span></span>
<span>        <span class="va">individuals</span><span class="op">$</span><span class="va">PWGTP</span> <span class="op">*</span> <span class="va">initial</span> <span class="op">/</span> <span class="va">individuals</span><span class="op">$</span><span class="va">WGTP</span></span>
<span>      <span class="op">}</span></span>
<span>    <span class="op">)</span><span class="op">)</span></span>
<span>    <span class="va">hh</span> <span class="op">&lt;-</span> <span class="va">individuals</span><span class="op">[</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/duplicated.html" class="external-link">duplicated</a></span><span class="op">(</span><span class="va">individuals</span><span class="op">$</span><span class="va">SERIALNO</span><span class="op">)</span>, <span class="op">]</span></span>
<span>    <span class="va">weight</span> <span class="op">&lt;-</span> <span class="va">hh</span><span class="op">$</span><span class="va">PWGTP</span> <span class="op">/</span> <span class="va">hh</span><span class="op">$</span><span class="va">weight</span> <span class="op">*</span> <span class="va">hh</span><span class="op">$</span><span class="va">WGTP</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      error <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">vapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">household_totals</span><span class="op">)</span>, <span class="kw">function</span><span class="op">(</span><span class="va">v</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="op">(</span><span class="va">household_totals</span><span class="op">[[</span><span class="va">v</span><span class="op">]</span><span class="op">]</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/tapply.html" class="external-link">tapply</a></span><span class="op">(</span><span class="va">weight</span>, <span class="va">hh</span><span class="op">[[</span><span class="va">v</span><span class="op">]</span><span class="op">]</span>, <span class="va">sum</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">weight</span><span class="op">)</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span></span>
<span>      <span class="op">}</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span>,</span>
<span>      data <span class="op">=</span> <span class="va">individuals</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span>  <span class="va">previous_error</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span>  <span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">20</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">step</span> <span class="op">&lt;-</span> <span class="fu">iter</span><span class="op">(</span><span class="op">)</span></span>
<span>    <span class="va">individuals</span> <span class="op">&lt;-</span> <span class="va">step</span><span class="op">$</span><span class="va">data</span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="va">step</span><span class="op">$</span><span class="va">error</span> <span class="op">&lt;</span> <span class="fl">.001</span> <span class="op">||</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="va">previous_error</span> <span class="op">-</span> <span class="va">step</span><span class="op">$</span><span class="va">error</span><span class="op">)</span> <span class="op">&lt;</span> <span class="fl">.0005</span><span class="op">)</span> <span class="kw">break</span></span>
<span>    <span class="va">previous_error</span> <span class="op">&lt;-</span> <span class="va">step</span><span class="op">$</span><span class="va">error</span></span>
<span>  <span class="op">}</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/environment.html" class="external-link">environment</a></span><span class="op">(</span><span class="va">make_estimates</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/environment.html" class="external-link">environment</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="fu">make_estimates</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="va">estimate_nstep</span> <span class="op">&lt;-</span> <span class="fu">apply_method</span><span class="op">(</span><span class="va">data</span>, <span class="va">est_nstep</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="generalized-raking">Generalized Raking<a class="anchor" aria-label="anchor" href="#generalized-raking"></a>
</h3>
<p>The two-step approach still mainly focuses on better aligning the
person-level weights – the household totals only match after the first
step, but are not considered in the second step. Alternative to this, we
might try to match the household- and person-level weights at the same
time with a generalized raking approach:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://mlfit.github.io/mlfit/" class="external-link">mlfit</a></span><span class="op">)</span></span>
<span><span class="va">est_grake</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">source</span>, <span class="va">target</span>, <span class="va">individuals</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">totals</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    person <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">individuals</span><span class="op">$</span><span class="va">PWGTP</span><span class="op">)</span>,</span>
<span>    household <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">individuals</span><span class="op">$</span><span class="va">WGTP</span><span class="op">[</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/duplicated.html" class="external-link">duplicated</a></span><span class="op">(</span><span class="va">individuals</span><span class="op">$</span><span class="va">SERIALNO</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span>  <span class="va">person</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">vars_list</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span>, <span class="kw">function</span><span class="op">(</span><span class="va">n</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">l</span> <span class="op">&lt;-</span> <span class="va">vars_list</span><span class="op">[[</span><span class="va">n</span><span class="op">]</span><span class="op">]</span></span>
<span>    <span class="va">count</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">source</span><span class="op">[</span>, <span class="va">l</span>, drop <span class="op">=</span> <span class="cn">TRUE</span><span class="op">]</span><span class="op">)</span></span>
<span>    <span class="va">count</span><span class="op">[</span><span class="op">!</span><span class="va">count</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span>    <span class="va">count</span> <span class="op">&lt;-</span> <span class="va">count</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">count</span><span class="op">)</span> <span class="op">*</span> <span class="va">totals</span><span class="op">$</span><span class="va">person</span></span>
<span>    <span class="va">s</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>level <span class="op">=</span> <span class="va">l</span>, count <span class="op">=</span> <span class="va">count</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">s</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">n</span></span>
<span>    <span class="va">s</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span>  <span class="va">household</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">individuals</span><span class="op">$</span><span class="va">building_type</span><span class="op">)</span></span>
<span>  <span class="va">household</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/structure.html" class="external-link">structure</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">household</span><span class="op">)</span><span class="op">)</span>, names <span class="op">=</span> <span class="va">household</span><span class="op">)</span></span>
<span>  <span class="va">observed_types</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tapply.html" class="external-link">tapply</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">rowSums</a></span><span class="op">(</span><span class="va">target</span><span class="op">[</span>, <span class="va">vars_units</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>, <span class="va">target</span><span class="op">$</span><span class="va">Unit_Type</span>, <span class="va">sum</span></span>
<span>  <span class="op">)</span></span>
<span>  <span class="va">household</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">observed_types</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">observed_types</span></span>
<span>  <span class="va">household</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    building_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">household</span><span class="op">)</span>, count <span class="op">=</span> <span class="va">household</span></span>
<span>  <span class="op">)</span><span class="op">)</span></span>
<span>  <span class="va">household</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">count</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">household</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">count</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span>  <span class="va">household</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    status <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"RENTER"</span>, <span class="st">"OWNER"</span><span class="op">)</span>,</span>
<span>    count <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">colSums</a></span><span class="op">(</span><span class="va">target</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Renter_Occupied"</span>, <span class="st">"Owner_Occupied"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span>  <span class="va">household</span><span class="op">[[</span><span class="fl">3</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="va">source</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grep</a></span><span class="op">(</span><span class="st">"^income_"</span>, <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">source</span><span class="op">)</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span>  <span class="va">household</span><span class="op">[[</span><span class="fl">3</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    income_cat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">household</span><span class="op">[[</span><span class="fl">3</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>, count <span class="op">=</span> <span class="va">household</span><span class="op">[[</span><span class="fl">3</span><span class="op">]</span><span class="op">]</span></span>
<span>  <span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">household</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"building_type"</span>, <span class="st">"status"</span>, <span class="st">"income_cat"</span><span class="op">)</span></span>
<span>  <span class="va">household</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">household</span><span class="op">)</span>, <span class="kw">function</span><span class="op">(</span><span class="va">var</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">l</span> <span class="op">&lt;-</span> <span class="va">household</span><span class="op">[[</span><span class="va">var</span><span class="op">]</span><span class="op">]</span></span>
<span>    <span class="va">l</span> <span class="op">&lt;-</span> <span class="va">l</span><span class="op">[</span><span class="va">l</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">individuals</span><span class="op">[</span>, <span class="va">var</span><span class="op">]</span><span class="op">)</span>, <span class="op">]</span></span>
<span>    <span class="va">l</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="op">!</span><span class="va">l</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span>    <span class="va">l</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">l</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">l</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">)</span> <span class="op">*</span> <span class="va">totals</span><span class="op">$</span><span class="va">household</span></span>
<span>    <span class="va">l</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span>  <span class="va">m</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://mlfit.github.io/mlfit/reference/ml_problem.html" class="external-link">ml_problem</a></span><span class="op">(</span></span>
<span>    <span class="va">individuals</span>,</span>
<span>    field_names <span class="op">=</span> <span class="fu"><a href="https://mlfit.github.io/mlfit/reference/ml_problem.html" class="external-link">special_field_names</a></span><span class="op">(</span><span class="st">"SERIALNO"</span>, <span class="st">"ID"</span>, count <span class="op">=</span> <span class="st">"count"</span><span class="op">)</span>,</span>
<span>    group_controls <span class="op">=</span> <span class="va">household</span>,</span>
<span>    individual_controls <span class="op">=</span> <span class="va">person</span>,</span>
<span>    prior_weights <span class="op">=</span> <span class="va">individuals</span><span class="op">$</span><span class="va">WGTP</span></span>
<span>  <span class="op">)</span></span>
<span>  <span class="va">fm</span> <span class="op">&lt;-</span> <span class="kw"><a href="https://rdrr.io/r/base/conditions.html" class="external-link">tryCatch</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/warning.html" class="external-link">suppressWarnings</a></span><span class="op">(</span><span class="fu"><a href="https://mlfit.github.io/mlfit/reference/ml_fit.html" class="external-link">ml_fit_dss</a></span><span class="op">(</span><span class="va">m</span>, ginv <span class="op">=</span> <span class="va">solve</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    error <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">e</span><span class="op">)</span> <span class="cn">NULL</span></span>
<span>  <span class="op">)</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/Logic.html" class="external-link">isTRUE</a></span><span class="op">(</span><span class="va">fm</span><span class="op">$</span><span class="va">success</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">fm</span> <span class="op">&lt;-</span> <span class="kw"><a href="https://rdrr.io/r/base/conditions.html" class="external-link">tryCatch</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/warning.html" class="external-link">suppressWarnings</a></span><span class="op">(</span><span class="fu"><a href="https://mlfit.github.io/mlfit/reference/ml_fit.html" class="external-link">ml_fit_ipu</a></span><span class="op">(</span><span class="va">m</span><span class="op">)</span><span class="op">)</span>,</span>
<span>      error <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">e</span><span class="op">)</span> <span class="cn">NULL</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span>  <span class="va">individuals</span><span class="op">$</span><span class="va">weight</span> <span class="op">&lt;-</span> <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">fm</span><span class="op">$</span><span class="va">weight</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">individuals</span><span class="op">$</span><span class="va">PWGTP</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>    <span class="va">fm</span><span class="op">$</span><span class="va">weight</span></span>
<span>  <span class="op">}</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/environment.html" class="external-link">environment</a></span><span class="op">(</span><span class="va">make_estimates</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/environment.html" class="external-link">environment</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="fu">make_estimates</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="va">estimate_grake</span> <span class="op">&lt;-</span> <span class="fu">apply_method</span><span class="op">(</span><span class="va">data</span>, <span class="va">est_grake</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="comparisons">Comparisons<a class="anchor" aria-label="anchor" href="#comparisons"></a>
</h2>
<div class="section level3">
<h3 id="tract-aggregates">Tract Aggregates<a class="anchor" aria-label="anchor" href="#tract-aggregates"></a>
</h3>
<p>Now we can compare all of the considered methods within each of the
variables we used to inform the raking approaches:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">error</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">rbind</span>, <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/structure.html" class="external-link">structure</a></span><span class="op">(</span><span class="va">pvars</span>, names <span class="op">=</span> <span class="va">pvars</span><span class="op">)</span>, <span class="kw">function</span><span class="op">(</span><span class="va">var</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span></span>
<span>    Prop <span class="op">=</span> <span class="va">estimate_redist</span><span class="op">[[</span><span class="va">var</span><span class="op">]</span><span class="op">]</span>,</span>
<span>    <span class="st">"Prop Adj"</span> <span class="op">=</span> <span class="va">estimate_redist_adj</span><span class="op">[[</span><span class="va">var</span><span class="op">]</span><span class="op">]</span>,</span>
<span>    Baseline <span class="op">=</span> <span class="va">estimate_baseline</span><span class="op">$</span><span class="va">block_groups</span><span class="op">[[</span><span class="va">var</span><span class="op">]</span><span class="op">]</span>,</span>
<span>    Rake <span class="op">=</span> <span class="va">estimate_rake</span><span class="op">$</span><span class="va">block_groups</span><span class="op">[[</span><span class="va">var</span><span class="op">]</span><span class="op">]</span>,</span>
<span>    <span class="st">"Rake 2 Step"</span> <span class="op">=</span> <span class="va">estimate_twostep</span><span class="op">$</span><span class="va">block_groups</span><span class="op">[[</span><span class="va">var</span><span class="op">]</span><span class="op">]</span>,</span>
<span>    <span class="st">"Rake N Step"</span> <span class="op">=</span> <span class="va">estimate_nstep</span><span class="op">$</span><span class="va">block_groups</span><span class="op">[[</span><span class="va">var</span><span class="op">]</span><span class="op">]</span>,</span>
<span>    <span class="st">"Rake General"</span> <span class="op">=</span> <span class="va">estimate_grake</span><span class="op">$</span><span class="va">block_groups</span><span class="op">[[</span><span class="va">var</span><span class="op">]</span><span class="op">]</span></span>
<span>  <span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">colMeans</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="va">d</span> <span class="op">-</span> <span class="va">block_groups</span><span class="op">[[</span><span class="va">var</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">error</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">error</span>, Average <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">colMeans</a></span><span class="op">(</span><span class="va">error</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">kable</span><span class="op">(</span><span class="va">error</span>, digits <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<table style="width:100%;" class="table">
<colgroup>
<col width="17%">
<col width="9%">
<col width="10%">
<col width="10%">
<col width="9%">
<col width="13%">
<col width="13%">
<col width="15%">
</colgroup>
<thead><tr class="header">
<th align="left"></th>
<th align="right">Prop</th>
<th align="right">Prop Adj</th>
<th align="right">Baseline</th>
<th align="right">Rake</th>
<th align="right">Rake 2 Step</th>
<th align="right">Rake N Step</th>
<th align="right">Rake General</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">sex_female</td>
<td align="right">121.352</td>
<td align="right">105.943</td>
<td align="right">118.482</td>
<td align="right">118.526</td>
<td align="right">118.575</td>
<td align="right">117.657</td>
<td align="right">117.950</td>
</tr>
<tr class="even">
<td align="left">sex_male</td>
<td align="right">128.929</td>
<td align="right">117.032</td>
<td align="right">127.947</td>
<td align="right">127.963</td>
<td align="right">127.862</td>
<td align="right">128.371</td>
<td align="right">128.469</td>
</tr>
<tr class="odd">
<td align="left">race_black</td>
<td align="right">61.684</td>
<td align="right">61.584</td>
<td align="right">62.364</td>
<td align="right">62.222</td>
<td align="right">62.926</td>
<td align="right">63.329</td>
<td align="right">61.955</td>
</tr>
<tr class="even">
<td align="left">race_white</td>
<td align="right">166.633</td>
<td align="right">145.178</td>
<td align="right">152.562</td>
<td align="right">153.829</td>
<td align="right">150.713</td>
<td align="right">150.615</td>
<td align="right">153.490</td>
</tr>
<tr class="odd">
<td align="left">race_other</td>
<td align="right">76.493</td>
<td align="right">75.017</td>
<td align="right">77.714</td>
<td align="right">77.019</td>
<td align="right">77.071</td>
<td align="right">78.501</td>
<td align="right">76.398</td>
</tr>
<tr class="even">
<td align="left">race_asian</td>
<td align="right">55.791</td>
<td align="right">56.351</td>
<td align="right">56.386</td>
<td align="right">56.157</td>
<td align="right">55.887</td>
<td align="right">55.236</td>
<td align="right">55.810</td>
</tr>
<tr class="odd">
<td align="left">race_native</td>
<td align="right">5.577</td>
<td align="right">5.663</td>
<td align="right">5.496</td>
<td align="right">5.600</td>
<td align="right">5.641</td>
<td align="right">5.570</td>
<td align="right">5.479</td>
</tr>
<tr class="even">
<td align="left">income_lt50</td>
<td align="right">38.820</td>
<td align="right">40.608</td>
<td align="right">36.720</td>
<td align="right">36.714</td>
<td align="right">36.280</td>
<td align="right">36.208</td>
<td align="right">37.013</td>
</tr>
<tr class="odd">
<td align="left">income_gt200</td>
<td align="right">50.340</td>
<td align="right">45.409</td>
<td align="right">37.842</td>
<td align="right">37.698</td>
<td align="right">37.967</td>
<td align="right">38.047</td>
<td align="right">37.848</td>
</tr>
<tr class="even">
<td align="left">income_100_200</td>
<td align="right">47.578</td>
<td align="right">46.870</td>
<td align="right">47.450</td>
<td align="right">47.225</td>
<td align="right">46.735</td>
<td align="right">46.686</td>
<td align="right">47.146</td>
</tr>
<tr class="odd">
<td align="left">income_50_100</td>
<td align="right">39.530</td>
<td align="right">41.883</td>
<td align="right">37.976</td>
<td align="right">37.953</td>
<td align="right">37.723</td>
<td align="right">37.944</td>
<td align="right">37.745</td>
</tr>
<tr class="even">
<td align="left">Average</td>
<td align="right">72.066</td>
<td align="right">67.412</td>
<td align="right">69.176</td>
<td align="right">69.173</td>
<td align="right">68.853</td>
<td align="right">68.924</td>
<td align="right">69.028</td>
</tr>
</tbody>
</table>
<p>Full results are presented in a data site: <a href="https://uva-bi-sdad.github.io/redistribution_arlington" class="external-link">redistribution_arlington</a></p>
</div>
<div class="section level3">
<h3 id="alternate-geolevels">Alternate Geolevels<a class="anchor" aria-label="anchor" href="#alternate-geolevels"></a>
</h3>
<p>So far, we’ve used the same geolevel-related test-case to assess our
methods, but this may have an effect in itself. As an alternative, we
might abandon canonical tracts in favor of randomly agglutinated block
groups.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># randomly combine adjacent block groups into pairs of 2 (were possible)</span></span>
<span><span class="co"># apply within each PUMA</span></span>
<span><span class="va">apply_altgeo</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">run</span> <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">return_full</span> <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">vdata</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/structure.html" class="external-link">structure</a></span><span class="op">(</span><span class="va">pumas_focal</span>, names <span class="op">=</span> <span class="va">pumas_focal</span><span class="op">)</span>,</span>
<span>    <span class="kw">function</span><span class="op">(</span><span class="va">puma</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">d</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">[[</span><span class="va">puma</span><span class="op">]</span><span class="op">]</span></span>
<span>      <span class="va">su</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/substr.html" class="external-link">substring</a></span><span class="op">(</span><span class="va">block_groups</span><span class="op">$</span><span class="va">GEOID</span>, <span class="fl">1</span>, <span class="fl">11</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">d</span><span class="op">$</span><span class="va">source</span><span class="op">$</span><span class="va">id</span></span>
<span>      <span class="va">vtr</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_parent_polygons.html">make_parent_polygons</a></span><span class="op">(</span></span>
<span>        <span class="va">block_groups</span><span class="op">[</span><span class="va">su</span>, <span class="op">]</span>, <span class="st">"GEOID"</span>,</span>
<span>        n_as_min <span class="op">=</span> <span class="cn">TRUE</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>      <span class="op">)</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">vtr</span><span class="op">$</span><span class="va">new</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">vtr</span><span class="op">$</span><span class="va">map</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span></span>
<span>        <span class="va">puma</span>, <span class="st">"_"</span>, <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="va">vtr</span><span class="op">$</span><span class="va">new</span><span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>      <span class="va">d</span><span class="op">$</span><span class="va">geography</span> <span class="op">&lt;-</span> <span class="va">vtr</span><span class="op">$</span><span class="va">new</span></span>
<span>      <span class="va">d</span><span class="op">$</span><span class="va">map</span> <span class="op">&lt;-</span> <span class="va">vtr</span><span class="op">$</span><span class="va">map</span></span>
<span>      <span class="va">d</span><span class="op">$</span><span class="va">source</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/redistribute.html">redistribute</a></span><span class="op">(</span></span>
<span>        <span class="va">block_groups</span><span class="op">[</span><span class="va">su</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"GEOID"</span>, <span class="va">vars</span><span class="op">)</span><span class="op">]</span>, <span class="va">vtr</span><span class="op">$</span><span class="va">new</span>, <span class="va">vtr</span><span class="op">$</span><span class="va">map</span>,</span>
<span>        default_value <span class="op">=</span> <span class="fl">0</span></span>
<span>      <span class="op">)</span></span>
<span>      <span class="va">d</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">)</span></span>
<span>  <span class="va">vsource</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">rbind</span>, <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">vdata</span>, <span class="st">"[["</span>, <span class="st">"source"</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="va">vmap</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/redistribute.html">redistribute</a></span><span class="op">(</span></span>
<span>    <span class="va">vsource</span>, <span class="va">parcels</span>,</span>
<span>    source_id <span class="op">=</span> <span class="st">"id"</span>, target_id <span class="op">=</span> <span class="st">"OBJECTID"</span>, return_map <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span></span>
<span>  <span class="va">vestimates</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    Prop <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>block_groups <span class="op">=</span> <span class="fu">redist_downup</span><span class="op">(</span></span>
<span>      <span class="va">vsource</span>, <span class="va">parcels</span>, <span class="va">block_groups</span>, <span class="va">vmap</span>, <span class="va">map_bg_to_parcel</span></span>
<span>    <span class="op">)</span><span class="op">)</span>,</span>
<span>    <span class="st">"Prop Adj"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>block_groups <span class="op">=</span> <span class="fu">redist_downup</span><span class="op">(</span></span>
<span>      <span class="va">vsource</span>, <span class="va">parcels</span>, <span class="va">block_groups</span>, <span class="va">vmap</span>, <span class="va">map_bg_to_parcel</span>,</span>
<span>      weight <span class="op">=</span> <span class="st">"Residents"</span></span>
<span>    <span class="op">)</span><span class="op">)</span>,</span>
<span>    Baseline <span class="op">=</span> <span class="fu">apply_method</span><span class="op">(</span><span class="va">vdata</span>, <span class="va">est_baseline</span><span class="op">)</span>,</span>
<span>    Rake <span class="op">=</span> <span class="fu">apply_method</span><span class="op">(</span><span class="va">vdata</span>, <span class="va">est_rake</span><span class="op">)</span>,</span>
<span>    <span class="st">"Rake 2 Step"</span> <span class="op">=</span> <span class="fu">apply_method</span><span class="op">(</span><span class="va">vdata</span>, <span class="va">est_twostep</span><span class="op">)</span>,</span>
<span>    <span class="st">"Rake N Step"</span> <span class="op">=</span> <span class="fu">apply_method</span><span class="op">(</span><span class="va">vdata</span>, <span class="va">est_nstep</span><span class="op">)</span>,</span>
<span>    <span class="st">"Rake General"</span> <span class="op">=</span> <span class="fu">apply_method</span><span class="op">(</span><span class="va">vdata</span>, <span class="va">est_grake</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span>  <span class="va">verror</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">rbind</span>, <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/structure.html" class="external-link">structure</a></span><span class="op">(</span><span class="va">pvars</span>, names <span class="op">=</span> <span class="va">pvars</span><span class="op">)</span>,</span>
<span>    <span class="kw">function</span><span class="op">(</span><span class="va">var</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">colMeans</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">vestimates</span>, <span class="kw">function</span><span class="op">(</span><span class="va">d</span><span class="op">)</span> <span class="va">d</span><span class="op">$</span><span class="va">block_groups</span><span class="op">[[</span><span class="va">var</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>,</span>
<span>        check.names <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>      <span class="op">)</span> <span class="op">-</span> <span class="va">block_groups</span><span class="op">[[</span><span class="va">var</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">)</span><span class="op">)</span></span>
<span>  <span class="va">verror</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">verror</span>, Average <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">colMeans</a></span><span class="op">(</span><span class="va">verror</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">return_full</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      data <span class="op">=</span> <span class="va">data</span>, source <span class="op">=</span> <span class="va">vsource</span>, map <span class="op">=</span> <span class="va">vmap</span>,</span>
<span>      estimates <span class="op">=</span> <span class="va">vestimates</span>, error <span class="op">=</span> <span class="va">verror</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>    <span class="va">verror</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">estimates_altgeo</span> <span class="op">&lt;-</span> <span class="fu">apply_altgeo</span><span class="op">(</span>return_full <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu">kable</span><span class="op">(</span><span class="va">estimates_altgeo</span><span class="op">$</span><span class="va">error</span>, digits <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<table style="width:100%;" class="table">
<colgroup>
<col width="17%">
<col width="9%">
<col width="10%">
<col width="10%">
<col width="9%">
<col width="13%">
<col width="13%">
<col width="15%">
</colgroup>
<thead><tr class="header">
<th align="left"></th>
<th align="right">Prop</th>
<th align="right">Prop Adj</th>
<th align="right">Baseline</th>
<th align="right">Rake</th>
<th align="right">Rake 2 Step</th>
<th align="right">Rake N Step</th>
<th align="right">Rake General</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">sex_female</td>
<td align="right">114.869</td>
<td align="right">100.519</td>
<td align="right">111.327</td>
<td align="right">111.472</td>
<td align="right">111.475</td>
<td align="right">111.300</td>
<td align="right">111.520</td>
</tr>
<tr class="even">
<td align="left">sex_male</td>
<td align="right">132.038</td>
<td align="right">119.435</td>
<td align="right">129.676</td>
<td align="right">129.789</td>
<td align="right">129.880</td>
<td align="right">129.951</td>
<td align="right">129.421</td>
</tr>
<tr class="odd">
<td align="left">race_black</td>
<td align="right">61.662</td>
<td align="right">61.786</td>
<td align="right">57.967</td>
<td align="right">58.464</td>
<td align="right">57.548</td>
<td align="right">57.130</td>
<td align="right">58.727</td>
</tr>
<tr class="even">
<td align="left">race_white</td>
<td align="right">168.717</td>
<td align="right">148.342</td>
<td align="right">153.522</td>
<td align="right">157.140</td>
<td align="right">153.915</td>
<td align="right">153.731</td>
<td align="right">157.771</td>
</tr>
<tr class="odd">
<td align="left">race_other</td>
<td align="right">75.347</td>
<td align="right">74.145</td>
<td align="right">74.846</td>
<td align="right">74.661</td>
<td align="right">74.119</td>
<td align="right">73.047</td>
<td align="right">75.550</td>
</tr>
<tr class="even">
<td align="left">race_asian</td>
<td align="right">47.080</td>
<td align="right">48.206</td>
<td align="right">45.672</td>
<td align="right">45.930</td>
<td align="right">46.260</td>
<td align="right">46.100</td>
<td align="right">46.217</td>
</tr>
<tr class="odd">
<td align="left">race_native</td>
<td align="right">4.752</td>
<td align="right">4.852</td>
<td align="right">4.571</td>
<td align="right">5.025</td>
<td align="right">4.423</td>
<td align="right">4.387</td>
<td align="right">4.689</td>
</tr>
<tr class="even">
<td align="left">income_lt50</td>
<td align="right">36.868</td>
<td align="right">38.451</td>
<td align="right">33.035</td>
<td align="right">33.043</td>
<td align="right">32.741</td>
<td align="right">32.615</td>
<td align="right">33.444</td>
</tr>
<tr class="odd">
<td align="left">income_gt200</td>
<td align="right">46.051</td>
<td align="right">41.311</td>
<td align="right">35.509</td>
<td align="right">35.440</td>
<td align="right">35.277</td>
<td align="right">35.392</td>
<td align="right">35.354</td>
</tr>
<tr class="even">
<td align="left">income_100_200</td>
<td align="right">47.748</td>
<td align="right">50.477</td>
<td align="right">47.632</td>
<td align="right">47.694</td>
<td align="right">47.540</td>
<td align="right">47.563</td>
<td align="right">47.909</td>
</tr>
<tr class="odd">
<td align="left">income_50_100</td>
<td align="right">36.237</td>
<td align="right">38.954</td>
<td align="right">33.772</td>
<td align="right">33.702</td>
<td align="right">33.456</td>
<td align="right">33.631</td>
<td align="right">33.763</td>
</tr>
<tr class="even">
<td align="left">Average</td>
<td align="right">70.125</td>
<td align="right">66.043</td>
<td align="right">66.139</td>
<td align="right">66.578</td>
<td align="right">66.057</td>
<td align="right">65.895</td>
<td align="right">66.760</td>
</tr>
</tbody>
</table>
<p>We can also take a look at the virtual tracts that were created in
this run:</p>
<div class="leaflet html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-4adb6e0ac704e5934ee7" style="width:777.6px;height:432px;"></div>
<script type="application/json" data-for="htmlwidget-4adb6e0ac704e5934ee7">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"attributionControl":false},"calls":[{"method":"addProviderTiles","args":["CartoDB.Positron",null,null,{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]},{"method":"addControl","args":["Male Population","topright",null,"info legend"]},{"method":"addLayersControl","args":[[],["Block Groups","Virtual Tracts"],{"collapsed":true,"autoZIndex":true,"position":"topleft"}]},{"method":"addPolygons","args":[[[[{"lng":[-77.172276,-77.16811,-77.164208,-77.162887,-77.15817199999999,-77.163995,-77.16305800000001,-77.164473,-77.165093,-77.165947,-77.172192,-77.172276],"lat":[38.893245,38.896521,38.899578,38.897712,38.894331,38.890756,38.889937,38.889878,38.889795,38.888287,38.893166,38.893245]}]],[[{"lng":[-77.164208,-77.15968100000001,-77.156336,-77.15680999999999,-77.15724400000001,-77.15763200000001,-77.15817199999999,-77.162887,-77.164208],"lat":[38.899578,38.903147,38.900926,38.900259,38.896883,38.894564,38.894331,38.897712,38.899578]}]],[[{"lng":[-77.15680999999999,-77.156336,-77.15424,-77.149174,-77.148507,-77.143991,-77.145855,-77.147392,-77.148759,-77.15109699999999,-77.15184600000001,-77.15724400000001,-77.15680999999999],"lat":[38.900259,38.900926,38.900735,38.901793,38.902122,38.894724,38.894145,38.893639,38.897448,38.897534,38.897152,38.896883,38.900259]}]],[[{"lng":[-77.163995,-77.15817199999999,-77.15763200000001,-77.15724400000001,-77.15184600000001,-77.15109699999999,-77.148759,-77.147392,-77.153245,-77.158981,-77.160754,-77.16305800000001,-77.163995],"lat":[38.890756,38.894331,38.894564,38.896883,38.897152,38.897534,38.897448,38.893639,38.892098,38.88918,38.891575,38.889937,38.890756]}]],[[{"lng":[-77.15968100000001,-77.154539,-77.151977,-77.149891,-77.15017899999999,-77.14747699999999,-77.148507,-77.149174,-77.15424,-77.156336,-77.15968100000001],"lat":[38.903147,38.907173,38.909177,38.907397,38.905787,38.90222,38.902122,38.901793,38.900735,38.900926,38.903147]}]],[[{"lng":[-77.151977,-77.145809,-77.14081400000001,-77.134282,-77.13270199999999,-77.13826,-77.13899000000001,-77.14234399999999,-77.14439,-77.14747699999999,-77.15017899999999,-77.149891,-77.151977],"lat":[38.909177,38.914006,38.91077,38.90896,38.907736,38.907044,38.906706,38.904015,38.902265,38.90222,38.905787,38.907397,38.909177]}]],[[{"lng":[-77.138507,-77.140484,-77.137981,-77.136329,-77.135713,-77.13382300000001,-77.13364199999999,-77.13696299999999,-77.137658,-77.140663,-77.138507],"lat":[38.898962,38.901676,38.902971,38.902928,38.900376,38.898398,38.896322,38.896308,38.896261,38.89817,38.898962]}]],[[{"lng":[-77.14747699999999,-77.14439,-77.14234399999999,-77.139734,-77.137981,-77.140484,-77.138507,-77.140663,-77.137658,-77.138842,-77.143991,-77.148507,-77.14747699999999],"lat":[38.90222,38.902265,38.904015,38.903665,38.902971,38.901676,38.898962,38.89817,38.896261,38.896057,38.894724,38.902122,38.90222]}]],[[{"lng":[-77.14234399999999,-77.13899000000001,-77.13826,-77.13270199999999,-77.130769,-77.128716,-77.12714200000001,-77.124911,-77.12627500000001,-77.12810500000001,-77.12997900000001,-77.131379,-77.130521,-77.13364199999999,-77.13382300000001,-77.135713,-77.136329,-77.137981,-77.139734,-77.14234399999999],"lat":[38.904015,38.906706,38.907044,38.907736,38.905299,38.904183,38.903065,38.901233,38.900799,38.900986,38.900324,38.89845,38.896331,38.896322,38.898398,38.900376,38.902928,38.902971,38.903665,38.904015]}]],[[{"lng":[-77.139427,-77.134495,-77.124875,-77.121179,-77.1197966910841,-77.119759,-77.11790000000001,-77.11681626181171,-77.118505,-77.118948,-77.122654,-77.12468699999999,-77.126318,-77.12948,-77.13092,-77.136104,-77.138721,-77.139427],"lat":[38.918982,38.922853,38.930408,38.933287,38.9343702373596,38.934343,38.932411,38.9294932433392,38.928554,38.925538,38.925328,38.924104,38.921909,38.921555,38.920216,38.917236,38.918529,38.918982]}]],[[{"lng":[-77.136104,-77.13092,-77.12948,-77.126318,-77.12468699999999,-77.122654,-77.118968,-77.119049,-77.12159,-77.12481099999999,-77.12773199999999,-77.131575,-77.133242,-77.135265,-77.13642299999999,-77.136104],"lat":[38.917236,38.920216,38.921555,38.921909,38.924104,38.925328,38.917235,38.915952,38.918177,38.915828,38.914027,38.914906,38.913271,38.913231,38.915911,38.917236]}]],[[{"lng":[-77.145809,-77.139427,-77.138721,-77.136104,-77.13642299999999,-77.135265,-77.133274,-77.131135,-77.128716,-77.130769,-77.13270199999999,-77.134282,-77.14081400000001,-77.145809],"lat":[38.914006,38.918982,38.918529,38.917236,38.915911,38.913231,38.9112,38.908098,38.904183,38.905299,38.907736,38.90896,38.91077,38.914006]}]],[[{"lng":[-77.135265,-77.133242,-77.131575,-77.12773199999999,-77.12481099999999,-77.124578,-77.124185,-77.131135,-77.133274,-77.135265],"lat":[38.913231,38.913271,38.914906,38.914027,38.915828,38.914652,38.911524,38.908098,38.9112,38.913231]}]],[[{"lng":[-77.131135,-77.124185,-77.124578,-77.12481099999999,-77.12159,-77.119049,-77.11847400000001,-77.115103,-77.113423,-77.11542300000001,-77.119529,-77.120097,-77.119141,-77.11936300000001,-77.123305,-77.125055,-77.12714200000001,-77.128716,-77.131135],"lat":[38.908098,38.911524,38.914652,38.915828,38.918177,38.915952,38.914773,38.912916,38.911256,38.908507,38.905713,38.905726,38.90671,38.908176,38.90556,38.905439,38.903065,38.904183,38.908098]}]],[[{"lng":[-77.122654,-77.118948,-77.118505,-77.11681626181171,-77.11660000000001,-77.1134,-77.10736050640089,-77.110407,-77.110815,-77.113423,-77.115103,-77.11847400000001,-77.119049,-77.118968,-77.122654],"lat":[38.925328,38.925538,38.928554,38.9294932433392,38.928911,38.925211,38.9200221393022,38.917402,38.913374,38.911256,38.912916,38.914773,38.915952,38.917235,38.925328]}]],[[{"lng":[-77.113423,-77.110815,-77.110407,-77.10736050640089,-77.1063,-77.10540243607259,-77.10339999999999,-77.1016445994152,-77.103922,-77.10298400000001,-77.10269700000001,-77.105255,-77.10815599999999,-77.11017,-77.11094300000001,-77.113423],"lat":[38.911256,38.913374,38.917402,38.9200221393022,38.919111,38.9171920702241,38.912911,38.9114747631579,38.91068,38.909712,38.907348,38.903253,38.904078,38.906481,38.908406,38.911256]}]],[[{"lng":[-77.10815599999999,-77.105255,-77.10269700000001,-77.10298400000001,-77.103922,-77.1016445994152,-77.10120000000001,-77.1010155931084,-77.0937,-77.0902,-77.08283921173231,-77.085908,-77.08900800000001,-77.093219,-77.094616,-77.106458,-77.10851599999999,-77.10815599999999],"lat":[38.904078,38.903253,38.907348,38.909712,38.91068,38.9114747631579,38.911111,38.9109831445552,38.905911,38.904211,38.902094773373,38.900052,38.899926,38.898544,38.898784,38.901546,38.902227,38.904078]}]],[[{"lng":[-77.106011,-77.106458,-77.094616,-77.093219,-77.094283,-77.097679,-77.098833,-77.104077,-77.107291,-77.106011],"lat":[38.900591,38.901546,38.898784,38.898544,38.897666,38.896746,38.896011,38.895902,38.896639,38.900591]}]],[[{"lng":[-77.116506,-77.111188,-77.111858,-77.11017,-77.10815599999999,-77.10851599999999,-77.106458,-77.106011,-77.107291,-77.107766,-77.108361,-77.112238,-77.11424,-77.116506],"lat":[38.899314,38.903074,38.904672,38.906481,38.904078,38.902227,38.901546,38.900591,38.896639,38.896766,38.896953,38.898945,38.899337,38.899314]}]],[[{"lng":[-77.123035,-77.120097,-77.119529,-77.11542300000001,-77.113423,-77.11094300000001,-77.11017,-77.111858,-77.111188,-77.116506,-77.119477,-77.12235800000001,-77.123035],"lat":[38.902975,38.905726,38.905713,38.908507,38.911256,38.908406,38.906481,38.904672,38.903074,38.899314,38.898839,38.902672,38.902975]}]],[[{"lng":[-77.12810500000001,-77.12627500000001,-77.124911,-77.12714200000001,-77.125055,-77.123305,-77.11936300000001,-77.119141,-77.120097,-77.123035,-77.12235800000001,-77.119477,-77.120998,-77.123559,-77.12589699999999,-77.126192,-77.12997900000001,-77.12810500000001],"lat":[38.900986,38.900799,38.901233,38.903065,38.905439,38.90556,38.908176,38.90671,38.905726,38.902975,38.902672,38.898839,38.898422,38.89755,38.89669,38.896601,38.900324,38.900986]}]],[[{"lng":[-77.107766,-77.107291,-77.104077,-77.098833,-77.101282,-77.10223499999999,-77.10366399999999,-77.10831399999999,-77.107637,-77.10844400000001,-77.107766],"lat":[38.896766,38.896639,38.895902,38.896011,38.892229,38.891361,38.890677,38.889532,38.893064,38.896872,38.896766]}]],[[{"lng":[-77.111659,-77.112238,-77.108361,-77.107766,-77.10844400000001,-77.107637,-77.10831399999999,-77.111287,-77.112253,-77.111659],"lat":[38.897678,38.898945,38.896953,38.896766,38.896872,38.893064,38.889532,38.888804,38.897049,38.897678]}]],[[{"lng":[-77.11424,-77.112238,-77.111659,-77.112253,-77.111287,-77.114321,-77.11469200000001,-77.114014,-77.115317,-77.11424],"lat":[38.899337,38.898945,38.897678,38.897049,38.888804,38.88808,38.89355,38.897122,38.897582,38.899337]}]],[[{"lng":[-77.12021900000001,-77.11794,-77.116506,-77.11424,-77.115317,-77.114014,-77.11469200000001,-77.119023,-77.119758,-77.12021900000001],"lat":[38.893785,38.898531,38.899314,38.899337,38.897582,38.897122,38.89355,38.893467,38.893272,38.893785]}]],[[{"lng":[-77.119758,-77.119023,-77.11469200000001,-77.114321,-77.115695,-77.11765699999999,-77.118869,-77.119333,-77.119426,-77.119758],"lat":[38.893272,38.893467,38.89355,38.88808,38.887672,38.886477,38.889018,38.891357,38.892614,38.893272]}]],[[{"lng":[-77.12736,-77.124807,-77.124477,-77.124979,-77.122089,-77.121234,-77.11869,-77.120554,-77.122083,-77.124824,-77.125438,-77.12729299999999,-77.127985,-77.12736],"lat":[38.88501,38.885146,38.885576,38.887058,38.887853,38.885288,38.885362,38.882943,38.881787,38.880274,38.880012,38.882813,38.884873,38.88501]}]],[[{"lng":[-77.126429,-77.123884,-77.121595,-77.12108000000001,-77.119333,-77.118869,-77.11765699999999,-77.11869,-77.121234,-77.122089,-77.124979,-77.12527900000001,-77.126429],"lat":[38.890007,38.891712,38.890993,38.890639,38.891357,38.889018,38.886477,38.885362,38.885288,38.887853,38.887058,38.888239,38.890007]}]],[[{"lng":[-77.120998,-77.119477,-77.116506,-77.11794,-77.12021900000001,-77.120834,-77.123559,-77.120998],"lat":[38.898422,38.898839,38.899314,38.898531,38.893785,38.894206,38.89755,38.898422]}]],[[{"lng":[-77.126192,-77.12589699999999,-77.123559,-77.120834,-77.12021900000001,-77.119758,-77.119426,-77.119333,-77.12108000000001,-77.121595,-77.124071,-77.12735499999999,-77.126192],"lat":[38.896601,38.89669,38.89755,38.894206,38.893785,38.893272,38.892614,38.891357,38.890639,38.890993,38.893306,38.896265,38.896601]}]],[[{"lng":[-77.13364199999999,-77.130521,-77.131379,-77.12997900000001,-77.126192,-77.12735499999999,-77.124071,-77.126611,-77.128865,-77.130003,-77.13233,-77.133436,-77.13364199999999],"lat":[38.896322,38.896331,38.89845,38.900324,38.896601,38.896265,38.893306,38.892333,38.895838,38.895496,38.89475,38.895694,38.896322]}]],[[{"lng":[-77.13233,-77.130003,-77.128865,-77.126611,-77.124071,-77.121595,-77.123884,-77.126429,-77.12823299999999,-77.130109,-77.13233],"lat":[38.89475,38.895496,38.895838,38.892333,38.893306,38.890993,38.891712,38.890007,38.892751,38.89197,38.89475]}]],[[{"lng":[-77.137658,-77.13696299999999,-77.13364199999999,-77.133436,-77.13233,-77.130109,-77.12823299999999,-77.126429,-77.12527900000001,-77.129006,-77.13128500000001,-77.13581600000001,-77.13545499999999,-77.137483,-77.138171,-77.13558399999999,-77.13668199999999,-77.13761100000001,-77.138842,-77.137658],"lat":[38.896261,38.896308,38.896322,38.895694,38.89475,38.89197,38.892751,38.890007,38.888239,38.887467,38.888897,38.887479,38.886818,38.885876,38.887595,38.891494,38.893405,38.893109,38.896057,38.896261]}]],[[{"lng":[-77.13581600000001,-77.13128500000001,-77.129006,-77.12527900000001,-77.124979,-77.124477,-77.124807,-77.12736,-77.127985,-77.13373199999999,-77.13545499999999,-77.13581600000001],"lat":[38.887479,38.888897,38.887467,38.888239,38.887058,38.885576,38.885146,38.88501,38.884873,38.883669,38.886818,38.887479]}]],[[{"lng":[-77.13373199999999,-77.127985,-77.12729299999999,-77.125438,-77.126153,-77.12790699999999,-77.132501,-77.134573,-77.13373199999999],"lat":[38.883669,38.884873,38.882813,38.880012,38.879762,38.879391,38.879232,38.883514,38.883669]}]],[[{"lng":[-77.137249,-77.137483,-77.13545499999999,-77.13373199999999,-77.134573,-77.132501,-77.136785,-77.139132,-77.137249],"lat":[38.884849,38.885876,38.886818,38.883669,38.883514,38.879232,38.879286,38.879875,38.884849]}]],[[{"lng":[-77.145855,-77.143991,-77.138842,-77.13761100000001,-77.141256,-77.141801,-77.142782,-77.14488900000001,-77.145855],"lat":[38.894145,38.894724,38.896057,38.893109,38.891969,38.891069,38.890749,38.890323,38.894145]}]],[[{"lng":[-77.141256,-77.13761100000001,-77.13668199999999,-77.13558399999999,-77.138171,-77.137483,-77.138068,-77.138762,-77.141801,-77.141256],"lat":[38.891969,38.893109,38.893405,38.891494,38.887595,38.885876,38.885786,38.88611,38.891069,38.891969]}]],[[{"lng":[-77.14137599999999,-77.139742,-77.138068,-77.137483,-77.137249,-77.139132,-77.14459600000001,-77.14137599999999],"lat":[38.886629,38.885201,38.885786,38.885876,38.884849,38.879875,38.881706,38.886629]}]],[[{"lng":[-77.146097,-77.144161,-77.14515900000001,-77.144274,-77.14488900000001,-77.142782,-77.141801,-77.138762,-77.138068,-77.139742,-77.14137599999999,-77.14459600000001,-77.146097],"lat":[38.882205,38.886536,38.886883,38.888433,38.890323,38.890749,38.891069,38.88611,38.885786,38.885201,38.886629,38.881706,38.882205]}]],[[{"lng":[-77.153245,-77.147392,-77.145855,-77.14488900000001,-77.144274,-77.14515900000001,-77.148582,-77.149235,-77.152202,-77.153245],"lat":[38.892098,38.893639,38.894145,38.890323,38.888433,38.886883,38.887355,38.889041,38.889033,38.892098]}]],[[{"lng":[-77.15633,-77.15163800000001,-77.152202,-77.149235,-77.148582,-77.14515900000001,-77.144161,-77.146097,-77.15374,-77.156302,-77.15633],"lat":[38.887516,38.887414,38.889033,38.889041,38.887355,38.886883,38.886536,38.882205,38.884742,38.885608,38.887516]}]],[[{"lng":[-77.15536400000001,-77.15374,-77.146097,-77.145482,-77.14713,-77.14970099999999,-77.153842,-77.15536400000001],"lat":[38.883309,38.884742,38.882205,38.87722,38.873606,38.87567,38.878851,38.883309]}]],[[{"lng":[-77.165093,-77.164473,-77.161222,-77.156302,-77.15374,-77.15536400000001,-77.153842,-77.15394999999999,-77.15921299999999,-77.163517,-77.165947,-77.165093],"lat":[38.889795,38.889878,38.887496,38.885608,38.884742,38.883309,38.878851,38.878935,38.883035,38.886391,38.888287,38.889795]}]],[[{"lng":[-77.16305800000001,-77.160754,-77.158981,-77.153245,-77.152202,-77.15163800000001,-77.15633,-77.156302,-77.161222,-77.164473,-77.16305800000001],"lat":[38.889937,38.891575,38.88918,38.892098,38.889033,38.887414,38.887516,38.885608,38.887496,38.889878,38.889937]}]],[[{"lng":[-77.146793,-77.14399299999999,-77.143145,-77.13394599999999,-77.13144800000001,-77.127837,-77.126643,-77.123791,-77.128388,-77.137495,-77.137631,-77.145206,-77.146793],"lat":[38.873341,38.873115,38.873095,38.87491,38.870749,38.867777,38.867873,38.866447,38.866362,38.866093,38.866199,38.872108,38.873341]}]],[[{"lng":[-77.14399299999999,-77.141047,-77.13940100000001,-77.137558,-77.13394599999999,-77.143145,-77.14399299999999],"lat":[38.873115,38.878549,38.879573,38.878552,38.87491,38.873095,38.873115]}]],[[{"lng":[-77.14713,-77.145482,-77.146097,-77.14459600000001,-77.139132,-77.13940100000001,-77.141047,-77.14399299999999,-77.146793,-77.14713],"lat":[38.873606,38.87722,38.882205,38.881706,38.879875,38.879573,38.878549,38.873115,38.873341,38.873606]}]],[[{"lng":[-77.139132,-77.136785,-77.132501,-77.12790699999999,-77.126153,-77.125438,-77.124824,-77.122083,-77.121222,-77.120885,-77.128201,-77.13394599999999,-77.137558,-77.13940100000001,-77.139132],"lat":[38.879875,38.879286,38.879232,38.879391,38.879762,38.880012,38.880274,38.881787,38.879945,38.878256,38.876426,38.87491,38.878552,38.879573,38.879875]}]],[[{"lng":[-77.13394599999999,-77.128201,-77.126368,-77.128372,-77.12749700000001,-77.127837,-77.13144800000001,-77.13394599999999],"lat":[38.87491,38.876426,38.872017,38.871033,38.868389,38.867777,38.870749,38.87491]}]],[[{"lng":[-77.11951500000001,-77.117188,-77.115587,-77.115905,-77.11512500000001,-77.11342399999999,-77.111794,-77.11120200000001,-77.112819,-77.113058,-77.115503,-77.119685,-77.11951500000001],"lat":[38.868122,38.869741,38.873312,38.873809,38.87372,38.873759,38.873598,38.873302,38.867553,38.867491,38.866874,38.866622,38.868122]}]],[[{"lng":[-77.120885,-77.114018,-77.11132000000001,-77.112892,-77.11356499999999,-77.11342399999999,-77.11512500000001,-77.115905,-77.11655500000001,-77.118622,-77.120885],"lat":[38.878256,38.880026,38.878197,38.876849,38.876286,38.873759,38.87372,38.873809,38.874315,38.875686,38.878256]}]],[[{"lng":[-77.128372,-77.126368,-77.128201,-77.120885,-77.118622,-77.11655500000001,-77.124466,-77.12643199999999,-77.12749700000001,-77.128372],"lat":[38.871033,38.872017,38.876426,38.878256,38.875686,38.874315,38.87141,38.86936,38.868389,38.871033]}]],[[{"lng":[-77.12749700000001,-77.12643199999999,-77.124466,-77.11655500000001,-77.115905,-77.115587,-77.117188,-77.11951500000001,-77.119685,-77.123791,-77.126643,-77.127837,-77.12749700000001],"lat":[38.868389,38.86936,38.87141,38.874315,38.873809,38.873312,38.869741,38.868122,38.866622,38.866447,38.867873,38.867777,38.868389]}]],[[{"lng":[-77.122083,-77.120554,-77.11869,-77.117074,-77.11640199999999,-77.11395,-77.11376,-77.11595800000001,-77.114018,-77.120885,-77.121222,-77.122083],"lat":[38.881787,38.882943,38.885362,38.885398,38.883624,38.883755,38.882227,38.882077,38.880026,38.878256,38.879945,38.881787]}]],[[{"lng":[-77.11312599999999,-77.109714,-77.109523,-77.10816699999999,-77.108018,-77.109801,-77.10943899999999,-77.110505,-77.112711,-77.11312599999999],"lat":[38.885536,38.88562,38.885647,38.886061,38.884599,38.884413,38.882481,38.882381,38.88223,38.885536]}]],[[{"lng":[-77.11765699999999,-77.115695,-77.114321,-77.111287,-77.10831399999999,-77.10816699999999,-77.109523,-77.109714,-77.11312599999999,-77.112711,-77.11376,-77.11395,-77.11640199999999,-77.117074,-77.11869,-77.11765699999999],"lat":[38.886477,38.887672,38.88808,38.888804,38.889532,38.886061,38.885647,38.88562,38.885536,38.88223,38.882227,38.883755,38.883624,38.885398,38.885362,38.886477]}]],[[{"lng":[-77.106644,-77.104463,-77.104083,-77.106382,-77.106644],"lat":[38.881796,38.881865,38.881203,38.880004,38.881796]}]],[[{"lng":[-77.107591,-77.10761100000001,-77.107761,-77.106714,-77.106644,-77.106382,-77.106807,-77.107838,-77.107591],"lat":[38.879332,38.879884,38.882558,38.882471,38.881796,38.880004,38.877702,38.877827,38.879332]}]],[[{"lng":[-77.106714,-77.105536,-77.104147,-77.10335600000001,-77.104083,-77.104463,-77.106644,-77.106714],"lat":[38.882471,38.882579,38.883104,38.881601,38.881203,38.881865,38.881796,38.882471]}]],[[{"lng":[-77.104147,-77.10334899999999,-77.09965699999999,-77.099153,-77.099723,-77.102706,-77.10335600000001,-77.104147],"lat":[38.883104,38.883442,38.884816,38.883972,38.883424,38.881935,38.881601,38.883104]}]],[[{"lng":[-77.10816699999999,-77.104035,-77.103955,-77.10334899999999,-77.104147,-77.105536,-77.106714,-77.107761,-77.108018,-77.10816699999999],"lat":[38.886061,38.886095,38.884673,38.883442,38.883104,38.882579,38.882471,38.882558,38.884599,38.886061]}]],[[{"lng":[-77.110505,-77.10943899999999,-77.109099,-77.10906,-77.11024399999999,-77.110505],"lat":[38.882381,38.882481,38.880543,38.879865,38.879863,38.882381]}]],[[{"lng":[-77.109801,-77.108018,-77.107761,-77.10943899999999,-77.109801],"lat":[38.884413,38.884599,38.882558,38.882481,38.884413]}]],[[{"lng":[-77.10943899999999,-77.107761,-77.10761100000001,-77.10906,-77.109099,-77.10943899999999],"lat":[38.882481,38.882558,38.879884,38.879865,38.880543,38.882481]}]],[[{"lng":[-77.109302,-77.10906,-77.10761100000001,-77.107591,-77.107838,-77.10786899999999,-77.10954,-77.109302],"lat":[38.8781,38.879865,38.879884,38.879332,38.877827,38.877551,38.877355,38.8781]}]],[[{"lng":[-77.112425,-77.11024399999999,-77.10906,-77.109302,-77.10954,-77.11132000000001,-77.114018,-77.112425],"lat":[38.880025,38.879863,38.879865,38.8781,38.877355,38.878197,38.880026,38.880025]}]],[[{"lng":[-77.112711,-77.110505,-77.11024399999999,-77.112425,-77.112711],"lat":[38.88223,38.882381,38.879863,38.880025,38.88223]}]],[[{"lng":[-77.11595800000001,-77.11376,-77.112711,-77.112425,-77.114018,-77.11595800000001],"lat":[38.882077,38.882227,38.88223,38.880025,38.880026,38.882077]}]],[[{"lng":[-77.096295,-77.094283,-77.09055600000001,-77.091391,-77.091249,-77.092941,-77.094297,-77.09522699999999,-77.096295],"lat":[38.895789,38.897666,38.898114,38.89605,38.894764,38.894585,38.894808,38.895357,38.895789]}]],[[{"lng":[-77.091391,-77.09055600000001,-77.087349,-77.08524199999999,-77.088853,-77.08888899999999,-77.090811,-77.091249,-77.091391],"lat":[38.89605,38.898114,38.898215,38.897523,38.896542,38.895275,38.894825,38.894764,38.89605]}]],[[{"lng":[-77.088853,-77.08524199999999,-77.083907,-77.086501,-77.08888899999999,-77.088853],"lat":[38.896542,38.897523,38.896908,38.89587,38.895275,38.896542]}]],[[{"lng":[-77.094297,-77.092941,-77.091249,-77.090811,-77.08888899999999,-77.086501,-77.086288,-77.08851,-77.089947,-77.090965,-77.09210400000001,-77.093046,-77.094363,-77.094297],"lat":[38.894808,38.894585,38.894764,38.894825,38.895275,38.89587,38.894634,38.894105,38.89259,38.892502,38.892271,38.891895,38.893017,38.894808]}]],[[{"lng":[-77.100572,-77.09920099999999,-77.099401,-77.09748399999999,-77.093046,-77.09210400000001,-77.09093900000001,-77.09068600000001,-77.093355,-77.095004,-77.09715199999999,-77.09891500000001,-77.099153,-77.09965699999999,-77.100177,-77.100572],"lat":[38.887624,38.887326,38.889098,38.890081,38.891895,38.892271,38.890788,38.88963,38.888628,38.887432,38.885869,38.884179,38.883972,38.884816,38.885966,38.887624]}]],[[{"lng":[-77.090965,-77.089947,-77.08851,-77.086288,-77.08614,-77.08581599999999,-77.086145,-77.08734800000001,-77.08865299999999,-77.09068600000001,-77.09093900000001,-77.09210400000001,-77.090965],"lat":[38.892502,38.89259,38.894105,38.894634,38.893394,38.89123,38.891096,38.890877,38.890415,38.88963,38.890788,38.892271,38.892502]}]],[[{"lng":[-77.10831399999999,-77.10366399999999,-77.10223499999999,-77.101282,-77.098833,-77.097679,-77.094283,-77.096295,-77.09922,-77.100819,-77.097831,-77.09748399999999,-77.099401,-77.09920099999999,-77.100572,-77.100177,-77.104035,-77.10816699999999,-77.10831399999999],"lat":[38.889532,38.890677,38.891361,38.892229,38.896011,38.896746,38.897666,38.895789,38.894688,38.891346,38.890477,38.890081,38.889098,38.887326,38.887624,38.885966,38.886095,38.886061,38.889532]}]],[[{"lng":[-77.09922,-77.096295,-77.09522699999999,-77.094297,-77.094363,-77.093046,-77.09748399999999,-77.097831,-77.100819,-77.09922],"lat":[38.894688,38.895789,38.895357,38.894808,38.893017,38.891895,38.890081,38.890477,38.891346,38.894688]}]],[[{"lng":[-77.080572,-77.075442,-77.07349884847289,-77.0706677711042,-77.070814,-77.070784,-77.07359599999999,-77.076412,-77.07874,-77.080287,-77.080572],"lat":[38.897378,38.898985,38.9010481471918,38.9007674023903,38.900335,38.898229,38.898432,38.898374,38.897702,38.89693,38.897378]}]],[[{"lng":[-77.093219,-77.08900800000001,-77.085908,-77.08283921173231,-77.0822,-77.07929739037991,-77.0783563148089,-77.07349884847289,-77.075442,-77.080572,-77.080287,-77.082059,-77.08457199999999,-77.086501,-77.083907,-77.08524199999999,-77.087349,-77.09055600000001,-77.094283,-77.093219],"lat":[38.898544,38.899926,38.900052,38.902094773373,38.901911,38.9016231616772,38.9015298395811,38.9010481471918,38.898985,38.897378,38.89693,38.896353,38.89634,38.89587,38.896908,38.897523,38.898215,38.898114,38.897666,38.898544]}]],[[{"lng":[-77.086501,-77.08457199999999,-77.082059,-77.08187,-77.08487100000001,-77.08614,-77.086288,-77.086501],"lat":[38.89587,38.89634,38.896353,38.895172,38.893726,38.893394,38.894634,38.89587]}]],[[{"lng":[-77.08614,-77.08487100000001,-77.08187,-77.081121,-77.08027300000001,-77.08398800000001,-77.08581599999999,-77.08614],"lat":[38.893394,38.893726,38.895172,38.894611,38.893243,38.891737,38.89123,38.893394]}]],[[{"lng":[-77.082059,-77.080287,-77.07874,-77.078433,-77.078361,-77.07816699999999,-77.08027300000001,-77.081121,-77.08187,-77.082059],"lat":[38.896353,38.89693,38.897702,38.896041,38.895321,38.894089,38.893243,38.894611,38.895172,38.896353]}]],[[{"lng":[-77.078361,-77.073942,-77.073857,-77.076731,-77.07816699999999,-77.078361],"lat":[38.895321,38.895605,38.894802,38.894388,38.894089,38.895321]}]],[[{"lng":[-77.074022,-77.07338,-77.07359599999999,-77.070784,-77.06913,-77.068392,-77.067718,-77.068077,-77.068305,-77.070802,-77.073132,-77.073857,-77.073942,-77.074022],"lat":[38.896371,38.896628,38.898432,38.898229,38.897683,38.897018,38.893237,38.891978,38.893849,38.895091,38.894819,38.894802,38.895605,38.896371]}]],[[{"lng":[-77.07874,-77.076412,-77.07359599999999,-77.07338,-77.074022,-77.078433,-77.07874],"lat":[38.897702,38.898374,38.898432,38.896628,38.896371,38.896041,38.897702]}]],[[{"lng":[-77.078433,-77.074022,-77.073942,-77.078361,-77.078433],"lat":[38.896041,38.896371,38.895605,38.895321,38.896041]}]],[[{"lng":[-77.08351500000001,-77.080618,-77.08027800000001,-77.07892699999999,-77.078337,-77.077924,-77.080033,-77.081075,-77.083068,-77.08323799999999,-77.08351500000001],"lat":[38.888227,38.888955,38.890038,38.890119,38.889784,38.88961,38.887675,38.887112,38.886479,38.886686,38.888227]}]],[[{"lng":[-77.08398800000001,-77.08027300000001,-77.079261,-77.07892699999999,-77.08027800000001,-77.08127399999999,-77.08384599999999,-77.08398800000001],"lat":[38.891737,38.893243,38.89186,38.890119,38.890038,38.890764,38.890826,38.891737]}]],[[{"lng":[-77.08384599999999,-77.08127399999999,-77.08027800000001,-77.080618,-77.08351500000001,-77.08384599999999],"lat":[38.890826,38.890764,38.890038,38.888955,38.888227,38.890826]}]],[[{"lng":[-77.080033,-77.077924,-77.076654,-77.07512699999999,-77.074527,-77.076337,-77.081075,-77.080033],"lat":[38.887675,38.88961,38.890552,38.891158,38.889859,38.887565,38.887112,38.887675]}]],[[{"lng":[-77.074527,-77.07512699999999,-77.073168,-77.071482,-77.071445,-77.071752,-77.076337,-77.074527],"lat":[38.889859,38.891158,38.89185,38.89195,38.888654,38.887636,38.887565,38.889859]}]],[[{"lng":[-77.070802,-77.068305,-77.068077,-77.06859799999999,-77.071215,-77.070802],"lat":[38.895091,38.893849,38.891978,38.892507,38.893343,38.895091]}]],[[{"lng":[-77.08027300000001,-77.07816699999999,-77.076731,-77.076504,-77.076274,-77.078337,-77.07892699999999,-77.079261,-77.08027300000001],"lat":[38.893243,38.894089,38.894388,38.892761,38.891071,38.889784,38.890119,38.89186,38.893243]}]],[[{"lng":[-77.076731,-77.073857,-77.073587,-77.076504,-77.076731],"lat":[38.894388,38.894802,38.893007,38.892761,38.894388]}]],[[{"lng":[-77.078337,-77.076274,-77.076504,-77.073587,-77.073857,-77.073132,-77.070802,-77.071215,-77.071482,-77.073168,-77.07512699999999,-77.076654,-77.077924,-77.078337],"lat":[38.889784,38.891071,38.892761,38.893007,38.894802,38.894819,38.895091,38.893343,38.89195,38.89185,38.891158,38.890552,38.88961,38.889784]}]],[[{"lng":[-77.094827,-77.09030799999999,-77.08986899999999,-77.089827,-77.092907,-77.094775,-77.094827],"lat":[38.886158,38.886444,38.886289,38.884507,38.884437,38.885698,38.886158]}]],[[{"lng":[-77.095004,-77.093355,-77.09068600000001,-77.09030799999999,-77.094827,-77.095004],"lat":[38.887432,38.888628,38.88963,38.886444,38.886158,38.887432]}]],[[{"lng":[-77.094775,-77.092907,-77.091605,-77.09448,-77.094775],"lat":[38.885698,38.884437,38.880873,38.88101,38.885698]}]],[[{"lng":[-77.09448,-77.091605,-77.092907,-77.089827,-77.08773600000001,-77.087299,-77.090464,-77.09441,-77.09448],"lat":[38.88101,38.880873,38.884437,38.884507,38.884551,38.880666,38.880812,38.878924,38.88101]}]],[[{"lng":[-77.08773600000001,-77.08564800000001,-77.084574,-77.084701,-77.084138,-77.085836,-77.087299,-77.08773600000001],"lat":[38.884551,38.884613,38.884749,38.88384,38.881237,38.880656,38.880666,38.884551]}]],[[{"lng":[-77.090464,-77.087299,-77.085836,-77.084138,-77.083279,-77.08366599999999,-77.08376199999999,-77.089512,-77.090464],"lat":[38.880812,38.880666,38.880656,38.881237,38.877096,38.875368,38.87526,38.87948,38.880812]}]],[[{"lng":[-77.09441,-77.090464,-77.089512,-77.08376199999999,-77.08445399999999,-77.08704,-77.08938499999999,-77.091943,-77.09441],"lat":[38.878924,38.880812,38.87948,38.87526,38.87476,38.874001,38.873429,38.872785,38.878924]}]],[[{"lng":[-77.088345,-77.087688,-77.08630100000001,-77.08385,-77.08323799999999,-77.083068,-77.083702,-77.084574,-77.08564800000001,-77.08773600000001,-77.088054,-77.088345],"lat":[38.8879,38.887583,38.886935,38.886355,38.886686,38.886479,38.886073,38.884749,38.884613,38.884551,38.88562,38.8879]}]],[[{"lng":[-77.09068600000001,-77.08865299999999,-77.088345,-77.088054,-77.08773600000001,-77.089827,-77.08986899999999,-77.09030799999999,-77.09068600000001],"lat":[38.88963,38.890415,38.8879,38.88562,38.884551,38.884507,38.886289,38.886444,38.88963]}]],[[{"lng":[-77.08865299999999,-77.08734800000001,-77.086145,-77.08581599999999,-77.08398800000001,-77.08384599999999,-77.08351500000001,-77.085123,-77.085272,-77.08739799999999,-77.087688,-77.088345,-77.08865299999999],"lat":[38.890415,38.890877,38.891096,38.89123,38.891737,38.890826,38.888227,38.888223,38.889508,38.889158,38.887583,38.8879,38.890415]}]],[[{"lng":[-77.08739799999999,-77.085272,-77.085123,-77.085703,-77.08630100000001,-77.087688,-77.08739799999999],"lat":[38.889158,38.889508,38.888223,38.888369,38.886935,38.887583,38.889158]}]],[[{"lng":[-77.085703,-77.085123,-77.08351500000001,-77.08323799999999,-77.08385,-77.08630100000001,-77.085703],"lat":[38.888369,38.888223,38.888227,38.886686,38.886355,38.886935,38.888369]}]],[[{"lng":[-77.09891500000001,-77.09715199999999,-77.095004,-77.094827,-77.094775,-77.09448,-77.097324,-77.096864,-77.09786800000001,-77.09876300000001,-77.09891500000001],"lat":[38.884179,38.885869,38.887432,38.886158,38.885698,38.88101,38.879793,38.878797,38.878526,38.880561,38.884179]}]],[[{"lng":[-77.103752,-77.09786800000001,-77.096864,-77.097324,-77.09448,-77.09441,-77.091943,-77.10062499999999,-77.100722,-77.101032,-77.100398,-77.103752],"lat":[38.876966,38.878526,38.878797,38.879793,38.88101,38.878924,38.872785,38.870614,38.870588,38.870828,38.871443,38.876966]}]],[[{"lng":[-77.10392,-77.102317,-77.102706,-77.099723,-77.099153,-77.09891500000001,-77.09876300000001,-77.09786800000001,-77.103752,-77.10392],"lat":[38.87902,38.879075,38.881935,38.883424,38.883972,38.884179,38.880561,38.878526,38.876966,38.87902]}]],[[{"lng":[-77.11356499999999,-77.112892,-77.10979399999999,-77.10851,-77.109559,-77.11120200000001,-77.111794,-77.11342399999999,-77.11356499999999],"lat":[38.876286,38.876849,38.874646,38.873912,38.872479,38.873302,38.873598,38.873759,38.876286]}]],[[{"lng":[-77.11132000000001,-77.10954,-77.10786899999999,-77.108238,-77.10750299999999,-77.10851,-77.10979399999999,-77.112892,-77.11132000000001],"lat":[38.878197,38.877355,38.877551,38.876176,38.875481,38.873912,38.874646,38.876849,38.878197]}]],[[{"lng":[-77.10786899999999,-77.107838,-77.106807,-77.106382,-77.104083,-77.10335600000001,-77.102706,-77.102317,-77.10392,-77.103752,-77.10514000000001,-77.108238,-77.10786899999999],"lat":[38.877551,38.877827,38.877702,38.880004,38.881203,38.881601,38.881935,38.879075,38.87902,38.876966,38.876627,38.876176,38.877551]}]],[[{"lng":[-77.10851,-77.10750299999999,-77.101032,-77.100722,-77.10684000000001,-77.107665,-77.109559,-77.10851],"lat":[38.873912,38.875481,38.870828,38.870588,38.869038,38.871185,38.872479,38.873912]}]],[[{"lng":[-77.108238,-77.10514000000001,-77.103752,-77.100398,-77.101032,-77.10750299999999,-77.108238],"lat":[38.876176,38.876627,38.876966,38.871443,38.870828,38.875481,38.876176]}]],[[{"lng":[-77.11120200000001,-77.109559,-77.107665,-77.10684000000001,-77.112819,-77.11120200000001],"lat":[38.873302,38.872479,38.871185,38.869038,38.867553,38.873302]}]],[[{"lng":[-77.131849,-77.12222,-77.12223899999999,-77.11914,-77.116613,-77.11780400000001,-77.119895,-77.122383,-77.125429,-77.127183,-77.131849],"lat":[38.861727,38.862364,38.86313,38.86428,38.862193,38.862062,38.861046,38.859666,38.85932,38.858109,38.861727]}]],[[{"lng":[-77.137495,-77.128388,-77.123791,-77.119685,-77.115503,-77.113058,-77.113226,-77.11550699999999,-77.11602499999999,-77.116613,-77.11914,-77.12223899999999,-77.12222,-77.131849,-77.137495],"lat":[38.866093,38.866362,38.866447,38.866622,38.866874,38.867491,38.866968,38.862955,38.862203,38.862193,38.86428,38.86313,38.862364,38.861727,38.866093]}]],[[{"lng":[-77.127183,-77.125429,-77.122383,-77.119895,-77.12031899999999,-77.119981,-77.118956,-77.12262800000001,-77.123609,-77.125868,-77.127183],"lat":[38.858109,38.85932,38.859666,38.861046,38.858448,38.857878,38.856579,38.856086,38.855305,38.857042,38.858109]}]],[[{"lng":[-77.12262800000001,-77.118956,-77.117921,-77.117746,-77.12048,-77.121151,-77.123609,-77.12262800000001],"lat":[38.856086,38.856579,38.854366,38.854101,38.853393,38.853325,38.855305,38.856086]}]],[[{"lng":[-77.12031899999999,-77.119895,-77.11780400000001,-77.116613,-77.11602499999999,-77.114108,-77.11068,-77.109588,-77.10981200000001,-77.11053800000001,-77.112196,-77.11276100000001,-77.113873,-77.11509100000001,-77.117755,-77.119981,-77.12031899999999],"lat":[38.858448,38.861046,38.862062,38.862193,38.862203,38.861835,38.857178,38.856422,38.856374,38.856263,38.855926,38.856682,38.858754,38.859736,38.859648,38.857878,38.858448]}]],[[{"lng":[-77.119981,-77.117755,-77.11509100000001,-77.113873,-77.116383,-77.118956,-77.119981],"lat":[38.857878,38.859648,38.859736,38.858754,38.857064,38.856579,38.857878]}]],[[{"lng":[-77.118956,-77.116383,-77.113873,-77.11276100000001,-77.112196,-77.11393099999999,-77.11523800000001,-77.117226,-77.117746,-77.117921,-77.118956],"lat":[38.856579,38.857064,38.858754,38.856682,38.855926,38.855133,38.854757,38.85418,38.854101,38.854366,38.856579]}]],[[{"lng":[-77.11550699999999,-77.113226,-77.113058,-77.112819,-77.10684000000001,-77.105463,-77.106207,-77.10901699999999,-77.113647,-77.11550699999999],"lat":[38.862955,38.866968,38.867491,38.867553,38.869038,38.865004,38.863384,38.862542,38.864461,38.862955]}]],[[{"lng":[-77.10684000000001,-77.100722,-77.10062499999999,-77.099068,-77.097967,-77.094554,-77.09992099999999,-77.10104200000001,-77.10254500000001,-77.104112,-77.106207,-77.105463,-77.10684000000001],"lat":[38.869038,38.870588,38.870614,38.869195,38.86846,38.866455,38.864654,38.864847,38.865625,38.863851,38.863384,38.865004,38.869038]}]],[[{"lng":[-77.10901699999999,-77.106207,-77.104112,-77.10185300000001,-77.101327,-77.10648399999999,-77.10901699999999],"lat":[38.862542,38.863384,38.863851,38.85935,38.858774,38.857286,38.862542]}]],[[{"lng":[-77.10254500000001,-77.10104200000001,-77.09992099999999,-77.094554,-77.09239100000001,-77.091961,-77.09871699999999,-77.101327,-77.10185300000001,-77.104112,-77.10254500000001],"lat":[38.865625,38.864847,38.864654,38.866455,38.864767,38.861321,38.859526,38.858774,38.85935,38.863851,38.865625]}]],[[{"lng":[-77.11550699999999,-77.113647,-77.10901699999999,-77.10648399999999,-77.10917999999999,-77.109588,-77.11068,-77.114108,-77.11602499999999,-77.11550699999999],"lat":[38.862955,38.864461,38.862542,38.857286,38.85651,38.856422,38.857178,38.861835,38.862203,38.862955]}]],[[{"lng":[-77.08704,-77.08445399999999,-77.08376199999999,-77.08366599999999,-77.083279,-77.08247,-77.08237200000001,-77.08023900000001,-77.07817799999999,-77.081276,-77.083589,-77.083563,-77.082562,-77.085033,-77.08704],"lat":[38.874001,38.87476,38.87526,38.875368,38.877096,38.874874,38.874273,38.871198,38.869055,38.868862,38.868722,38.872017,38.873566,38.874326,38.874001]}]],[[{"lng":[-77.08938499999999,-77.08704,-77.085033,-77.082562,-77.083563,-77.083589,-77.08593999999999,-77.088131,-77.088294,-77.088345,-77.08938499999999],"lat":[38.873429,38.874001,38.874326,38.873566,38.872017,38.868722,38.86863,38.868112,38.869051,38.87082,38.873429]}]],[[{"lng":[-77.097967,-77.088345,-77.088294,-77.088131,-77.094554,-77.097967],"lat":[38.86846,38.87082,38.869051,38.868112,38.866455,38.86846]}]],[[{"lng":[-77.10062499999999,-77.091943,-77.08938499999999,-77.088345,-77.097967,-77.099068,-77.10062499999999],"lat":[38.870614,38.872785,38.873429,38.87082,38.86846,38.869195,38.870614]}]],[[{"lng":[-77.080855,-77.07969300000001,-77.076292,-77.07556700000001,-77.07057,-77.065394,-77.06371900000001,-77.06292000000001,-77.067162,-77.067866,-77.06984300000001,-77.073573,-77.07588800000001,-77.07756999999999,-77.08033,-77.080855],"lat":[38.866706,38.865965,38.867621,38.867142,38.868899,38.870192,38.86896,38.867127,38.865708,38.865206,38.865135,38.866021,38.865428,38.864989,38.864274,38.866706]}]],[[{"lng":[-77.088131,-77.08593999999999,-77.083589,-77.081276,-77.080855,-77.08033,-77.081846,-77.083292,-77.084101,-77.08642399999999,-77.08702099999999,-77.088131],"lat":[38.868112,38.86863,38.868722,38.868862,38.866706,38.864274,38.863878,38.863512,38.863305,38.862708,38.862563,38.868112]}]],[[{"lng":[-77.094554,-77.088131,-77.08702099999999,-77.091961,-77.09239100000001,-77.094554],"lat":[38.866455,38.868112,38.862563,38.861321,38.864767,38.866455]}]],[[{"lng":[-77.09871699999999,-77.091961,-77.09152899999999,-77.08925600000001,-77.09658,-77.098647,-77.09871699999999],"lat":[38.859526,38.861321,38.859409,38.856219,38.854263,38.858884,38.859526]}]],[[{"lng":[-77.09658,-77.08925600000001,-77.08851900000001,-77.089338,-77.090695,-77.09471000000001,-77.09640899999999,-77.095618,-77.09658],"lat":[38.854263,38.856219,38.855246,38.853414,38.85269,38.847583,38.850865,38.852086,38.854263]}]],[[{"lng":[-77.109588,-77.10917999999999,-77.10648399999999,-77.101327,-77.100348,-77.102647,-77.103004,-77.10498699999999,-77.106138,-77.109337,-77.10981200000001,-77.109588],"lat":[38.856422,38.85651,38.857286,38.858774,38.855854,38.852368,38.852121,38.854066,38.854898,38.856029,38.856374,38.856422]}]],[[{"lng":[-77.102647,-77.100348,-77.101327,-77.09871699999999,-77.098647,-77.09658,-77.101322,-77.102647],"lat":[38.852368,38.855854,38.858774,38.859526,38.858884,38.854263,38.852967,38.852368]}]],[[{"lng":[-77.10011,-77.098286,-77.095618,-77.09640899999999,-77.09471000000001,-77.09523,-77.09688800000001,-77.10137,-77.10011],"lat":[38.850315,38.851715,38.852086,38.850865,38.847583,38.846901,38.847782,38.850761,38.850315]}]],[[{"lng":[-77.102647,-77.101322,-77.09658,-77.095618,-77.098286,-77.10011,-77.10137,-77.103004,-77.102647],"lat":[38.852368,38.852967,38.854263,38.852086,38.851715,38.850315,38.850761,38.852121,38.852368]}]],[[{"lng":[-77.10876399999999,-77.10497100000001,-77.103004,-77.10137,-77.09688800000001,-77.09523,-77.09580099999999,-77.105143,-77.10671600000001,-77.106932,-77.109239,-77.10876399999999],"lat":[38.845561,38.850664,38.852121,38.850761,38.847782,38.846901,38.846289,38.842144,38.841934,38.84244,38.842819,38.845561]}]],[[{"lng":[-77.11053800000001,-77.10981200000001,-77.109337,-77.106138,-77.106848,-77.11022199999999,-77.11053800000001],"lat":[38.856263,38.856374,38.856029,38.854898,38.853743,38.855855,38.856263]}]],[[{"lng":[-77.106138,-77.10498699999999,-77.103004,-77.10497100000001,-77.105255,-77.105671,-77.106848,-77.106138],"lat":[38.854898,38.854066,38.852121,38.850664,38.851298,38.85236,38.853743,38.854898]}]],[[{"lng":[-77.112635,-77.108644,-77.105671,-77.105255,-77.10497100000001,-77.10876399999999,-77.109239,-77.110671,-77.110799,-77.11018300000001,-77.113365,-77.112635],"lat":[38.848595,38.852171,38.85236,38.851298,38.850664,38.845561,38.842819,38.84342,38.843446,38.844795,38.847382,38.848595]}]],[[{"lng":[-77.11523800000001,-77.11393099999999,-77.112196,-77.110229,-77.110922,-77.11456099999999,-77.115072,-77.11523800000001],"lat":[38.854757,38.855133,38.855926,38.853951,38.852407,38.851547,38.853031,38.854757]}]],[[{"lng":[-77.11456099999999,-77.110922,-77.110229,-77.112196,-77.11053800000001,-77.11022199999999,-77.106848,-77.105671,-77.108644,-77.112635,-77.11350899999999,-77.11456099999999],"lat":[38.851547,38.852407,38.853951,38.855926,38.856263,38.855855,38.853743,38.85236,38.852171,38.848595,38.849311,38.851547]}]],[[{"lng":[-77.12048,-77.117746,-77.117226,-77.117138,-77.11758,-77.118876,-77.121151,-77.12048],"lat":[38.853393,38.854101,38.85418,38.852871,38.850495,38.851563,38.853325,38.853393]}]],[[{"lng":[-77.117138,-77.117226,-77.11523800000001,-77.115072,-77.11456099999999,-77.11350899999999,-77.112635,-77.113365,-77.11758,-77.117138],"lat":[38.852871,38.85418,38.854757,38.853031,38.851547,38.849311,38.848595,38.847382,38.850495,38.852871]}]],[[{"lng":[-77.10198800000001,-77.099097,-77.098277,-77.09961199999999,-77.100064,-77.100402,-77.10356899999999,-77.10198800000001],"lat":[38.84182,38.841022,38.839404,38.837632,38.837176,38.83717,38.839881,38.84182]}]],[[{"lng":[-77.10671600000001,-77.105143,-77.09580099999999,-77.09523,-77.093092,-77.08956999999999,-77.08570400000001,-77.085696,-77.0857,-77.087294,-77.08865400000001,-77.08951999999999,-77.09183,-77.095872,-77.099097,-77.10198800000001,-77.10356899999999,-77.10502200000001,-77.105963,-77.10701899999999,-77.10671600000001],"lat":[38.841934,38.842144,38.846289,38.846901,38.845904,38.844745,38.843965,38.843304,38.84296,38.842031,38.841907,38.842082,38.843657,38.845014,38.841022,38.84182,38.839881,38.84081,38.840082,38.841366,38.841934]}]],[[{"lng":[-77.100064,-77.09961199999999,-77.098277,-77.096251,-77.095721,-77.09466999999999,-77.097662,-77.09783,-77.100722,-77.100064],"lat":[38.837176,38.837632,38.839404,38.837908,38.837304,38.835597,38.834775,38.834874,38.836343,38.837176]}]],[[{"lng":[-77.099097,-77.095872,-77.09183,-77.09282899999999,-77.09360700000001,-77.09421399999999,-77.095721,-77.096251,-77.098277,-77.099097],"lat":[38.841022,38.845014,38.843657,38.840118,38.839733,38.83776,38.837304,38.837908,38.839404,38.841022]}]],[[{"lng":[-77.08865400000001,-77.087294,-77.0857,-77.085436,-77.08744799999999,-77.087889,-77.08880000000001,-77.08865400000001],"lat":[38.841907,38.842031,38.84296,38.841856,38.839052,38.83901,38.840076,38.841907]}]],[[{"lng":[-77.09282899999999,-77.09183,-77.08951999999999,-77.08865400000001,-77.08880000000001,-77.087889,-77.08872,-77.08933,-77.09360700000001,-77.09282899999999],"lat":[38.840118,38.843657,38.842082,38.841907,38.840076,38.83901,38.838514,38.839286,38.839733,38.840118]}]],[[{"lng":[-77.095721,-77.09421399999999,-77.09360700000001,-77.08933,-77.08872,-77.087889,-77.08744799999999,-77.085436,-77.08515800000001,-77.087678,-77.09466999999999,-77.095721],"lat":[38.837304,38.83776,38.839733,38.839286,38.838514,38.83901,38.839052,38.841856,38.840425,38.838489,38.835597,38.837304]}]],[[{"lng":[-77.09466999999999,-77.093577,-77.088573,-77.08939700000001,-77.090296,-77.09272799999999,-77.097662,-77.09466999999999],"lat":[38.835597,38.834507,38.833806,38.829745,38.829202,38.831188,38.834775,38.835597]}]],[[{"lng":[-77.09466999999999,-77.087678,-77.08515800000001,-77.08498299999999,-77.084621,-77.084884,-77.08539399999999,-77.086281,-77.088573,-77.093577,-77.09466999999999],"lat":[38.835597,38.838489,38.840425,38.839519,38.838532,38.836211,38.834792,38.834899,38.833806,38.834507,38.835597]}]],[[{"lng":[-77.08939700000001,-77.088573,-77.086281,-77.08539399999999,-77.085407,-77.085471,-77.087805,-77.090296,-77.08939700000001],"lat":[38.829745,38.833806,38.834899,38.834792,38.833862,38.830263,38.827357,38.829202,38.829745]}]],[[{"lng":[-77.089338,-77.08851900000001,-77.084338,-77.083995,-77.081243,-77.075536,-77.072632,-77.07056799999999,-77.06997699999999,-77.074316,-77.07854399999999,-77.079413,-77.08153,-77.085517,-77.08480400000001,-77.088239,-77.088701,-77.090695,-77.089338],"lat":[38.853414,38.855246,38.856407,38.855112,38.85579,38.859074,38.859343,38.859662,38.859535,38.853134,38.847697,38.846667,38.849146,38.851687,38.850168,38.848901,38.847869,38.85269,38.853414]}]],[[{"lng":[-77.08755499999999,-77.088701,-77.088239,-77.08480400000001,-77.085517,-77.08153,-77.079413,-77.082245,-77.08570400000001,-77.08956999999999,-77.08755499999999],"lat":[38.846236,38.847869,38.848901,38.850168,38.851687,38.849146,38.846667,38.843433,38.843965,38.844745,38.846236]}]],[[{"lng":[-77.09471000000001,-77.090695,-77.088701,-77.08755499999999,-77.08956999999999,-77.093092,-77.09523,-77.09471000000001],"lat":[38.847583,38.85269,38.847869,38.846236,38.844745,38.845904,38.846901,38.847583]}]],[[{"lng":[-77.081846,-77.08033,-77.07756999999999,-77.077197,-77.081406,-77.081846],"lat":[38.863878,38.864274,38.864989,38.86311,38.862407,38.863878]}]],[[{"lng":[-77.083292,-77.081846,-77.081406,-77.077197,-77.077298,-77.076894,-77.08004699999999,-77.081653,-77.08264,-77.084101,-77.083292],"lat":[38.863512,38.863878,38.862407,38.86311,38.86253,38.86038,38.860015,38.859091,38.85897,38.863305,38.863512]}]],[[{"lng":[-77.08642399999999,-77.084101,-77.08264,-77.081653,-77.08004699999999,-77.076894,-77.074606,-77.074083,-77.072632,-77.075536,-77.081243,-77.083995,-77.084338,-77.08642399999999],"lat":[38.862708,38.863305,38.85897,38.859091,38.860015,38.86038,38.860415,38.859549,38.859343,38.859074,38.85579,38.855112,38.856407,38.862708]}]],[[{"lng":[-77.091961,-77.08702099999999,-77.08642399999999,-77.084338,-77.08851900000001,-77.08925600000001,-77.09152899999999,-77.091961],"lat":[38.861321,38.862563,38.862708,38.856407,38.855246,38.856219,38.859409,38.861321]}]],[[{"lng":[-77.07588800000001,-77.073573,-77.06984300000001,-77.067866,-77.06903,-77.069328,-77.069391,-77.06997699999999,-77.07056799999999,-77.072632,-77.074083,-77.074606,-77.074422,-77.07588800000001],"lat":[38.865428,38.866021,38.865135,38.865206,38.863457,38.86169,38.861242,38.859535,38.859662,38.859343,38.859549,38.860415,38.860384,38.865428]}]],[[{"lng":[-77.07756999999999,-77.07588800000001,-77.074422,-77.074606,-77.076894,-77.077298,-77.077197,-77.07756999999999],"lat":[38.864989,38.865428,38.860384,38.860415,38.86038,38.86253,38.86311,38.864989]}]],[[{"lng":[-77.084574,-77.083702,-77.083068,-77.081075,-77.076337,-77.071752,-77.07370400000001,-77.075743,-77.076543,-77.07907299999999,-77.078408,-77.074878,-77.07370400000001,-77.07057,-77.07556700000001,-77.076292,-77.07817799999999,-77.08023900000001,-77.08237200000001,-77.08247,-77.083279,-77.084138,-77.084701,-77.084574],"lat":[38.884749,38.886073,38.886479,38.887112,38.887565,38.887636,38.886424,38.884008,38.884791,38.88148,38.876105,38.8698,38.870962,38.868899,38.867142,38.867621,38.869055,38.871198,38.874273,38.874874,38.877096,38.881237,38.88384,38.884749]}]],[[{"lng":[-77.081276,-77.07817799999999,-77.076292,-77.07969300000001,-77.080855,-77.081276],"lat":[38.868862,38.869055,38.867621,38.865965,38.866706,38.868862]}]],[[{"lng":[-77.053546,-77.053758,-77.053106,-77.05309099999999,-77.051917,-77.050608,-77.04974199999999,-77.05052000000001,-77.048948,-77.04947300000001,-77.050803,-77.05240000000001,-77.052953,-77.05538799999999,-77.053546],"lat":[38.846418,38.847947,38.847991,38.848098,38.848264,38.850035,38.849767,38.847333,38.841256,38.841341,38.841465,38.840445,38.840355,38.841064,38.846418]}]],[[{"lng":[-77.05159399999999,-77.051563,-77.048523,-77.045672,-77.04348,-77.041838,-77.04628099999999,-77.047494,-77.048316,-77.047681,-77.048154,-77.04974199999999,-77.050608,-77.049543,-77.049463,-77.049305,-77.049396,-77.04885299999999,-77.051669,-77.05159399999999],"lat":[38.865208,38.86583,38.867123,38.870617,38.871883,38.870903,38.865631,38.863577,38.85859,38.855282,38.85224,38.849767,38.850035,38.853293,38.853657,38.856109,38.860741,38.862448,38.862917,38.865208]}]],[[{"lng":[-77.05216799999999,-77.051964,-77.05174599999999,-77.051669,-77.04885299999999,-77.049396,-77.049305,-77.051934,-77.052378,-77.05216799999999],"lat":[38.857531,38.85995,38.862252,38.862917,38.862448,38.860741,38.856109,38.856097,38.855898,38.857531]}]],[[{"lng":[-77.052378,-77.051934,-77.049305,-77.049463,-77.049543,-77.05260800000001,-77.052378],"lat":[38.855898,38.856097,38.856109,38.853657,38.853293,38.853403,38.855898]}]],[[{"lng":[-77.05260800000001,-77.049543,-77.050608,-77.051917,-77.05309099999999,-77.05260800000001],"lat":[38.853403,38.853293,38.850035,38.848264,38.848098,38.853403]}]],[[{"lng":[-77.06903,-77.067866,-77.067162,-77.06292000000001,-77.062748,-77.06495099999999,-77.06541300000001,-77.066337,-77.06695000000001,-77.06708,-77.06724800000001,-77.068265,-77.069328,-77.06903],"lat":[38.863457,38.865206,38.865708,38.867127,38.865898,38.865583,38.863108,38.861633,38.861236,38.860886,38.860411,38.861029,38.86169,38.863457]}]],[[{"lng":[-77.06495099999999,-77.062748,-77.063104,-77.06369599999999,-77.06541300000001,-77.06495099999999],"lat":[38.865583,38.865898,38.86511,38.862916,38.863108,38.865583]}]],[[{"lng":[-77.06695000000001,-77.066337,-77.06541300000001,-77.06369599999999,-77.063,-77.063327,-77.063323,-77.065198,-77.06676299999999,-77.06708,-77.06695000000001],"lat":[38.861236,38.861633,38.863108,38.862916,38.86131,38.86094,38.858483,38.858401,38.858341,38.860886,38.861236]}]],[[{"lng":[-77.05611399999999,-77.054974,-77.05350900000001,-77.053196,-77.054078,-77.055736,-77.05611399999999],"lat":[38.859693,38.859806,38.859879,38.858359,38.857306,38.857311,38.859693]}]],[[{"lng":[-77.054249,-77.051669,-77.05174599999999,-77.05270899999999,-77.053794,-77.054249],"lat":[38.863021,38.862917,38.862252,38.862391,38.861033,38.863021]}]],[[{"lng":[-77.054334,-77.05213500000001,-77.05159399999999,-77.051669,-77.054249,-77.05435,-77.054334],"lat":[38.864849,38.864688,38.865208,38.862917,38.863021,38.863448,38.864849]}]],[[{"lng":[-77.053196,-77.05350900000001,-77.051964,-77.05216799999999,-77.054078,-77.053196],"lat":[38.858359,38.859879,38.85995,38.857531,38.857306,38.858359]}]],[[{"lng":[-77.053794,-77.05270899999999,-77.05174599999999,-77.051964,-77.05350900000001,-77.053794],"lat":[38.861033,38.862391,38.862252,38.85995,38.859879,38.861033]}]],[[{"lng":[-77.056966,-77.056645,-77.054334,-77.05435,-77.054249,-77.053794,-77.05350900000001,-77.054974,-77.05543,-77.05656399999999,-77.056782,-77.056966],"lat":[38.863899,38.865145,38.864849,38.863448,38.863021,38.861033,38.859879,38.859806,38.861908,38.86176,38.862721,38.863899]}]],[[{"lng":[-77.05656399999999,-77.05543,-77.054974,-77.05611399999999,-77.05656399999999],"lat":[38.86176,38.861908,38.859806,38.859693,38.86176]}]],[[{"lng":[-77.06257100000001,-77.061947,-77.060855,-77.058575,-77.056645,-77.056966,-77.056782,-77.059428,-77.05969,-77.05977900000001,-77.062074,-77.06257100000001],"lat":[38.860985,38.863791,38.86573,38.86542,38.865145,38.863899,38.862721,38.863044,38.861783,38.860515,38.860715,38.860985]}]],[[{"lng":[-77.063327,-77.063,-77.06257100000001,-77.062074,-77.05977900000001,-77.058683,-77.05611399999999,-77.055736,-77.056034,-77.057659,-77.06145600000001,-77.061497,-77.063323,-77.063327],"lat":[38.86094,38.86131,38.860985,38.860715,38.860515,38.860413,38.859693,38.857311,38.857352,38.857191,38.857035,38.858568,38.858483,38.86094]}]],[[{"lng":[-77.063104,-77.062748,-77.060855,-77.061947,-77.06257100000001,-77.063,-77.06369599999999,-77.063104],"lat":[38.86511,38.865898,38.86573,38.863791,38.860985,38.86131,38.862916,38.86511]}]],[[{"lng":[-77.05969,-77.059428,-77.056782,-77.05656399999999,-77.05611399999999,-77.058683,-77.05977900000001,-77.05969],"lat":[38.861783,38.863044,38.862721,38.86176,38.859693,38.860413,38.860515,38.861783]}]],[[{"lng":[-77.065198,-77.063323,-77.061497,-77.06145600000001,-77.061345,-77.061193,-77.060614,-77.064633,-77.065067,-77.06516999999999,-77.065198],"lat":[38.858401,38.858483,38.858568,38.857035,38.853242,38.851174,38.850498,38.852249,38.853179,38.856863,38.858401]}]],[[{"lng":[-77.06145600000001,-77.057659,-77.057557,-77.05750500000001,-77.05767400000001,-77.060614,-77.061193,-77.061345,-77.06145600000001],"lat":[38.857035,38.857191,38.853291,38.851035,38.85053,38.850498,38.851174,38.853242,38.857035]}]],[[{"lng":[-77.05750500000001,-77.057557,-77.057659,-77.056034,-77.055736,-77.055432,-77.055278,-77.05354,-77.053758,-77.056105,-77.05767400000001,-77.05750500000001],"lat":[38.851035,38.853291,38.857191,38.857352,38.857311,38.854898,38.85334,38.85239,38.847947,38.847966,38.85053,38.851035]}]],[[{"lng":[-77.055736,-77.054078,-77.05216799999999,-77.052378,-77.05441,-77.055432,-77.055736],"lat":[38.857311,38.857306,38.857531,38.855898,38.855959,38.854898,38.857311]}]],[[{"lng":[-77.055432,-77.05441,-77.052378,-77.05260800000001,-77.05309099999999,-77.053106,-77.053758,-77.05354,-77.055278,-77.055432],"lat":[38.854898,38.855959,38.855898,38.853403,38.848098,38.847991,38.847947,38.85239,38.85334,38.854898]}]],[[{"lng":[-77.074316,-77.06997699999999,-77.069391,-77.069328,-77.068265,-77.06724800000001,-77.06708,-77.06676299999999,-77.065198,-77.06516999999999,-77.065067,-77.068366,-77.06823799999999,-77.068387,-77.070954,-77.07189099999999,-77.073785,-77.074316],"lat":[38.853134,38.859535,38.861242,38.86169,38.861029,38.860411,38.860886,38.858341,38.858401,38.856863,38.853179,38.853145,38.852123,38.850852,38.85086,38.853135,38.853147,38.853134]}]],[[{"lng":[-77.068366,-77.065067,-77.064633,-77.060614,-77.05767400000001,-77.056105,-77.053758,-77.053546,-77.05538799999999,-77.063766,-77.064722,-77.064998,-77.06659399999999,-77.06679,-77.066975,-77.06731600000001,-77.06823799999999,-77.068366],"lat":[38.853145,38.853179,38.852249,38.850498,38.85053,38.847966,38.847947,38.846418,38.841064,38.844909,38.844677,38.845374,38.845065,38.845536,38.846172,38.850992,38.852123,38.853145]}]],[[{"lng":[-77.074336,-77.073235,-77.069377,-77.066975,-77.06679,-77.06659399999999,-77.064998,-77.064722,-77.06682499999999,-77.070348,-77.071651,-77.07342800000001,-77.075424,-77.074336],"lat":[38.848848,38.847666,38.846182,38.846172,38.845536,38.845065,38.845374,38.844677,38.843899,38.843957,38.844414,38.847106,38.847832,38.848848]}]],[[{"lng":[-77.07477900000001,-77.073785,-77.07189099999999,-77.070954,-77.068387,-77.06823799999999,-77.06731600000001,-77.066975,-77.069377,-77.073235,-77.074336,-77.07477900000001],"lat":[38.851719,38.853147,38.853135,38.85086,38.850852,38.852123,38.850992,38.846172,38.846182,38.847666,38.848848,38.851719]}]],[[{"lng":[-77.07854399999999,-77.074316,-77.073785,-77.07477900000001,-77.074336,-77.075424,-77.077372,-77.07854399999999],"lat":[38.847697,38.853134,38.853147,38.851719,38.848848,38.847832,38.845947,38.847697]}]],[[{"lng":[-77.079413,-77.07854399999999,-77.077372,-77.075424,-77.07342800000001,-77.071651,-77.070348,-77.078554,-77.079302,-77.082245,-77.079413],"lat":[38.846667,38.847697,38.845947,38.847832,38.847106,38.844414,38.843957,38.843672,38.842926,38.843433,38.846667]}]]],null,"Block Groups",{"interactive":true,"className":"","stroke":true,"color":"#000","weight":1,"opacity":0.5,"fill":true,"fillColor":["#EBA254","#F8DC7B","#F7D876","#EEB157","#F6D36F","#ECAB54","#FAE48A","#F2C360","#F0BD5B","#EAA153","#F0B95A","#F3C863","#F9E790","#F5CF6A","#F0BC5B","#FAE48A","#EFBB5A","#F3CA65","#F9E58C","#F7D875","#F2C562","#F5CF6A","#F6D36F","#F8DD7C","#F3CA65","#FAE891","#F7DA79","#F6D774","#F7DB7A","#FCED9C","#F9E790","#F7DE7E","#EBA955","#FAE68E","#F8E285","#F8DC7B","#FBE992","#F2C662","#F9E58C","#F8DC7B","#F9E388","#F5D673","#F1BE5C","#ECA754","#F1C461","#E9A052","#F6D977","#F4D16C","#F2C360","#F8DF81","#F9E58D","#EAA153","#F3C864","#F7D876","#F1BF5D","#F3CD68","#F0C05E","#F8E285","#F7DB7A","#FAE994","#EBA254","#F9E388","#E68C50","#FBEC9B","#F6D36F","#FBEE9F","#FFFEC8","#F8DC7B","#F8E287","#F1BD5C","#F5D673","#FDF4AF","#FDF4AE","#E89B52","#F1C25F","#F3CA66","#F9E388","#FFFFCC","#F0C15E","#F8DF81","#FAE995","#F2C360","#FFFFCC","#F9E083","#F9E082","#F7DB7A","#F8DF82","#EEB758","#E07B50","#F8E286","#F1BF5D","#FAEB98","#EEB457","#FBEEA0","#F1BE5C","#F9E389","#EEB457","#F9E083","#F4D06C","#F5D06B","#F9E185","#F1C461","#F0B95A","#F3CA65","#F6D470","#EAA454","#F3C763","#F6D571","#F2C864","#FDF1A7","#F4CB66","#EA9E53","#F0C05E","#EBA653","#FBEE9F","#EDAD56","#F9E58D","#EEB256","#F1C461","#E07C50","#F7DE7E","#F2C360","#E79052","#F9E58B","#FAE892","#F6D571","#EA9E53","#EEB758","#F8E287","#F5D672","#F3C763","#FCED9D","#EEB256","#E89551","#EFBB5A","#CE5E4B","#F5D673","#B64E47","#FDF2AB","#F5D26E","#F5D673","#F2C562","#F6D978","#F3C763","#FBEFA4","#FCF0A6","#EBA353","#F5CF6B","#F0BC5B","#FAE489","#F9E184","#F9E184","#F2C864","#FDF6B5","#F2C864","#F5CF6A","#F5D673","#FBEA98","#EAA454","#EBA955","#EEB457","#EFBB5A","#EEB256","#EDAB55","#F8DC7B","#EBA653","#F4CE69","#F0BD5B","#D86A4E","#FFFFCC","#F1C15F","#F5D26E","#FBE992","#F2C662","#F5CF6A","#F4CB67","#FCF3AC","#E89B52","#E79251","#F9E184","#FCF3AD","#FDF5B3","#FCF0A6","#EEB758","#F1BE5C","#FBEC9B","#FAE48A","#F7D877","#FFFCC5","#F8DD7D","#F8E287","#F9E083","#F9E790","#F9E388","#F8DD7E","#EFBB5A","#F9E58C","#F9E78F","#EEB758","#EDAD56"],"fillOpacity":1,"smoothFactor":1,"noClip":false},null,null,["510131001001 Male Population: 972","510131001002 Male Population: 476","510131001003 Male Population: 510","510131001004 Male Population: 840","510131002001 Male Population: 552","510131002002 Male Population: 888","510131002003 Male Population: 392","510131002004 Male Population: 690","510131002005 Male Population: 736","510131003001 Male Population: 977","510131003002 Male Population: 764","510131003003 Male Population: 648","510131003004 Male Population: 354","510131003005 Male Population: 591","510131004001 Male Population: 744","510131004002 Male Population: 394","510131004003 Male Population: 751","510131005001 Male Population: 631","510131005002 Male Population: 381","510131005003 Male Population: 516","510131005004 Male Population: 667","510131006001 Male Population: 590","510131006002 Male Population: 558","510131006003 Male Population: 471","510131007001 Male Population: 630","510131007002 Male Population: 346","510131007003 Male Population: 493","510131007004 Male Population: 526","510131007005 Male Population: 491","510131007006 Male Population: 284","510131008001 Male Population: 355","510131008002 Male Population: 461","510131009001 Male Population: 902","510131009002 Male Population: 366","510131009003 Male Population: 417","510131009004 Male Population: 483","510131010001 Male Population: 341","510131010002 Male Population: 658","510131010003 Male Population: 378","510131010004 Male Population: 480","510131011001 Male Population: 402","510131011002 Male Population: 533","510131011003 Male Population: 730","510131011004 Male Population: 924","510131011005 Male Population: 674","510131012001 Male Population: 987","510131012002 Male Population: 505","510131012003 Male Population: 578","510131013001 Male Population: 686","510131013002 Male Population: 444","510131013003 Male Population: 377","510131013004 Male Population: 977","510131013005 Male Population: 647","510131013006 Male Population: 510","510131014011 Male Population: 720","510131014021 Male Population: 607","510131014022 Male Population: 711","510131014051 Male Population: 418","510131014052 Male Population: 487","510131014061 Male Population: 330","510131014062 Male Population: 966","510131014063 Male Population: 405","510131014071 Male Population: 1174","510131014072 Male Population: 290","510131014073 Male Population: 558","510131014081 Male Population: 265","510131014082 Male Population: 15","510131014091 Male Population: 483","510131014092 Male Population: 410","510131015011 Male Population: 733","510131015012 Male Population: 535","510131015013 Male Population: 170","510131015021 Male Population: 179","510131015022 Male Population: 1038","510131015023 Male Population: 698","510131015031 Male Population: 626","510131015032 Male Population: 404","510131016011 Male Population: 0","510131016012 Male Population: 704","510131016021 Male Population: 446","510131016022 Male Population: 325","510131016031 Male Population: 688","510131016032 Male Population: 0","510131016033 Male Population: 430","510131016034 Male Population: 438","510131016035 Male Population: 488","510131017011 Male Population: 443","510131017012 Male Population: 782","510131017013 Male Population: 1327","510131017031 Male Population: 411","510131017032 Male Population: 722","510131017041 Male Population: 308","510131017051 Male Population: 807","510131017052 Male Population: 261","510131017053 Male Population: 729","510131018011 Male Population: 399","510131018012 Male Population: 808","510131018013 Male Population: 434","510131018031 Male Population: 580","510131018032 Male Population: 582","510131018033 Male Population: 420","510131018034 Male Population: 675","510131018041 Male Population: 764","510131018042 Male Population: 635","510131018051 Male Population: 548","510131018052 Male Population: 950","510131018053 Male Population: 652","510131019001 Male Population: 543","510131019002 Male Population: 646","510131019003 Male Population: 217","510131020011 Male Population: 623","510131020012 Male Population: 1004","510131020021 Male Population: 706","510131020031 Male Population: 936","510131020032 Male Population: 266","510131020033 Male Population: 875","510131021001 Male Population: 377","510131021002 Male Population: 826","510131022001 Male Population: 678","510131022002 Male Population: 1315","510131022003 Male Population: 461","510131022004 Male Population: 680","510131022005 Male Population: 1131","510131023011 Male Population: 384","510131023012 Male Population: 344","510131023021 Male Population: 543","510131023022 Male Population: 999","510131023023 Male Population: 788","510131024001 Male Population: 409","510131024002 Male Population: 538","510131024003 Male Population: 654","510131024004 Male Population: 280","510131025001 Male Population: 831","510131025002 Male Population: 1088","510131025003 Male Population: 751","510131026001 Male Population: 1566","510131026002 Male Population: 530","510131027011 Male Population: 1732","510131027012 Male Population: 197","510131027021 Male Population: 565","510131027022 Male Population: 533","510131028021 Male Population: 668","510131028031 Male Population: 499","510131028032 Male Population: 654","510131028033 Male Population: 236","510131028041 Male Population: 223","510131028042 Male Population: 962","510131028043 Male Population: 586","510131028044 Male Population: 744","510131029011 Male Population: 396","510131029012 Male Population: 428","510131029013 Male Population: 427","510131029031 Male Population: 645","510131029041 Male Population: 135","510131029042 Male Population: 646","510131029043 Male Population: 592","510131030001 Male Population: 534","510131030002 Male Population: 311","510131030003 Male Population: 948","510131031001 Male Population: 901","510131031002 Male Population: 806","510131031003 Male Population: 747","510131032001 Male Population: 822","510131032002 Male Population: 884","510131032003 Male Population: 477","510131032004 Male Population: 934","510131033001 Male Population: 600","510131033002 Male Population: 734","510131034011 Male Population: 1470","510131034012 Male Population: 0","510131034031 Male Population: 700","510131034041 Male Population: 563","510131034051 Male Population: 341","510131034052 Male Population: 659","510131034053 Male Population: 592","510131035011 Male Population: 621","510131035012 Male Population: 190","510131035013 Male Population: 1028","510131035031 Male Population: 1116","510131035032 Male Population: 429","510131035033 Male Population: 185","510131035034 Male Population: 147","510131035035 Male Population: 223","510131035041 Male Population: 786","510131035042 Male Population: 726","510131035051 Male Population: 295","510131035052 Male Population: 391","510131035053 Male Population: 506","510131035054 Male Population: 38","510131036011 Male Population: 465","510131036012 Male Population: 408","510131036013 Male Population: 435","510131036021 Male Population: 354","510131036022 Male Population: 400","510131037001 Male Population: 463","510131037002 Male Population: 754","510131038001 Male Population: 382","510131038002 Male Population: 363","510131038003 Male Population: 779","510131038004 Male Population: 873"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},{"color":"#fff"}]},{"method":"addPolygons","args":[[[[{"lng":[-77.07816699999999,-77.08027300000002,-77.079261,-77.07892699999999,-77.078337,-77.076274,-77.07650400000001,-77.073587,-77.073857,-77.073942,-77.078361,-77.07816699999999],"lat":[38.894089,38.89324300000001,38.89186000000001,38.890119,38.88978399999999,38.89107099999999,38.892761,38.893007,38.894802,38.89560500000001,38.895321,38.894089]}]],[[{"lng":[-77.10335600000001,-77.104083,-77.106382,-77.106807,-77.107838,-77.10786899999999,-77.108238,-77.10514000000001,-77.103752,-77.10392,-77.102317,-77.102706,-77.099723,-77.099153,-77.09965699999999,-77.10334899999999,-77.104147,-77.10335600000001],"lat":[38.881601,38.881203,38.88000399999999,38.877702,38.877827,38.877551,38.876176,38.87662700000001,38.876966,38.87902,38.879075,38.881935,38.883424,38.883972,38.884816,38.883442,38.88310400000001,38.881601]}]],[[{"lng":[-77.094775,-77.09448,-77.091605,-77.092907,-77.089827,-77.08773600000001,-77.088054,-77.088345,-77.08865299999999,-77.09068600000001,-77.09030799999999,-77.094827,-77.094775],"lat":[38.885698,38.88101,38.88087299999999,38.884437,38.884507,38.884551,38.88562,38.8879,38.890415,38.88962999999999,38.886444,38.88615800000001,38.885698]}]],[[{"lng":[-77.088345,-77.087688,-77.08630100000001,-77.08385,-77.08323799999999,-77.08351500000001,-77.08384599999999,-77.08398800000001,-77.08581599999999,-77.086145,-77.08734800000001,-77.08865299999999,-77.088345],"lat":[38.8879,38.887583,38.886935,38.886355,38.886686,38.888227,38.890826,38.89173700000001,38.89123,38.891096,38.890877,38.890415,38.8879]}]],[[{"lng":[-77.11342399999999,-77.111794,-77.11120200000001,-77.10955900000002,-77.10851,-77.10750299999999,-77.108238,-77.10786899999999,-77.10954,-77.11132000000001,-77.112892,-77.11356499999999,-77.11342399999999],"lat":[38.873759,38.873598,38.873302,38.872479,38.873912,38.875481,38.876176,38.877551,38.877355,38.878197,38.876849,38.87628599999999,38.873759]}]],[[{"lng":[-77.10761100000001,-77.10906,-77.109302,-77.10954,-77.10786899999999,-77.107838,-77.106807,-77.106382,-77.106644,-77.106714,-77.107761,-77.10761100000001],"lat":[38.879884,38.87986500000001,38.8781,38.877355,38.877551,38.877827,38.877702,38.88000399999999,38.881796,38.882471,38.882558,38.879884]}]],[[{"lng":[-77.08323799999999,-77.08385,-77.08630100000001,-77.087688,-77.088345,-77.088054,-77.08773600000001,-77.08564800000001,-77.084574,-77.083702,-77.083068,-77.081075,-77.080033,-77.077924,-77.078337,-77.07892699999999,-77.08027800000001,-77.08127399999999,-77.08384599999999,-77.08351500000001,-77.08323799999999],"lat":[38.886686,38.886355,38.886935,38.887583,38.8879,38.88562,38.884551,38.884613,38.884749,38.886073,38.886479,38.887112,38.887675,38.88961,38.88978399999999,38.890119,38.890038,38.89076399999999,38.890826,38.888227,38.886686]}]],[[{"lng":[-77.106382,-77.104083,-77.10335600000001,-77.104147,-77.105536,-77.106714,-77.106644,-77.106382],"lat":[38.88000399999999,38.881203,38.881601,38.88310400000001,38.882579,38.882471,38.881796,38.88000399999999]}]],[[{"lng":[-77.164473,-77.165093,-77.165947,-77.163517,-77.15921299999999,-77.15394999999999,-77.153842,-77.15536400000001,-77.15374,-77.156302,-77.15633,-77.15163800000001,-77.152202,-77.153245,-77.158981,-77.160754,-77.16305800000001,-77.164473],"lat":[38.889878,38.88979499999999,38.888287,38.886391,38.88303500000001,38.87893499999999,38.87885099999999,38.883309,38.884742,38.88560799999999,38.88751599999999,38.887414,38.889033,38.89209799999999,38.88918,38.891575,38.889937,38.889878]}]],[[{"lng":[-77.13144800000001,-77.127837,-77.126643,-77.123791,-77.119685,-77.11951500000001,-77.117188,-77.115587,-77.115905,-77.11655500000001,-77.118622,-77.120885,-77.128201,-77.13394599999999,-77.13144800000001],"lat":[38.870749,38.867777,38.867873,38.86644699999999,38.86662199999999,38.868122,38.869741,38.873312,38.873809,38.874315,38.875686,38.878256,38.876426,38.87491,38.870749]}]],[[{"lng":[-77.135265,-77.13642299999999,-77.136104,-77.138721,-77.139427,-77.145809,-77.14081400000001,-77.134282,-77.13270199999999,-77.130769,-77.128716,-77.131135,-77.124185,-77.124578,-77.12481099999999,-77.12773199999999,-77.131575,-77.133242,-77.135265],"lat":[38.913231,38.915911,38.917236,38.918529,38.91898199999999,38.914006,38.91077,38.90896000000001,38.907736,38.905299,38.904183,38.90809800000001,38.91152400000001,38.91465199999999,38.915828,38.914027,38.914906,38.913271,38.913231]}]],[[{"lng":[-77.08581599999999,-77.08398800000001,-77.08384599999999,-77.08127399999999,-77.08027800000001,-77.07892699999999,-77.079261,-77.08027300000002,-77.081121,-77.08187,-77.08487100000001,-77.08614,-77.08581599999999],"lat":[38.89123,38.89173700000001,38.890826,38.89076399999999,38.890038,38.890119,38.89186000000001,38.89324300000001,38.894611,38.895172,38.893726,38.893394,38.89123]}]],[[{"lng":[-77.100177,-77.09965699999999,-77.099153,-77.09891500000001,-77.09715199999999,-77.095004,-77.094827,-77.09030799999999,-77.09068600000001,-77.09093900000001,-77.09210400000001,-77.093046,-77.09748399999999,-77.099401,-77.09920099999999,-77.100572,-77.100177],"lat":[38.885966,38.884816,38.883972,38.884179,38.885869,38.887432,38.88615800000001,38.886444,38.88962999999999,38.890788,38.892271,38.891895,38.890081,38.889098,38.88732599999999,38.887624,38.885966]}]],[[{"lng":[-77.146793,-77.14399299999999,-77.141047,-77.13940100000001,-77.137558,-77.13394599999999,-77.128201,-77.120885,-77.121222,-77.122083,-77.124824,-77.125438,-77.126153,-77.12790699999999,-77.132501,-77.136785,-77.139132,-77.14459600000001,-77.146097,-77.145482,-77.14713,-77.146793],"lat":[38.873341,38.873115,38.878549,38.87957299999999,38.878552,38.87491,38.876426,38.878256,38.87994500000001,38.881787,38.880274,38.880012,38.879762,38.879391,38.87923200000001,38.87928599999999,38.87987499999999,38.881706,38.88220500000001,38.87722,38.873606,38.873341]}]],[[{"lng":[-77.145206,-77.137631,-77.137495,-77.128388,-77.123791,-77.126643,-77.127837,-77.13144800000001,-77.13394599999999,-77.137558,-77.13940100000001,-77.141047,-77.14399299999999,-77.146793,-77.145206],"lat":[38.872108,38.866199,38.866093,38.866362,38.86644699999999,38.867873,38.867777,38.870749,38.87491,38.878552,38.87957299999999,38.878549,38.873115,38.873341,38.872108]}]],[[{"lng":[-77.10816699999999,-77.104035,-77.100177,-77.100572,-77.09920099999999,-77.099401,-77.09748399999999,-77.093046,-77.094363,-77.094297,-77.09522699999999,-77.096295,-77.094283,-77.097679,-77.098833,-77.104077,-77.107291,-77.107766,-77.10844400000001,-77.107637,-77.10831399999999,-77.10816699999999],"lat":[38.886061,38.886095,38.885966,38.887624,38.88732599999999,38.889098,38.890081,38.891895,38.893017,38.894808,38.895357,38.895789,38.897666,38.896746,38.89601099999999,38.895902,38.89663900000001,38.896766,38.89687199999999,38.89306400000001,38.889532,38.886061]}]],[[{"lng":[-77.156302,-77.15374,-77.15536400000001,-77.153842,-77.14970099999999,-77.14713,-77.145482,-77.146097,-77.144161,-77.14515900000001,-77.148582,-77.149235,-77.152202,-77.15163800000001,-77.15633,-77.156302],"lat":[38.88560799999999,38.884742,38.883309,38.87885099999999,38.87567,38.873606,38.87722,38.88220500000001,38.88653600000001,38.886883,38.887355,38.88904099999999,38.889033,38.887414,38.88751599999999,38.88560799999999]}]],[[{"lng":[-77.077924,-77.076654,-77.07512699999999,-77.073168,-77.071482,-77.071215,-77.06859799999999,-77.068077,-77.068305,-77.070802,-77.073132,-77.073857,-77.073587,-77.07650400000001,-77.076274,-77.078337,-77.077924],"lat":[38.88961,38.89055200000001,38.891158,38.89185,38.89195000000001,38.893343,38.892507,38.891978,38.893849,38.895091,38.894819,38.894802,38.893007,38.892761,38.89107099999999,38.88978399999999,38.88961]}]],[[{"lng":[-77.080287,-77.07874,-77.076412,-77.07359599999999,-77.07338,-77.074022,-77.073942,-77.073857,-77.073132,-77.070802,-77.068305,-77.068077,-77.067718,-77.068392,-77.06913,-77.07078400000002,-77.070814,-77.0706677711042,-77.07349884847289,-77.075442,-77.080572,-77.080287],"lat":[38.89693,38.897702,38.898374,38.898432,38.896628,38.896371,38.89560500000001,38.894802,38.894819,38.895091,38.893849,38.891978,38.893237,38.89701800000001,38.897683,38.89822900000001,38.900335,38.9007674023903,38.9010481471918,38.898985,38.897378,38.89693]}]],[[{"lng":[-77.08187,-77.081121,-77.08027300000002,-77.07816699999999,-77.078361,-77.073942,-77.074022,-77.07338,-77.07359599999999,-77.076412,-77.07874,-77.080287,-77.082059,-77.08187],"lat":[38.895172,38.894611,38.89324300000001,38.894089,38.895321,38.89560500000001,38.896371,38.896628,38.898432,38.898374,38.897702,38.89693,38.896353,38.895172]}]],[[{"lng":[-77.121222,-77.120885,-77.114018,-77.112425,-77.11024399999999,-77.110505,-77.112711,-77.11376,-77.11395,-77.11640199999999,-77.117074,-77.11869,-77.120554,-77.122083,-77.121222],"lat":[38.87994500000001,38.878256,38.880026,38.88002500000001,38.879863,38.882381,38.88223,38.882227,38.88375499999999,38.883624,38.885398,38.885362,38.882943,38.881787,38.87994500000001]}]],[[{"lng":[-77.138068,-77.138762,-77.141801,-77.142782,-77.14488900000001,-77.144274,-77.14515900000001,-77.144161,-77.146097,-77.14459600000001,-77.139132,-77.136785,-77.132501,-77.134573,-77.13373199999999,-77.13545499999999,-77.137483,-77.138068],"lat":[38.885786,38.88611,38.891069,38.89074900000001,38.890323,38.88843300000001,38.886883,38.88653600000001,38.88220500000001,38.881706,38.87987499999999,38.87928599999999,38.87923200000001,38.88351400000001,38.883669,38.886818,38.885876,38.885786]}]],[[{"lng":[-77.138721,-77.136104,-77.13642299999999,-77.135265,-77.133242,-77.131575,-77.12773199999999,-77.12481099999999,-77.12159,-77.119049,-77.11896800000001,-77.122654,-77.118948,-77.118505,-77.11681626181171,-77.11790000000001,-77.119759,-77.1197966910841,-77.121179,-77.124875,-77.134495,-77.139427,-77.138721],"lat":[38.918529,38.917236,38.915911,38.913231,38.913271,38.914906,38.914027,38.915828,38.918177,38.915952,38.91723499999999,38.925328,38.925538,38.928554,38.92949324333921,38.932411,38.93434300000001,38.93437023735961,38.933287,38.930408,38.922853,38.91898199999999,38.918529]}]],[[{"lng":[-77.08524199999999,-77.087349,-77.09055600000001,-77.091391,-77.091249,-77.090811,-77.08888899999999,-77.086501,-77.083907,-77.08524199999999],"lat":[38.897523,38.898215,38.89811399999999,38.89605,38.894764,38.894825,38.895275,38.89587000000001,38.896908,38.897523]}]],[[{"lng":[-77.11424,-77.112238,-77.108361,-77.107766,-77.107291,-77.106011,-77.106458,-77.10851599999999,-77.10815599999999,-77.11017,-77.11094300000002,-77.113423,-77.11542300000001,-77.11952900000001,-77.120097,-77.123035,-77.12235800000001,-77.119477,-77.116506,-77.11424],"lat":[38.899337,38.898945,38.896953,38.896766,38.89663900000001,38.900591,38.901546,38.902227,38.904078,38.906481,38.908406,38.911256,38.908507,38.905713,38.905726,38.90297499999999,38.90267200000001,38.89883900000001,38.899314,38.899337]}]],[[{"lng":[-77.116506,-77.119477,-77.120998,-77.123559,-77.12589699999999,-77.126192,-77.12735499999999,-77.124071,-77.121595,-77.12108000000001,-77.119333,-77.119426,-77.119758,-77.119023,-77.11469200000001,-77.114014,-77.115317,-77.11424,-77.116506],"lat":[38.899314,38.89883900000001,38.898422,38.89755000000001,38.89669,38.89660099999999,38.896265,38.893306,38.89099300000001,38.890639,38.89135700000001,38.892614,38.89327200000001,38.89346700000001,38.89355,38.897122,38.897582,38.899337,38.899314]}]],[[{"lng":[-77.145855,-77.147392,-77.153245,-77.152202,-77.149235,-77.148582,-77.14515900000001,-77.144274,-77.14488900000001,-77.142782,-77.141801,-77.141256,-77.13761100000001,-77.138842,-77.143991,-77.145855],"lat":[38.89414499999999,38.89363899999999,38.89209799999999,38.889033,38.88904099999999,38.887355,38.886883,38.88843300000001,38.890323,38.89074900000001,38.891069,38.89196900000001,38.893109,38.896057,38.894724,38.89414499999999]}]],[[{"lng":[-77.112711,-77.110505,-77.10943899999999,-77.107761,-77.106714,-77.105536,-77.104147,-77.10334899999999,-77.103955,-77.104035,-77.10816699999999,-77.109523,-77.109714,-77.11312599999999,-77.112711],"lat":[38.88223,38.882381,38.882481,38.882558,38.882471,38.882579,38.88310400000001,38.883442,38.884673,38.886095,38.886061,38.88564699999999,38.88562,38.885536,38.88223]}]],[[{"lng":[-77.172192,-77.165947,-77.165093,-77.164473,-77.16305800000001,-77.160754,-77.158981,-77.153245,-77.147392,-77.148759,-77.15109699999999,-77.15184600000001,-77.15724400000001,-77.15763200000001,-77.15817199999999,-77.162887,-77.164208,-77.16811,-77.172276,-77.172192],"lat":[38.893166,38.888287,38.88979499999999,38.889878,38.889937,38.891575,38.88918,38.89209799999999,38.89363899999999,38.897448,38.89753400000001,38.897152,38.896883,38.894564,38.894331,38.897712,38.89957800000001,38.89652099999999,38.893245,38.893166]}]],[[{"lng":[-77.11024399999999,-77.112425,-77.114018,-77.11132000000001,-77.10954,-77.109302,-77.10906,-77.10761100000001,-77.107761,-77.10943899999999,-77.110505,-77.11024399999999],"lat":[38.879863,38.88002500000001,38.880026,38.878197,38.877355,38.8781,38.87986500000001,38.879884,38.882558,38.882481,38.882381,38.879863]}]],[[{"lng":[-77.151977,-77.154539,-77.15968100000001,-77.156336,-77.15424,-77.149174,-77.148507,-77.14747699999999,-77.14439,-77.14234399999999,-77.13899000000001,-77.13826,-77.13270199999999,-77.134282,-77.14081400000001,-77.145809,-77.151977],"lat":[38.909177,38.907173,38.903147,38.900926,38.900735,38.901793,38.902122,38.90222000000001,38.90226500000001,38.904015,38.90670599999999,38.907044,38.907736,38.90896000000001,38.91077,38.914006,38.909177]}]],[[{"lng":[-77.09210400000001,-77.09093900000001,-77.09068600000001,-77.08865299999999,-77.08734800000001,-77.086145,-77.08581599999999,-77.08614,-77.08487100000001,-77.08187,-77.082059,-77.080287,-77.080572,-77.075442,-77.07349884847289,-77.0783563148089,-77.07929739037991,-77.0822,-77.08283921173231,-77.085908,-77.08900800000001,-77.093219,-77.094283,-77.09055600000001,-77.087349,-77.08524199999999,-77.083907,-77.086501,-77.086288,-77.08851,-77.089947,-77.090965,-77.09210400000001],"lat":[38.892271,38.890788,38.88962999999999,38.890415,38.890877,38.891096,38.89123,38.893394,38.893726,38.895172,38.896353,38.89693,38.897378,38.898985,38.9010481471918,38.9015298395811,38.9016231616772,38.901911,38.902094773373,38.90005200000001,38.899926,38.89854399999999,38.897666,38.89811399999999,38.898215,38.897523,38.896908,38.89587000000001,38.894634,38.894105,38.89258999999999,38.89250200000001,38.892271]}]],[[{"lng":[-77.162887,-77.15817199999999,-77.15763200000001,-77.15724400000001,-77.15184600000001,-77.15109699999999,-77.148759,-77.147392,-77.145855,-77.143991,-77.148507,-77.149174,-77.15424,-77.156336,-77.15968100000001,-77.164208,-77.162887],"lat":[38.897712,38.894331,38.894564,38.896883,38.897152,38.89753400000001,38.897448,38.89363899999999,38.89414499999999,38.894724,38.902122,38.901793,38.900735,38.900926,38.903147,38.89957800000001,38.897712]}]],[[{"lng":[-77.138842,-77.13761100000001,-77.141256,-77.141801,-77.138762,-77.138068,-77.137483,-77.13545499999999,-77.13581600000001,-77.13128500000001,-77.129006,-77.12527900000001,-77.126429,-77.12823299999999,-77.130109,-77.13233,-77.133436,-77.13364199999999,-77.13696299999999,-77.137658,-77.138842],"lat":[38.896057,38.893109,38.89196900000001,38.891069,38.88611,38.885786,38.885876,38.886818,38.887479,38.88889700000001,38.887467,38.88823900000001,38.890007,38.892751,38.89197,38.89475,38.89569400000001,38.896322,38.896308,38.896261,38.896057]}]],[[{"lng":[-77.107291,-77.104077,-77.098833,-77.097679,-77.094283,-77.093219,-77.08900800000001,-77.085908,-77.08283921173231,-77.09020000000001,-77.0937,-77.1010155931084,-77.10120000000001,-77.1016445994152,-77.103922,-77.10298400000001,-77.10269700000001,-77.105255,-77.10815599999999,-77.10851599999999,-77.106458,-77.106011,-77.107291],"lat":[38.89663900000001,38.895902,38.89601099999999,38.896746,38.897666,38.89854399999999,38.899926,38.90005200000001,38.902094773373,38.904211,38.905911,38.9109831445552,38.91111100000001,38.9114747631579,38.91068,38.909712,38.907348,38.903253,38.904078,38.902227,38.901546,38.900591,38.89663900000001]}]],[[{"lng":[-77.148507,-77.143991,-77.138842,-77.137658,-77.13696299999999,-77.13364199999999,-77.13382300000001,-77.135713,-77.136329,-77.137981,-77.139734,-77.14234399999999,-77.14439,-77.14747699999999,-77.148507],"lat":[38.902122,38.894724,38.896057,38.896261,38.896308,38.896322,38.898398,38.900376,38.902928,38.902971,38.903665,38.904015,38.90226500000001,38.90222000000001,38.902122]}]],[[{"lng":[-77.09522699999999,-77.094297,-77.094363,-77.093046,-77.09210400000001,-77.090965,-77.089947,-77.08851,-77.086288,-77.086501,-77.08888899999999,-77.090811,-77.091249,-77.091391,-77.09055600000001,-77.094283,-77.096295,-77.09522699999999],"lat":[38.895357,38.894808,38.893017,38.891895,38.892271,38.89250200000001,38.89258999999999,38.894105,38.894634,38.89587000000001,38.895275,38.894825,38.894764,38.89605,38.89811399999999,38.897666,38.895789,38.895357]}]],[[{"lng":[-77.13545499999999,-77.13373199999999,-77.134573,-77.132501,-77.12790699999999,-77.126153,-77.125438,-77.12729299999999,-77.127985,-77.12736,-77.124807,-77.124477,-77.124979,-77.12527900000001,-77.129006,-77.13128500000001,-77.13581600000001,-77.13545499999999],"lat":[38.886818,38.883669,38.88351400000001,38.87923200000001,38.879391,38.879762,38.880012,38.882813,38.88487299999999,38.88501,38.885146,38.885576,38.887058,38.88823900000001,38.887467,38.88889700000001,38.887479,38.886818]}]],[[{"lng":[-77.128716,-77.12714200000001,-77.124911,-77.12627500000001,-77.12810500000001,-77.12997900000001,-77.126192,-77.12589699999999,-77.123559,-77.120998,-77.119477,-77.12235800000001,-77.123035,-77.120097,-77.11952900000001,-77.11542300000001,-77.113423,-77.11510300000002,-77.11847400000001,-77.119049,-77.12159,-77.12481099999999,-77.124578,-77.124185,-77.131135,-77.128716],"lat":[38.904183,38.903065,38.901233,38.900799,38.900986,38.90032399999999,38.89660099999999,38.89669,38.89755000000001,38.898422,38.89883900000001,38.90267200000001,38.90297499999999,38.905726,38.905713,38.908507,38.911256,38.912916,38.914773,38.915952,38.918177,38.915828,38.91465199999999,38.91152400000001,38.90809800000001,38.904183]}]],[[{"lng":[-77.12527900000001,-77.124979,-77.124477,-77.124807,-77.12736,-77.127985,-77.12729299999999,-77.125438,-77.124824,-77.122083,-77.120554,-77.11869,-77.11765699999999,-77.118869,-77.119333,-77.12108000000001,-77.121595,-77.124071,-77.126611,-77.128865,-77.130003,-77.13233,-77.130109,-77.12823299999999,-77.126429,-77.12527900000001],"lat":[38.88823900000001,38.887058,38.885576,38.885146,38.88501,38.88487299999999,38.882813,38.880012,38.880274,38.881787,38.882943,38.885362,38.886477,38.889018,38.89135700000001,38.890639,38.89099300000001,38.893306,38.892333,38.89583799999999,38.895496,38.89475,38.89197,38.892751,38.890007,38.88823900000001]}]],[[{"lng":[-77.115317,-77.114014,-77.11469200000001,-77.119023,-77.119758,-77.119426,-77.119333,-77.118869,-77.11765699999999,-77.115695,-77.114321,-77.111287,-77.11225300000001,-77.111659,-77.112238,-77.11424,-77.115317],"lat":[38.897582,38.897122,38.89355,38.89346700000001,38.89327200000001,38.892614,38.89135700000001,38.889018,38.886477,38.88767200000001,38.88808,38.888804,38.897049,38.897678,38.898945,38.899337,38.897582]}]],[[{"lng":[-77.118622,-77.11655500000001,-77.115905,-77.115587,-77.117188,-77.11951500000001,-77.119685,-77.115503,-77.113058,-77.112819,-77.11120200000001,-77.111794,-77.11342399999999,-77.11356499999999,-77.112892,-77.11132000000001,-77.114018,-77.120885,-77.118622],"lat":[38.875686,38.874315,38.873809,38.873312,38.869741,38.868122,38.86662199999999,38.866874,38.86749099999999,38.867553,38.873302,38.873598,38.873759,38.87628599999999,38.876849,38.878197,38.880026,38.878256,38.875686]}]],[[{"lng":[-77.11896800000001,-77.119049,-77.11847400000001,-77.11510300000002,-77.113423,-77.11094300000002,-77.11017,-77.10815599999999,-77.105255,-77.10269700000001,-77.10298400000001,-77.103922,-77.1016445994152,-77.10339999999999,-77.10540243607259,-77.1063,-77.10736050640089,-77.1134,-77.11660000000001,-77.11681626181171,-77.118505,-77.118948,-77.122654,-77.11896800000001],"lat":[38.91723499999999,38.915952,38.914773,38.912916,38.911256,38.908406,38.906481,38.904078,38.903253,38.907348,38.909712,38.91068,38.9114747631579,38.912911,38.9171920702241,38.919111,38.92002213930219,38.925211,38.928911,38.92949324333921,38.928554,38.925538,38.925328,38.91723499999999]}]],[[{"lng":[-77.11225300000001,-77.111287,-77.114321,-77.115695,-77.11765699999999,-77.11869,-77.117074,-77.11640199999999,-77.11395,-77.11376,-77.112711,-77.11312599999999,-77.109714,-77.109523,-77.10816699999999,-77.10831399999999,-77.107637,-77.10844400000001,-77.107766,-77.108361,-77.112238,-77.111659,-77.11225300000001],"lat":[38.897049,38.888804,38.88808,38.88767200000001,38.886477,38.885362,38.885398,38.883624,38.88375499999999,38.882227,38.88223,38.885536,38.88562,38.88564699999999,38.886061,38.889532,38.89306400000001,38.89687199999999,38.896766,38.896953,38.898945,38.897678,38.897049]}]],[[{"lng":[-77.139734,-77.137981,-77.136329,-77.135713,-77.13382300000001,-77.13364199999999,-77.133436,-77.13233,-77.130003,-77.128865,-77.126611,-77.124071,-77.12735499999999,-77.126192,-77.12997900000001,-77.12810500000001,-77.12627500000001,-77.124911,-77.12714200000001,-77.128716,-77.130769,-77.13270199999999,-77.13826,-77.13899000000001,-77.14234399999999,-77.139734],"lat":[38.903665,38.902971,38.902928,38.900376,38.898398,38.896322,38.89569400000001,38.89475,38.895496,38.89583799999999,38.892333,38.893306,38.896265,38.89660099999999,38.90032399999999,38.900986,38.900799,38.901233,38.903065,38.904183,38.905299,38.907736,38.907044,38.90670599999999,38.904015,38.903665]}]],[[{"lng":[-77.074422,-77.074606,-77.074083,-77.072632,-77.07056799999999,-77.06997699999999,-77.069391,-77.069328,-77.068265,-77.06724800000001,-77.06708,-77.06695000000001,-77.066337,-77.06541300000001,-77.06495099999999,-77.062748,-77.06292000000001,-77.067162,-77.067866,-77.06984300000001,-77.073573,-77.07588800000001,-77.074422],"lat":[38.860384,38.860415,38.859549,38.85934300000001,38.85966199999999,38.859535,38.861242,38.86169,38.861029,38.86041100000001,38.860886,38.86123600000001,38.861633,38.863108,38.865583,38.865898,38.867127,38.865708,38.865206,38.86513500000001,38.866021,38.865428,38.860384]}]],[[{"lng":[-77.085033,-77.082562,-77.083563,-77.083589,-77.081276,-77.080855,-77.07969300000001,-77.076292,-77.07817799999999,-77.08023900000001,-77.08237200000001,-77.08247,-77.083279,-77.08366599999999,-77.08376199999999,-77.08445399999999,-77.08704,-77.085033],"lat":[38.874326,38.87356599999999,38.872017,38.868722,38.868862,38.86670600000001,38.865965,38.867621,38.869055,38.871198,38.87427300000001,38.874874,38.877096,38.875368,38.87526,38.87476,38.87400099999999,38.874326]}]],[[{"lng":[-77.088345,-77.097967,-77.094554,-77.088131,-77.08593999999999,-77.083589,-77.083563,-77.082562,-77.085033,-77.08704,-77.08938499999999,-77.088345],"lat":[38.87082,38.86846,38.866455,38.868112,38.86863,38.868722,38.872017,38.87356599999999,38.874326,38.87400099999999,38.87342899999999,38.87082]}]],[[{"lng":[-77.07512699999999,-77.076654,-77.077924,-77.080033,-77.081075,-77.076337,-77.071752,-77.071445,-77.071482,-77.073168,-77.07512699999999],"lat":[38.891158,38.89055200000001,38.88961,38.887675,38.887112,38.887565,38.887636,38.888654,38.89195000000001,38.89185,38.891158]}]],[[{"lng":[-77.06541300000001,-77.06369599999999,-77.063,-77.06257100000001,-77.061947,-77.060855,-77.062748,-77.06495099999999,-77.06541300000001],"lat":[38.863108,38.862916,38.86131,38.860985,38.86379100000001,38.86572999999999,38.865898,38.865583,38.863108]}]],[[{"lng":[-77.084574,-77.08564800000001,-77.08773600000001,-77.087299,-77.085836,-77.084138,-77.083279,-77.08247,-77.08237200000001,-77.08023900000001,-77.07817799999999,-77.076292,-77.07556700000001,-77.07057,-77.07370400000001,-77.074878,-77.078408,-77.07907299999999,-77.076543,-77.075743,-77.07370400000001,-77.071752,-77.076337,-77.081075,-77.083068,-77.083702,-77.084574],"lat":[38.884749,38.884613,38.884551,38.88066599999999,38.880656,38.881237,38.877096,38.874874,38.87427300000001,38.871198,38.869055,38.867621,38.867142,38.868899,38.870962,38.8698,38.876105,38.88148000000001,38.88479099999999,38.88400799999999,38.886424,38.887636,38.887565,38.887112,38.886479,38.886073,38.884749]}]],[[{"lng":[-77.11758,-77.113365,-77.11018300000001,-77.110799,-77.110671,-77.109239,-77.10876399999999,-77.10497100000001,-77.105255,-77.105671,-77.108644,-77.112635,-77.11350899999999,-77.11456099999999,-77.115072,-77.11523800000001,-77.117226,-77.117138,-77.11758],"lat":[38.850495,38.84738200000001,38.844795,38.843446,38.84342,38.84281900000001,38.845561,38.850664,38.851298,38.85236,38.852171,38.848595,38.849311,38.851547,38.853031,38.854757,38.85418,38.852871,38.850495]}]],[[{"lng":[-77.09466999999999,-77.093577,-77.088573,-77.08939700000001,-77.090296,-77.087805,-77.085471,-77.085407,-77.08539399999999,-77.084884,-77.084621,-77.08498299999999,-77.08515800000001,-77.085436,-77.08744799999999,-77.087889,-77.08872,-77.08933,-77.09360700000001,-77.09421399999999,-77.095721,-77.09466999999999],"lat":[38.83559700000001,38.834507,38.833806,38.829745,38.829202,38.82735700000001,38.830263,38.83386200000001,38.834792,38.836211,38.83853200000001,38.839519,38.84042500000001,38.841856,38.83905200000001,38.83901,38.838514,38.839286,38.839733,38.83776,38.837304,38.83559700000001]}]],[[{"lng":[-77.099097,-77.10198800000001,-77.10356899999999,-77.100402,-77.100064,-77.09961199999999,-77.098277,-77.096251,-77.095721,-77.09421399999999,-77.09360700000001,-77.09282899999999,-77.09183,-77.095872,-77.099097],"lat":[38.841022,38.84182,38.839881,38.83717,38.837176,38.83763199999999,38.839404,38.837908,38.837304,38.83776,38.839733,38.840118,38.843657,38.84501399999999,38.841022]}]],[[{"lng":[-77.05435,-77.054249,-77.053794,-77.05270899999999,-77.05174599999999,-77.051669,-77.05159399999999,-77.05213500000001,-77.054334,-77.05435],"lat":[38.86344800000001,38.863021,38.861033,38.862391,38.86225200000001,38.86291700000001,38.865208,38.864688,38.864849,38.86344800000001]}]],[[{"lng":[-77.10613800000002,-77.109337,-77.10981200000001,-77.11053800000001,-77.11022199999999,-77.106848,-77.105671,-77.105255,-77.10497100000001,-77.103004,-77.10498699999999,-77.10613800000002],"lat":[38.85489800000001,38.856029,38.85637400000001,38.856263,38.85585500000001,38.853743,38.85236,38.851298,38.850664,38.852121,38.854066,38.85489800000001]}]],[[{"lng":[-77.05656399999999,-77.056782,-77.059428,-77.05969,-77.05977900000001,-77.058683,-77.05611399999999,-77.054974,-77.05543,-77.05656399999999],"lat":[38.86176,38.862721,38.863044,38.861783,38.860515,38.860413,38.859693,38.859806,38.861908,38.86176]}]],[[{"lng":[-77.10901699999999,-77.113647,-77.11550699999999,-77.11602499999999,-77.114108,-77.11068,-77.109588,-77.10917999999999,-77.10648399999999,-77.101327,-77.10185300000001,-77.104112,-77.106207,-77.10901699999999],"lat":[38.862542,38.86446099999999,38.862955,38.86220300000001,38.861835,38.857178,38.856422,38.85651000000001,38.857286,38.858774,38.85935,38.863851,38.863384,38.862542]}]],[[{"lng":[-77.084101,-77.08264,-77.081653,-77.08004699999999,-77.076894,-77.074606,-77.074422,-77.07588800000001,-77.07756999999999,-77.077197,-77.081406,-77.081846,-77.083292,-77.084101],"lat":[38.863305,38.85897,38.859091,38.86001499999999,38.86038,38.860415,38.860384,38.865428,38.86498899999999,38.86310999999999,38.862407,38.86387800000001,38.863512,38.863305]}]],[[{"lng":[-77.055432,-77.05527800000002,-77.05354,-77.053758,-77.053106,-77.05309099999999,-77.05260800000001,-77.052378,-77.05216799999999,-77.054078,-77.055736,-77.055432],"lat":[38.854898,38.85334,38.85238999999999,38.847947,38.847991,38.848098,38.85340300000001,38.855898,38.857531,38.857306,38.857311,38.854898]}]],[[{"lng":[-77.06823799999999,-77.06731600000002,-77.066975,-77.069377,-77.073235,-77.07433600000002,-77.075424,-77.07342800000001,-77.071651,-77.070348,-77.06682499999999,-77.064722,-77.06376600000002,-77.05538799999999,-77.05354600000001,-77.053758,-77.056105,-77.05767400000001,-77.060614,-77.064633,-77.065067,-77.068366,-77.06823799999999],"lat":[38.852123,38.850992,38.846172,38.846182,38.84766599999999,38.848848,38.847832,38.847106,38.844414,38.843957,38.843899,38.84467699999999,38.84490900000001,38.841064,38.84641800000001,38.847947,38.847966,38.85053,38.850498,38.852249,38.853179,38.853145,38.852123]}]],[[{"lng":[-77.08033,-77.081846,-77.081406,-77.077197,-77.07756999999999,-77.07588800000001,-77.073573,-77.06984300000001,-77.067866,-77.067162,-77.06292000000001,-77.06371900000002,-77.065394,-77.07057,-77.07556700000001,-77.076292,-77.07969300000001,-77.080855,-77.08033],"lat":[38.864274,38.86387800000001,38.862407,38.86310999999999,38.86498899999999,38.865428,38.866021,38.86513500000001,38.865206,38.865708,38.867127,38.86895999999999,38.870192,38.868899,38.867142,38.867621,38.865965,38.86670600000001,38.864274]}]],[[{"lng":[-77.091943,-77.10062499999999,-77.099068,-77.097967,-77.088345,-77.08938499999999,-77.08704,-77.08445399999999,-77.08376199999999,-77.089512,-77.090464,-77.09441,-77.091943],"lat":[38.872785,38.870614,38.869195,38.86846,38.87082,38.87342899999999,38.87400099999999,38.87476,38.87526,38.87948,38.880812,38.878924,38.872785]}]],[[{"lng":[-77.11350899999999,-77.112635,-77.108644,-77.105671,-77.106848,-77.11022199999999,-77.11053800000001,-77.112196,-77.11393099999999,-77.11523800000001,-77.115072,-77.11456099999999,-77.11350899999999],"lat":[38.849311,38.848595,38.852171,38.85236,38.853743,38.85585500000001,38.856263,38.855926,38.855133,38.854757,38.853031,38.851547,38.849311]}]],[[{"lng":[-77.118956,-77.117921,-77.117746,-77.117226,-77.11523800000001,-77.11393099999999,-77.112196,-77.11276100000001,-77.113873,-77.11509100000001,-77.117755,-77.119981,-77.118956],"lat":[38.856579,38.854366,38.85410099999999,38.85418,38.854757,38.855133,38.855926,38.856682,38.858754,38.859736,38.859648,38.857878,38.856579]}]],[[{"lng":[-77.051669,-77.04885299999999,-77.049396,-77.049305,-77.051934,-77.052378,-77.05260800000001,-77.049543,-77.050608,-77.04974199999999,-77.048154,-77.047681,-77.048316,-77.047494,-77.04628099999999,-77.041838,-77.04348,-77.045672,-77.048523,-77.051563,-77.05159399999999,-77.051669],"lat":[38.86291700000001,38.86244800000001,38.860741,38.856109,38.85609699999999,38.855898,38.85340300000001,38.853293,38.850035,38.849767,38.85224,38.855282,38.85859000000001,38.863577,38.865631,38.870903,38.871883,38.870617,38.867123,38.86583,38.865208,38.86291700000001]}]],[[{"lng":[-77.123609,-77.121151,-77.11887600000001,-77.11758,-77.117138,-77.117226,-77.117746,-77.117921,-77.118956,-77.12262800000001,-77.123609],"lat":[38.85530499999999,38.853325,38.85156300000001,38.850495,38.852871,38.85418,38.85410099999999,38.854366,38.856579,38.856086,38.85530499999999]}]],[[{"lng":[-77.052378,-77.051934,-77.049305,-77.049396,-77.04885299999999,-77.051669,-77.05174599999999,-77.05270899999999,-77.053794,-77.05350900000001,-77.051964,-77.05216799999999,-77.052378],"lat":[38.855898,38.85609699999999,38.856109,38.860741,38.86244800000001,38.86291700000001,38.86225200000001,38.862391,38.861033,38.859879,38.85995,38.857531,38.855898]}]],[[{"lng":[-77.09658,-77.101322,-77.102647,-77.103004,-77.10137000000002,-77.09688800000001,-77.09523,-77.09471000000001,-77.090695,-77.089338,-77.08851900000001,-77.08925600000001,-77.09658],"lat":[38.854263,38.852967,38.85236800000001,38.852121,38.850761,38.847782,38.846901,38.84758300000001,38.85269,38.853414,38.85524600000001,38.856219,38.854263]}]],[[{"lng":[-77.09441,-77.090464,-77.089512,-77.08376199999999,-77.08366599999999,-77.083279,-77.084138,-77.085836,-77.087299,-77.08773600000001,-77.089827,-77.092907,-77.091605,-77.09448,-77.09441],"lat":[38.878924,38.880812,38.87948,38.87526,38.875368,38.877096,38.881237,38.880656,38.88066599999999,38.884551,38.884507,38.884437,38.88087299999999,38.88101,38.878924]}]],[[{"lng":[-77.09239100000001,-77.091961,-77.09152899999999,-77.08925600000001,-77.08851900000001,-77.084338,-77.08642399999999,-77.08702099999999,-77.088131,-77.094554,-77.09239100000001],"lat":[38.864767,38.861321,38.859409,38.856219,38.85524600000001,38.856407,38.862708,38.86256300000001,38.868112,38.866455,38.864767]}]],[[{"lng":[-77.113647,-77.10901699999999,-77.106207,-77.105463,-77.10684000000001,-77.107665,-77.10955900000002,-77.11120200000001,-77.112819,-77.113058,-77.113226,-77.11550699999999,-77.113647],"lat":[38.86446099999999,38.862542,38.863384,38.86500400000001,38.869038,38.871185,38.872479,38.873302,38.867553,38.86749099999999,38.86696799999999,38.862955,38.86446099999999]}]],[[{"lng":[-77.09360700000001,-77.08933,-77.08872,-77.087889,-77.08744799999999,-77.085436,-77.0857,-77.087294,-77.08865400000001,-77.08951999999999,-77.09183,-77.09282899999999,-77.09360700000001],"lat":[38.839733,38.839286,38.838514,38.83901,38.83905200000001,38.841856,38.84295999999999,38.842031,38.84190700000001,38.842082,38.843657,38.840118,38.839733]}]],[[{"lng":[-77.061345,-77.061193,-77.060614,-77.05767400000001,-77.056105,-77.053758,-77.05354,-77.05527800000002,-77.055432,-77.055736,-77.056034,-77.05765900000002,-77.06145600000001,-77.061345],"lat":[38.853242,38.851174,38.850498,38.85053,38.847966,38.847947,38.85238999999999,38.85334,38.854898,38.857311,38.85735199999999,38.85719100000001,38.857035,38.853242]}]],[[{"lng":[-77.119981,-77.117755,-77.11509100000001,-77.113873,-77.11276100000001,-77.112196,-77.11053800000001,-77.10981200000001,-77.109337,-77.10613800000002,-77.10498699999999,-77.103004,-77.102647,-77.100348,-77.101327,-77.10648399999999,-77.10917999999999,-77.109588,-77.11068,-77.114108,-77.11602499999999,-77.116613,-77.11780400000001,-77.119895,-77.12031899999999,-77.119981],"lat":[38.857878,38.859648,38.859736,38.858754,38.856682,38.855926,38.856263,38.85637400000001,38.856029,38.85489800000001,38.854066,38.852121,38.85236800000001,38.85585400000001,38.858774,38.857286,38.85651000000001,38.856422,38.857178,38.861835,38.86220300000001,38.862193,38.862062,38.861046,38.858448,38.857878]}]],[[{"lng":[-77.09523,-77.093092,-77.08956999999999,-77.08570400000001,-77.082245,-77.079302,-77.078554,-77.070348,-77.071651,-77.07342800000001,-77.075424,-77.077372,-77.07854399999999,-77.079413,-77.08153000000001,-77.085517,-77.08480400000001,-77.088239,-77.088701,-77.090695,-77.09471000000001,-77.09523],"lat":[38.846901,38.845904,38.844745,38.843965,38.843433,38.842926,38.843672,38.843957,38.844414,38.847106,38.847832,38.845947,38.847697,38.846667,38.849146,38.85168699999999,38.85016799999999,38.848901,38.847869,38.85269,38.84758300000001,38.846901]}]],[[{"lng":[-77.08702099999999,-77.08642399999999,-77.084338,-77.083995,-77.081243,-77.075536,-77.072632,-77.074083,-77.074606,-77.076894,-77.08004699999999,-77.081653,-77.08264,-77.084101,-77.083292,-77.081846,-77.08033,-77.080855,-77.081276,-77.083589,-77.08593999999999,-77.088131,-77.08702099999999],"lat":[38.86256300000001,38.862708,38.856407,38.855112,38.85579,38.859074,38.85934300000001,38.859549,38.860415,38.86038,38.86001499999999,38.859091,38.85897,38.863305,38.863512,38.86387800000001,38.864274,38.86670600000001,38.868862,38.868722,38.86863,38.868112,38.86256300000001]}]],[[{"lng":[-77.109239,-77.106932,-77.10671600000001,-77.10701899999999,-77.105963,-77.10502200000001,-77.10356899999999,-77.10198800000001,-77.099097,-77.095872,-77.09183,-77.08951999999999,-77.08865400000001,-77.087294,-77.0857,-77.085696,-77.08570400000001,-77.08956999999999,-77.093092,-77.09523,-77.09688800000001,-77.10137000000002,-77.103004,-77.10497100000001,-77.10876399999999,-77.109239],"lat":[38.84281900000001,38.84244,38.841934,38.841366,38.840082,38.84081,38.839881,38.84182,38.841022,38.84501399999999,38.843657,38.842082,38.84190700000001,38.842031,38.84295999999999,38.84330400000001,38.843965,38.844745,38.845904,38.846901,38.847782,38.850761,38.852121,38.850664,38.845561,38.84281900000001]}]],[[{"lng":[-77.090695,-77.088701,-77.088239,-77.08480400000001,-77.085517,-77.08153000000001,-77.079413,-77.07854399999999,-77.077372,-77.075424,-77.07433600000002,-77.07477900000001,-77.073785,-77.074316,-77.06997699999999,-77.07056799999999,-77.072632,-77.075536,-77.081243,-77.083995,-77.084338,-77.08851900000001,-77.089338,-77.090695],"lat":[38.85269,38.847869,38.848901,38.85016799999999,38.85168699999999,38.849146,38.846667,38.847697,38.845947,38.847832,38.848848,38.851719,38.85314700000001,38.853134,38.859535,38.85966199999999,38.85934300000001,38.859074,38.85579,38.855112,38.856407,38.85524600000001,38.853414,38.85269]}]],[[{"lng":[-77.100398,-77.101032,-77.100722,-77.10062499999999,-77.091943,-77.09441,-77.09448,-77.094775,-77.094827,-77.095004,-77.09715199999999,-77.09891500000001,-77.099153,-77.099723,-77.102706,-77.102317,-77.10392,-77.103752,-77.100398],"lat":[38.87144300000001,38.870828,38.870588,38.870614,38.872785,38.878924,38.88101,38.885698,38.88615800000001,38.887432,38.885869,38.884179,38.883972,38.883424,38.881935,38.879075,38.87902,38.876966,38.87144300000001]}]],[[{"lng":[-77.063323,-77.061497,-77.06145600000001,-77.05765900000002,-77.056034,-77.055736,-77.05611399999999,-77.058683,-77.05977900000001,-77.05969,-77.059428,-77.056782,-77.056966,-77.056645,-77.058575,-77.060855,-77.061947,-77.06257100000001,-77.063,-77.063327,-77.063323],"lat":[38.85848299999999,38.858568,38.857035,38.85719100000001,38.85735199999999,38.857311,38.859693,38.860413,38.860515,38.861783,38.863044,38.862721,38.863899,38.865145,38.86542,38.86572999999999,38.86379100000001,38.860985,38.86131,38.86094000000001,38.85848299999999]}]],[[{"lng":[-77.05538799999999,-77.052953,-77.05240000000001,-77.050803,-77.04947300000001,-77.048948,-77.05052000000001,-77.04974199999999,-77.050608,-77.049543,-77.05260800000001,-77.05309099999999,-77.053106,-77.053758,-77.05354600000001,-77.05538799999999],"lat":[38.841064,38.840355,38.840445,38.841465,38.84134099999999,38.841256,38.847333,38.849767,38.850035,38.853293,38.85340300000001,38.848098,38.847991,38.847947,38.84641800000001,38.841064]}]],[[{"lng":[-77.100722,-77.09783,-77.097662,-77.09272799999999,-77.090296,-77.08939700000001,-77.088573,-77.093577,-77.09466999999999,-77.095721,-77.096251,-77.098277,-77.09961199999999,-77.100064,-77.100722],"lat":[38.836343,38.834874,38.834775,38.83118799999999,38.829202,38.829745,38.833806,38.834507,38.83559700000001,38.837304,38.837908,38.839404,38.83763199999999,38.837176,38.836343]}]],[[{"lng":[-77.055736,-77.054078,-77.05216799999999,-77.051964,-77.05350900000001,-77.053794,-77.054249,-77.05435,-77.054334,-77.056645,-77.056966,-77.056782,-77.05656399999999,-77.05543,-77.054974,-77.05611399999999,-77.055736],"lat":[38.857311,38.857306,38.857531,38.85995,38.859879,38.861033,38.863021,38.86344800000001,38.864849,38.865145,38.863899,38.862721,38.86176,38.861908,38.859806,38.859693,38.857311]}]],[[{"lng":[-77.073785,-77.07477900000001,-77.07433600000002,-77.073235,-77.069377,-77.066975,-77.06731600000002,-77.06823799999999,-77.068366,-77.065067,-77.06516999999999,-77.065198,-77.06676300000001,-77.06708,-77.06724800000001,-77.068265,-77.069328,-77.069391,-77.06997699999999,-77.074316,-77.073785],"lat":[38.85314700000001,38.851719,38.848848,38.84766599999999,38.846182,38.846172,38.850992,38.852123,38.853145,38.853179,38.856863,38.858401,38.858341,38.860886,38.86041100000001,38.861029,38.86169,38.861242,38.859535,38.853134,38.85314700000001]}]],[[{"lng":[-77.131849,-77.127183,-77.125868,-77.123609,-77.12262800000001,-77.118956,-77.119981,-77.12031899999999,-77.119895,-77.11780400000001,-77.116613,-77.11602499999999,-77.11550699999999,-77.113226,-77.113058,-77.115503,-77.119685,-77.123791,-77.128388,-77.137495,-77.131849],"lat":[38.861727,38.858109,38.857042,38.85530499999999,38.856086,38.856579,38.857878,38.858448,38.861046,38.862062,38.862193,38.86220300000001,38.862955,38.86696799999999,38.86749099999999,38.866874,38.86662199999999,38.86644699999999,38.866362,38.866093,38.861727]}]],[[{"lng":[-77.06708,-77.06676300000001,-77.065198,-77.06516999999999,-77.065067,-77.064633,-77.060614,-77.061193,-77.061345,-77.06145600000001,-77.061497,-77.063323,-77.063327,-77.063,-77.06369599999999,-77.06541300000001,-77.066337,-77.06695000000001,-77.06708],"lat":[38.860886,38.858341,38.858401,38.856863,38.853179,38.852249,38.850498,38.851174,38.853242,38.857035,38.858568,38.85848299999999,38.86094000000001,38.86131,38.862916,38.863108,38.861633,38.86123600000001,38.860886]}]],[[{"lng":[-77.10955900000002,-77.107665,-77.10684000000001,-77.105463,-77.106207,-77.104112,-77.10254500000001,-77.10104200000001,-77.09992099999999,-77.094554,-77.097967,-77.099068,-77.10062499999999,-77.100722,-77.101032,-77.100398,-77.103752,-77.10514000000001,-77.108238,-77.10750299999999,-77.10851,-77.10955900000002],"lat":[38.872479,38.871185,38.869038,38.86500400000001,38.863384,38.863851,38.865625,38.864847,38.864654,38.866455,38.86846,38.869195,38.870614,38.870588,38.870828,38.87144300000001,38.876966,38.87662700000001,38.876176,38.875481,38.873912,38.872479]}]],[[{"lng":[-77.104112,-77.10185300000001,-77.101327,-77.100348,-77.102647,-77.101322,-77.09658,-77.08925600000001,-77.09152899999999,-77.091961,-77.09239100000001,-77.094554,-77.09992099999999,-77.10104200000001,-77.10254500000001,-77.104112],"lat":[38.863851,38.85935,38.858774,38.85585400000001,38.85236800000001,38.852967,38.854263,38.856219,38.859409,38.861321,38.864767,38.866455,38.864654,38.864847,38.865625,38.863851]}]]],null,"Virtual Tracts",{"interactive":true,"className":"","stroke":true,"color":"#000","weight":2,"opacity":0.5,"fill":true,"fillColor":["#E89751","#BF5349","#D86A4E","#72372E","#C6574A","#EFBB5A","#372513","#EFBB5A","#CA5B4A","#CA5B4A","#EA9E53","#E69352","#A34642","#E28251","#D6674E","#C7584B","#E28251","#E89B52","#F9E083","#C8594A","#C8594A","#DF794F","#B54D46","#F0C05E","#ECAA54","#DC724F","#F0BC5B","#E17E4F","#A94843","#B44D45","#DA6D4E","#A34642","#E9A052","#CF5F4B","#DD754F","#E89551","#ECA855","#EEB758","#E28251","#D7694D","#EDB357","#DE774F","#E68F51","#E38150","#E89551","#E48751","#F8E287","#E48A50","#E79052","#F1C25F","#823C35","#EAA153","#A34642","#E99A53","#F3CC68","#E58E52","#F0B95A","#E07B50","#C7584B","#EFBB5A","#E79052","#C2554A","#EBA353","#E58B51","#A94843","#E48751","#9A433F","#F5D26E","#C6574A","#EA9E53","#BD5248","#E28251","#EEB758","#EDB056","#6B352B","#472A1A","#CE5E4B","#E79452","#BE5349","#DC714F","#F2C360","#E27F50","#EBA353","#823D36","#EEB256","#9D4440","#D6674E","#D0614C","#191900"],"fillOpacity":0.6,"smoothFactor":1,"noClip":false},null,null,["01301_1 Male Population: 1068","01301_2 Male Population: 1672","01301_3 Male Population: 1468","01301_4 Male Population: 2150","01301_5 Male Population: 1627","01301_6 Male Population: 752","01301_7 Male Population: 2534","01301_8 Male Population: 748","01301_9 Male Population: 1598","01301_10 Male Population: 1601","01301_11 Male Population: 1002","01301_12 Male Population: 1107","01301_13 Male Population: 1846","01301_14 Male Population: 1264","01301_15 Male Population: 1492","01301_16 Male Population: 1620","01301_17 Male Population: 1263","01301_18 Male Population: 1037","01301_19 Male Population: 430","01301_20 Male Population: 1614","01301_21 Male Population: 1613","01301_22 Male Population: 1341","01301_23 Male Population: 1741","01301_24 Male Population: 705","01301_25 Male Population: 897","01301_26 Male Population: 1405","01301_27 Male Population: 743","01301_28 Male Population: 1302","01301_29 Male Population: 1812","01301_30 Male Population: 1747","01301_31 Male Population: 1440","01301_32 Male Population: 1848","01301_33 Male Population: 986","01301_34 Male Population: 1560","01301_35 Male Population: 1382","01301_36 Male Population: 1082","01301_37 Male Population: 912","01301_38 Male Population: 783","01301_39 Male Population: 1258","01301_40 Male Population: 1480","01301_41 Male Population: 817","01301_42 Male Population: 1354","01301_43 Male Population: 1138","01301_44 Male Population: 1269","01301_45 Male Population: 1091","01302_1 Male Population: 1221","01302_2 Male Population: 409","01302_3 Male Population: 1192","01302_4 Male Population: 1133","01302_5 Male Population: 696","01302_6 Male Population: 2052","01302_7 Male Population: 980","01302_8 Male Population: 1851","01302_9 Male Population: 1041","01302_10 Male Population: 614","01302_11 Male Population: 1153","01302_12 Male Population: 764","01302_13 Male Population: 1331","01302_14 Male Population: 1618","01302_15 Male Population: 754","01302_16 Male Population: 1136","01302_17 Male Population: 1653","01302_18 Male Population: 955","01302_19 Male Population: 1185","01302_20 Male Population: 1811","01302_21 Male Population: 1222","01302_22 Male Population: 1901","01302_23 Male Population: 564","01302_24 Male Population: 1628","01302_25 Male Population: 1000","01302_26 Male Population: 1685","01302_27 Male Population: 1259","01302_28 Male Population: 781","01302_29 Male Population: 843","01302_30 Male Population: 2193","01302_31 Male Population: 2426","01302_32 Male Population: 1565","01302_33 Male Population: 1096","01302_34 Male Population: 1680","01302_35 Male Population: 1406","01302_36 Male Population: 686","01302_37 Male Population: 1292","01302_38 Male Population: 961","01302_39 Male Population: 2049","01302_40 Male Population: 826","01302_41 Male Population: 1881","01302_42 Male Population: 1493","01302_43 Male Population: 1546","01302_44 Male Population: 2762"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},{"color":"#fff"}]},{"method":"addLegend","args":[{"colors":["#FFFFCC , #FFFFCC 0%, #F6D978 18.1028240405503%, #EA9E53 36.2056480811006%, #D5664D 54.308472121651%, #8A3F39 72.4112961622013%, #3C2615 90.5141202027516%, #191900 "],"labels":["0","500","1,000","1,500","2,000","2,500"],"na_color":null,"na_label":"NA","opacity":1,"position":"bottomright","type":"numeric","title":"Male Population","extra":{"p_1":0,"p_n":0.9051412020275162},"layerId":null,"className":"info legend","group":null}]}],"limits":{"lat":[38.827357,38.93437023735961],"lng":[-77.172276,-77.041838]}},"evals":[],"jsHooks":[]}</script><p>Since these virtual tracts are randomly created, we might also look
at results across a few runs for a sense of variation:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># since this can be quite long-running,</span></span>
<span><span class="co"># we'll save and reload results</span></span>
<span><span class="va">results_altgeo_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">base_dir</span>, <span class="st">"/results_altgeo.rds"</span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.exists</a></span><span class="op">(</span><span class="va">results_altgeo_file</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">results_altgeo</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="va">results_altgeo_file</span><span class="op">)</span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>  <span class="va">results_altgeo</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">50</span>, <span class="va">apply_altgeo</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">saveRDS</a></span><span class="op">(</span><span class="va">results_altgeo</span>, <span class="va">results_altgeo_file</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">kable</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/funprog.html" class="external-link">Reduce</a></span><span class="op">(</span><span class="st">"+"</span>, <span class="va">results_altgeo</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">results_altgeo</span><span class="op">)</span>, digits <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<table style="width:100%;" class="table">
<colgroup>
<col width="17%">
<col width="9%">
<col width="10%">
<col width="10%">
<col width="9%">
<col width="13%">
<col width="13%">
<col width="15%">
</colgroup>
<thead><tr class="header">
<th align="left"></th>
<th align="right">Prop</th>
<th align="right">Prop Adj</th>
<th align="right">Baseline</th>
<th align="right">Rake</th>
<th align="right">Rake 2 Step</th>
<th align="right">Rake N Step</th>
<th align="right">Rake General</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">sex_female</td>
<td align="right">113.199</td>
<td align="right">100.320</td>
<td align="right">110.849</td>
<td align="right">111.066</td>
<td align="right">111.120</td>
<td align="right">110.519</td>
<td align="right">110.812</td>
</tr>
<tr class="even">
<td align="left">sex_male</td>
<td align="right">131.315</td>
<td align="right">117.479</td>
<td align="right">129.066</td>
<td align="right">128.938</td>
<td align="right">128.895</td>
<td align="right">129.342</td>
<td align="right">128.710</td>
</tr>
<tr class="odd">
<td align="left">race_black</td>
<td align="right">61.055</td>
<td align="right">61.697</td>
<td align="right">57.506</td>
<td align="right">57.528</td>
<td align="right">57.178</td>
<td align="right">57.315</td>
<td align="right">57.711</td>
</tr>
<tr class="even">
<td align="left">race_white</td>
<td align="right">172.615</td>
<td align="right">148.385</td>
<td align="right">155.580</td>
<td align="right">157.644</td>
<td align="right">154.924</td>
<td align="right">154.485</td>
<td align="right">158.939</td>
</tr>
<tr class="odd">
<td align="left">race_other</td>
<td align="right">74.940</td>
<td align="right">74.262</td>
<td align="right">75.171</td>
<td align="right">74.803</td>
<td align="right">74.689</td>
<td align="right">74.914</td>
<td align="right">75.175</td>
</tr>
<tr class="even">
<td align="left">race_asian</td>
<td align="right">49.191</td>
<td align="right">50.147</td>
<td align="right">49.037</td>
<td align="right">49.377</td>
<td align="right">49.214</td>
<td align="right">48.922</td>
<td align="right">49.299</td>
</tr>
<tr class="odd">
<td align="left">race_native</td>
<td align="right">4.810</td>
<td align="right">4.896</td>
<td align="right">4.608</td>
<td align="right">4.816</td>
<td align="right">4.553</td>
<td align="right">4.534</td>
<td align="right">4.658</td>
</tr>
<tr class="even">
<td align="left">income_lt50</td>
<td align="right">36.104</td>
<td align="right">38.230</td>
<td align="right">32.539</td>
<td align="right">32.607</td>
<td align="right">32.378</td>
<td align="right">32.395</td>
<td align="right">33.134</td>
</tr>
<tr class="odd">
<td align="left">income_gt200</td>
<td align="right">48.107</td>
<td align="right">43.420</td>
<td align="right">37.323</td>
<td align="right">37.354</td>
<td align="right">37.422</td>
<td align="right">37.540</td>
<td align="right">37.199</td>
</tr>
<tr class="even">
<td align="left">income_100_200</td>
<td align="right">47.601</td>
<td align="right">48.775</td>
<td align="right">46.230</td>
<td align="right">46.253</td>
<td align="right">45.911</td>
<td align="right">45.816</td>
<td align="right">45.995</td>
</tr>
<tr class="odd">
<td align="left">income_50_100</td>
<td align="right">36.142</td>
<td align="right">38.199</td>
<td align="right">34.363</td>
<td align="right">34.607</td>
<td align="right">34.254</td>
<td align="right">34.301</td>
<td align="right">34.397</td>
</tr>
<tr class="even">
<td align="left">Average</td>
<td align="right">70.462</td>
<td align="right">65.983</td>
<td align="right">66.570</td>
<td align="right">66.818</td>
<td align="right">66.412</td>
<td align="right">66.371</td>
<td align="right">66.912</td>
</tr>
</tbody>
</table>
<p><img src="estimate_comparisons_files/figure-html/unnamed-chunk-25-1.svg" width="777.6"><img src="estimate_comparisons_files/figure-html/unnamed-chunk-25-2.svg" width="777.6"><img src="estimate_comparisons_files/figure-html/unnamed-chunk-25-3.svg" width="777.6"><img src="estimate_comparisons_files/figure-html/unnamed-chunk-25-4.svg" width="777.6"></p>
</div>
<div class="section level3">
<h3 id="simulated-populations">Simulated Populations<a class="anchor" aria-label="anchor" href="#simulated-populations"></a>
</h3>
<p>So far, we’ve used the same data at different initial geolevels as a
way to introduce error while still having a known target to measure
error from. This may have the benefit of retaining some properties of
the data that affect our methods in unknown ways, but the down side is
that we cannot very directly measure error, and we are testing against
estimates with their own error.</p>
<p>An alternative is to simulate the initial population, then draw
samples from that population to form simulated version of the data we
have available (sparse PUM samples, and less sparse block group
summaries). Then, instead of having to go down to parcels and back up to
artificially unknown intermediate layers (block groups) to measure
error, we can measure directly at the parcel level.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># simulating the whole population is pretty intensive,</span></span>
<span><span class="co"># so we'll just do that once, then draw samples from it</span></span>
<span><span class="va">population_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">base_dir</span>, <span class="st">"/simulated_population.rds"</span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.exists</a></span><span class="op">(</span><span class="va">population_file</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">population</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="va">population_file</span><span class="op">)</span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>  <span class="va">population</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generate_population.html">generate_population</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">parcels</span><span class="op">$</span><span class="va">Total</span><span class="op">)</span>, <span class="va">parcels</span>, <span class="st">"Total"</span>, <span class="st">"OBJECTID"</span></span>
<span>  <span class="op">)</span></span>
<span>  <span class="va">population</span><span class="op">$</span><span class="va">households</span><span class="op">$</span><span class="va">SERIALNO</span> <span class="op">&lt;-</span> <span class="va">population</span><span class="op">$</span><span class="va">households</span><span class="op">$</span><span class="va">household</span></span>
<span>  <span class="va">population</span><span class="op">$</span><span class="va">individuals</span><span class="op">$</span><span class="va">ID</span> <span class="op">&lt;-</span> <span class="va">population</span><span class="op">$</span><span class="va">individuals</span><span class="op">$</span><span class="va">person</span></span>
<span></span>
<span>  <span class="co"># make categories</span></span>
<span></span>
<span>  <span class="co">## household</span></span>
<span>  <span class="va">population</span><span class="op">$</span><span class="va">households</span><span class="op">$</span><span class="va">building_type</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"MULTI"</span>, <span class="st">"SFD"</span>, <span class="st">"SFA"</span></span>
<span>  <span class="op">)</span><span class="op">[</span><span class="va">population</span><span class="op">$</span><span class="va">households</span><span class="op">$</span><span class="va">building_type</span><span class="op">]</span></span>
<span>  <span class="va">population</span><span class="op">$</span><span class="va">households</span><span class="op">$</span><span class="va">status</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"OWNER"</span>, <span class="st">"RENTER"</span><span class="op">)</span><span class="op">[</span></span>
<span>    <span class="va">population</span><span class="op">$</span><span class="va">households</span><span class="op">$</span><span class="va">renting</span> <span class="op">+</span> <span class="fl">1</span></span>
<span>  <span class="op">]</span></span>
<span>  <span class="va">population</span><span class="op">$</span><span class="va">households</span><span class="op">$</span><span class="va">Total</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/structure.html" class="external-link">structure</a></span><span class="op">(</span></span>
<span>    <span class="va">population</span><span class="op">$</span><span class="va">regions</span><span class="op">$</span><span class="va">capacity</span>,</span>
<span>    names <span class="op">=</span> <span class="va">population</span><span class="op">$</span><span class="va">regions</span><span class="op">$</span><span class="va">id</span></span>
<span>  <span class="op">)</span><span class="op">[</span><span class="va">population</span><span class="op">$</span><span class="va">households</span><span class="op">$</span><span class="va">region</span><span class="op">]</span></span>
<span>  <span class="va">population</span><span class="op">$</span><span class="va">households</span><span class="op">$</span><span class="va">head_income</span> <span class="op">&lt;-</span> <span class="va">population</span><span class="op">$</span><span class="va">households</span><span class="op">$</span><span class="va">head_income</span> <span class="op">/</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">population</span><span class="op">$</span><span class="va">households</span><span class="op">$</span><span class="va">head_income</span><span class="op">)</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">pums</span><span class="op">$</span><span class="va">household</span><span class="op">$</span><span class="va">HINCP</span><span class="op">)</span></span>
<span>  <span class="va">population</span><span class="op">$</span><span class="va">households</span><span class="op">$</span><span class="va">income_cat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cut.html" class="external-link">cut</a></span><span class="op">(</span></span>
<span>    <span class="va">population</span><span class="op">$</span><span class="va">households</span><span class="op">$</span><span class="va">head_income</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="cn">Inf</span>, <span class="fl">50</span>, <span class="fl">100</span>, <span class="fl">200</span>, <span class="cn">Inf</span><span class="op">)</span> <span class="op">*</span> <span class="fl">1e3</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"income_lt50"</span>, <span class="st">"income_50_100"</span>, <span class="st">"income_100_200"</span>, <span class="st">"income_gt200"</span><span class="op">)</span>,</span>
<span>    right <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co">## individual</span></span>
<span>  <span class="va">population</span><span class="op">$</span><span class="va">individuals</span><span class="op">$</span><span class="va">sex_cat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sex_male"</span>, <span class="st">"sex_female"</span><span class="op">)</span><span class="op">[</span></span>
<span>    <span class="va">population</span><span class="op">$</span><span class="va">individuals</span><span class="op">$</span><span class="va">sex</span> <span class="op">+</span> <span class="fl">1</span></span>
<span>  <span class="op">]</span></span>
<span>  <span class="va">population</span><span class="op">$</span><span class="va">individuals</span><span class="op">$</span><span class="va">race_cat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep_len</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grep</a></span><span class="op">(</span><span class="st">"^race"</span>, <span class="va">pvars</span>, value <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">population</span><span class="op">$</span><span class="va">individuals</span><span class="op">$</span><span class="va">race</span><span class="op">)</span> <span class="op">+</span> <span class="fl">1</span></span>
<span>  <span class="op">)</span><span class="op">[</span><span class="va">population</span><span class="op">$</span><span class="va">individuals</span><span class="op">$</span><span class="va">race</span> <span class="op">+</span> <span class="fl">1</span><span class="op">]</span></span>
<span>  <span class="va">population</span><span class="op">$</span><span class="va">individuals</span><span class="op">$</span><span class="va">income</span> <span class="op">&lt;-</span> <span class="va">population</span><span class="op">$</span><span class="va">individuals</span><span class="op">$</span><span class="va">income</span> <span class="op">/</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">population</span><span class="op">$</span><span class="va">individuals</span><span class="op">$</span><span class="va">income</span><span class="op">)</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">pums</span><span class="op">$</span><span class="va">household</span><span class="op">$</span><span class="va">HINCP</span><span class="op">)</span></span>
<span>  <span class="va">population</span><span class="op">$</span><span class="va">individuals</span><span class="op">$</span><span class="va">income_cat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cut.html" class="external-link">cut</a></span><span class="op">(</span></span>
<span>    <span class="va">population</span><span class="op">$</span><span class="va">individuals</span><span class="op">$</span><span class="va">income</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="cn">Inf</span>, <span class="fl">50</span>, <span class="fl">100</span>, <span class="fl">200</span>, <span class="cn">Inf</span><span class="op">)</span> <span class="op">*</span> <span class="fl">1e3</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"income_lt50"</span>, <span class="st">"income_50_100"</span>, <span class="st">"income_100_200"</span>, <span class="st">"income_gt200"</span><span class="op">)</span>,</span>
<span>    right <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span><span class="op">)</span></span>
<span>  <span class="va">combined</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span></span>
<span>    <span class="va">population</span><span class="op">$</span><span class="va">households</span><span class="op">[</span><span class="va">population</span><span class="op">$</span><span class="va">individuals</span><span class="op">$</span><span class="va">household</span>, <span class="op">]</span>,</span>
<span>    <span class="va">population</span><span class="op">$</span><span class="va">individuals</span></span>
<span>  <span class="op">)</span></span>
<span>  <span class="va">population</span><span class="op">$</span><span class="va">summary</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">rbind</span>, <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/split.html" class="external-link">split</a></span><span class="op">(</span><span class="va">combined</span>, <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">combined</span><span class="op">$</span><span class="va">region</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    <span class="kw">function</span><span class="op">(</span><span class="va">d</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">household</span> <span class="op">&lt;-</span> <span class="va">d</span><span class="op">[</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/duplicated.html" class="external-link">duplicated</a></span><span class="op">(</span><span class="va">d</span><span class="op">$</span><span class="va">household</span><span class="op">)</span>, <span class="op">]</span></span>
<span>      <span class="va">owner</span> <span class="op">&lt;-</span> <span class="va">household</span><span class="op">$</span><span class="va">status</span> <span class="op">==</span> <span class="st">"OWNER"</span></span>
<span>      <span class="va">renter</span> <span class="op">&lt;-</span> <span class="va">household</span><span class="op">$</span><span class="va">status</span> <span class="op">==</span> <span class="st">"RENTER"</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span></span>
<span>        id <span class="op">=</span> <span class="va">household</span><span class="op">$</span><span class="va">region</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>,</span>
<span>        Total <span class="op">=</span> <span class="va">household</span><span class="op">$</span><span class="va">Total</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>,</span>
<span>        Owner_Occupied <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">owner</span><span class="op">)</span>,</span>
<span>        Renter_Occupied <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">renter</span><span class="op">)</span>,</span>
<span>        avg_hhsize <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">household</span><span class="op">$</span><span class="va">size</span><span class="op">)</span>,</span>
<span>        avg_hhsize_own <span class="op">=</span> <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">owner</span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">household</span><span class="op">$</span><span class="va">size</span><span class="op">[</span><span class="va">owner</span><span class="op">]</span><span class="op">)</span> <span class="kw">else</span> <span class="fl">0</span>,</span>
<span>        avg_hhsize_rent <span class="op">=</span> <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">renter</span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">household</span><span class="op">$</span><span class="va">size</span><span class="op">[</span><span class="va">renter</span><span class="op">]</span><span class="op">)</span> <span class="kw">else</span> <span class="fl">0</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">as.list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span></span>
<span>          <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">vars_list</span><span class="op">)</span>,</span>
<span>          <span class="kw">function</span><span class="op">(</span><span class="va">var</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">as.list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">d</span><span class="op">[[</span><span class="va">var</span><span class="op">]</span><span class="op">]</span>, <span class="va">vars_list</span><span class="op">[[</span><span class="va">var</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>        <span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">)</span><span class="op">)</span></span>
<span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">saveRDS</a></span><span class="op">(</span><span class="va">population</span>, <span class="va">population_file</span>, compress <span class="op">=</span> <span class="st">"xz"</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>First, we can look at the block group summaries of the full simulated
population:</p>
<div class="leaflet html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-5af5049b2a7993078bc1" style="width:777.6px;height:432px;"></div>
<script type="application/json" data-for="htmlwidget-5af5049b2a7993078bc1">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"attributionControl":false},"calls":[{"method":"addProviderTiles","args":["CartoDB.Positron",null,null,{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]},{"method":"addControl","args":["Male Population","topright",null,"info legend"]},{"method":"addPolygons","args":[[[[{"lng":[-77.172276,-77.16811,-77.164208,-77.162887,-77.15817199999999,-77.163995,-77.16305800000001,-77.164473,-77.165093,-77.165947,-77.172192,-77.172276],"lat":[38.893245,38.896521,38.899578,38.897712,38.894331,38.890756,38.889937,38.889878,38.889795,38.888287,38.893166,38.893245]}]],[[{"lng":[-77.164208,-77.15968100000001,-77.156336,-77.15680999999999,-77.15724400000001,-77.15763200000001,-77.15817199999999,-77.162887,-77.164208],"lat":[38.899578,38.903147,38.900926,38.900259,38.896883,38.894564,38.894331,38.897712,38.899578]}]],[[{"lng":[-77.15680999999999,-77.156336,-77.15424,-77.149174,-77.148507,-77.143991,-77.145855,-77.147392,-77.148759,-77.15109699999999,-77.15184600000001,-77.15724400000001,-77.15680999999999],"lat":[38.900259,38.900926,38.900735,38.901793,38.902122,38.894724,38.894145,38.893639,38.897448,38.897534,38.897152,38.896883,38.900259]}]],[[{"lng":[-77.163995,-77.15817199999999,-77.15763200000001,-77.15724400000001,-77.15184600000001,-77.15109699999999,-77.148759,-77.147392,-77.153245,-77.158981,-77.160754,-77.16305800000001,-77.163995],"lat":[38.890756,38.894331,38.894564,38.896883,38.897152,38.897534,38.897448,38.893639,38.892098,38.88918,38.891575,38.889937,38.890756]}]],[[{"lng":[-77.15968100000001,-77.154539,-77.151977,-77.149891,-77.15017899999999,-77.14747699999999,-77.148507,-77.149174,-77.15424,-77.156336,-77.15968100000001],"lat":[38.903147,38.907173,38.909177,38.907397,38.905787,38.90222,38.902122,38.901793,38.900735,38.900926,38.903147]}]],[[{"lng":[-77.151977,-77.145809,-77.14081400000001,-77.134282,-77.13270199999999,-77.13826,-77.13899000000001,-77.14234399999999,-77.14439,-77.14747699999999,-77.15017899999999,-77.149891,-77.151977],"lat":[38.909177,38.914006,38.91077,38.90896,38.907736,38.907044,38.906706,38.904015,38.902265,38.90222,38.905787,38.907397,38.909177]}]],[[{"lng":[-77.138507,-77.140484,-77.137981,-77.136329,-77.135713,-77.13382300000001,-77.13364199999999,-77.13696299999999,-77.137658,-77.140663,-77.138507],"lat":[38.898962,38.901676,38.902971,38.902928,38.900376,38.898398,38.896322,38.896308,38.896261,38.89817,38.898962]}]],[[{"lng":[-77.14747699999999,-77.14439,-77.14234399999999,-77.139734,-77.137981,-77.140484,-77.138507,-77.140663,-77.137658,-77.138842,-77.143991,-77.148507,-77.14747699999999],"lat":[38.90222,38.902265,38.904015,38.903665,38.902971,38.901676,38.898962,38.89817,38.896261,38.896057,38.894724,38.902122,38.90222]}]],[[{"lng":[-77.14234399999999,-77.13899000000001,-77.13826,-77.13270199999999,-77.130769,-77.128716,-77.12714200000001,-77.124911,-77.12627500000001,-77.12810500000001,-77.12997900000001,-77.131379,-77.130521,-77.13364199999999,-77.13382300000001,-77.135713,-77.136329,-77.137981,-77.139734,-77.14234399999999],"lat":[38.904015,38.906706,38.907044,38.907736,38.905299,38.904183,38.903065,38.901233,38.900799,38.900986,38.900324,38.89845,38.896331,38.896322,38.898398,38.900376,38.902928,38.902971,38.903665,38.904015]}]],[[{"lng":[-77.139427,-77.134495,-77.124875,-77.121179,-77.1197966910841,-77.119759,-77.11790000000001,-77.11681626181171,-77.118505,-77.118948,-77.122654,-77.12468699999999,-77.126318,-77.12948,-77.13092,-77.136104,-77.138721,-77.139427],"lat":[38.918982,38.922853,38.930408,38.933287,38.9343702373596,38.934343,38.932411,38.9294932433392,38.928554,38.925538,38.925328,38.924104,38.921909,38.921555,38.920216,38.917236,38.918529,38.918982]}]],[[{"lng":[-77.136104,-77.13092,-77.12948,-77.126318,-77.12468699999999,-77.122654,-77.118968,-77.119049,-77.12159,-77.12481099999999,-77.12773199999999,-77.131575,-77.133242,-77.135265,-77.13642299999999,-77.136104],"lat":[38.917236,38.920216,38.921555,38.921909,38.924104,38.925328,38.917235,38.915952,38.918177,38.915828,38.914027,38.914906,38.913271,38.913231,38.915911,38.917236]}]],[[{"lng":[-77.145809,-77.139427,-77.138721,-77.136104,-77.13642299999999,-77.135265,-77.133274,-77.131135,-77.128716,-77.130769,-77.13270199999999,-77.134282,-77.14081400000001,-77.145809],"lat":[38.914006,38.918982,38.918529,38.917236,38.915911,38.913231,38.9112,38.908098,38.904183,38.905299,38.907736,38.90896,38.91077,38.914006]}]],[[{"lng":[-77.135265,-77.133242,-77.131575,-77.12773199999999,-77.12481099999999,-77.124578,-77.124185,-77.131135,-77.133274,-77.135265],"lat":[38.913231,38.913271,38.914906,38.914027,38.915828,38.914652,38.911524,38.908098,38.9112,38.913231]}]],[[{"lng":[-77.131135,-77.124185,-77.124578,-77.12481099999999,-77.12159,-77.119049,-77.11847400000001,-77.115103,-77.113423,-77.11542300000001,-77.119529,-77.120097,-77.119141,-77.11936300000001,-77.123305,-77.125055,-77.12714200000001,-77.128716,-77.131135],"lat":[38.908098,38.911524,38.914652,38.915828,38.918177,38.915952,38.914773,38.912916,38.911256,38.908507,38.905713,38.905726,38.90671,38.908176,38.90556,38.905439,38.903065,38.904183,38.908098]}]],[[{"lng":[-77.122654,-77.118948,-77.118505,-77.11681626181171,-77.11660000000001,-77.1134,-77.10736050640089,-77.110407,-77.110815,-77.113423,-77.115103,-77.11847400000001,-77.119049,-77.118968,-77.122654],"lat":[38.925328,38.925538,38.928554,38.9294932433392,38.928911,38.925211,38.9200221393022,38.917402,38.913374,38.911256,38.912916,38.914773,38.915952,38.917235,38.925328]}]],[[{"lng":[-77.113423,-77.110815,-77.110407,-77.10736050640089,-77.1063,-77.10540243607259,-77.10339999999999,-77.1016445994152,-77.103922,-77.10298400000001,-77.10269700000001,-77.105255,-77.10815599999999,-77.11017,-77.11094300000001,-77.113423],"lat":[38.911256,38.913374,38.917402,38.9200221393022,38.919111,38.9171920702241,38.912911,38.9114747631579,38.91068,38.909712,38.907348,38.903253,38.904078,38.906481,38.908406,38.911256]}]],[[{"lng":[-77.10815599999999,-77.105255,-77.10269700000001,-77.10298400000001,-77.103922,-77.1016445994152,-77.10120000000001,-77.1010155931084,-77.0937,-77.0902,-77.08283921173231,-77.085908,-77.08900800000001,-77.093219,-77.094616,-77.106458,-77.10851599999999,-77.10815599999999],"lat":[38.904078,38.903253,38.907348,38.909712,38.91068,38.9114747631579,38.911111,38.9109831445552,38.905911,38.904211,38.902094773373,38.900052,38.899926,38.898544,38.898784,38.901546,38.902227,38.904078]}]],[[{"lng":[-77.106011,-77.106458,-77.094616,-77.093219,-77.094283,-77.097679,-77.098833,-77.104077,-77.107291,-77.106011],"lat":[38.900591,38.901546,38.898784,38.898544,38.897666,38.896746,38.896011,38.895902,38.896639,38.900591]}]],[[{"lng":[-77.116506,-77.111188,-77.111858,-77.11017,-77.10815599999999,-77.10851599999999,-77.106458,-77.106011,-77.107291,-77.107766,-77.108361,-77.112238,-77.11424,-77.116506],"lat":[38.899314,38.903074,38.904672,38.906481,38.904078,38.902227,38.901546,38.900591,38.896639,38.896766,38.896953,38.898945,38.899337,38.899314]}]],[[{"lng":[-77.123035,-77.120097,-77.119529,-77.11542300000001,-77.113423,-77.11094300000001,-77.11017,-77.111858,-77.111188,-77.116506,-77.119477,-77.12235800000001,-77.123035],"lat":[38.902975,38.905726,38.905713,38.908507,38.911256,38.908406,38.906481,38.904672,38.903074,38.899314,38.898839,38.902672,38.902975]}]],[[{"lng":[-77.12810500000001,-77.12627500000001,-77.124911,-77.12714200000001,-77.125055,-77.123305,-77.11936300000001,-77.119141,-77.120097,-77.123035,-77.12235800000001,-77.119477,-77.120998,-77.123559,-77.12589699999999,-77.126192,-77.12997900000001,-77.12810500000001],"lat":[38.900986,38.900799,38.901233,38.903065,38.905439,38.90556,38.908176,38.90671,38.905726,38.902975,38.902672,38.898839,38.898422,38.89755,38.89669,38.896601,38.900324,38.900986]}]],[[{"lng":[-77.107766,-77.107291,-77.104077,-77.098833,-77.101282,-77.10223499999999,-77.10366399999999,-77.10831399999999,-77.107637,-77.10844400000001,-77.107766],"lat":[38.896766,38.896639,38.895902,38.896011,38.892229,38.891361,38.890677,38.889532,38.893064,38.896872,38.896766]}]],[[{"lng":[-77.111659,-77.112238,-77.108361,-77.107766,-77.10844400000001,-77.107637,-77.10831399999999,-77.111287,-77.112253,-77.111659],"lat":[38.897678,38.898945,38.896953,38.896766,38.896872,38.893064,38.889532,38.888804,38.897049,38.897678]}]],[[{"lng":[-77.11424,-77.112238,-77.111659,-77.112253,-77.111287,-77.114321,-77.11469200000001,-77.114014,-77.115317,-77.11424],"lat":[38.899337,38.898945,38.897678,38.897049,38.888804,38.88808,38.89355,38.897122,38.897582,38.899337]}]],[[{"lng":[-77.12021900000001,-77.11794,-77.116506,-77.11424,-77.115317,-77.114014,-77.11469200000001,-77.119023,-77.119758,-77.12021900000001],"lat":[38.893785,38.898531,38.899314,38.899337,38.897582,38.897122,38.89355,38.893467,38.893272,38.893785]}]],[[{"lng":[-77.119758,-77.119023,-77.11469200000001,-77.114321,-77.115695,-77.11765699999999,-77.118869,-77.119333,-77.119426,-77.119758],"lat":[38.893272,38.893467,38.89355,38.88808,38.887672,38.886477,38.889018,38.891357,38.892614,38.893272]}]],[[{"lng":[-77.12736,-77.124807,-77.124477,-77.124979,-77.122089,-77.121234,-77.11869,-77.120554,-77.122083,-77.124824,-77.125438,-77.12729299999999,-77.127985,-77.12736],"lat":[38.88501,38.885146,38.885576,38.887058,38.887853,38.885288,38.885362,38.882943,38.881787,38.880274,38.880012,38.882813,38.884873,38.88501]}]],[[{"lng":[-77.126429,-77.123884,-77.121595,-77.12108000000001,-77.119333,-77.118869,-77.11765699999999,-77.11869,-77.121234,-77.122089,-77.124979,-77.12527900000001,-77.126429],"lat":[38.890007,38.891712,38.890993,38.890639,38.891357,38.889018,38.886477,38.885362,38.885288,38.887853,38.887058,38.888239,38.890007]}]],[[{"lng":[-77.120998,-77.119477,-77.116506,-77.11794,-77.12021900000001,-77.120834,-77.123559,-77.120998],"lat":[38.898422,38.898839,38.899314,38.898531,38.893785,38.894206,38.89755,38.898422]}]],[[{"lng":[-77.126192,-77.12589699999999,-77.123559,-77.120834,-77.12021900000001,-77.119758,-77.119426,-77.119333,-77.12108000000001,-77.121595,-77.124071,-77.12735499999999,-77.126192],"lat":[38.896601,38.89669,38.89755,38.894206,38.893785,38.893272,38.892614,38.891357,38.890639,38.890993,38.893306,38.896265,38.896601]}]],[[{"lng":[-77.13364199999999,-77.130521,-77.131379,-77.12997900000001,-77.126192,-77.12735499999999,-77.124071,-77.126611,-77.128865,-77.130003,-77.13233,-77.133436,-77.13364199999999],"lat":[38.896322,38.896331,38.89845,38.900324,38.896601,38.896265,38.893306,38.892333,38.895838,38.895496,38.89475,38.895694,38.896322]}]],[[{"lng":[-77.13233,-77.130003,-77.128865,-77.126611,-77.124071,-77.121595,-77.123884,-77.126429,-77.12823299999999,-77.130109,-77.13233],"lat":[38.89475,38.895496,38.895838,38.892333,38.893306,38.890993,38.891712,38.890007,38.892751,38.89197,38.89475]}]],[[{"lng":[-77.137658,-77.13696299999999,-77.13364199999999,-77.133436,-77.13233,-77.130109,-77.12823299999999,-77.126429,-77.12527900000001,-77.129006,-77.13128500000001,-77.13581600000001,-77.13545499999999,-77.137483,-77.138171,-77.13558399999999,-77.13668199999999,-77.13761100000001,-77.138842,-77.137658],"lat":[38.896261,38.896308,38.896322,38.895694,38.89475,38.89197,38.892751,38.890007,38.888239,38.887467,38.888897,38.887479,38.886818,38.885876,38.887595,38.891494,38.893405,38.893109,38.896057,38.896261]}]],[[{"lng":[-77.13581600000001,-77.13128500000001,-77.129006,-77.12527900000001,-77.124979,-77.124477,-77.124807,-77.12736,-77.127985,-77.13373199999999,-77.13545499999999,-77.13581600000001],"lat":[38.887479,38.888897,38.887467,38.888239,38.887058,38.885576,38.885146,38.88501,38.884873,38.883669,38.886818,38.887479]}]],[[{"lng":[-77.13373199999999,-77.127985,-77.12729299999999,-77.125438,-77.126153,-77.12790699999999,-77.132501,-77.134573,-77.13373199999999],"lat":[38.883669,38.884873,38.882813,38.880012,38.879762,38.879391,38.879232,38.883514,38.883669]}]],[[{"lng":[-77.137249,-77.137483,-77.13545499999999,-77.13373199999999,-77.134573,-77.132501,-77.136785,-77.139132,-77.137249],"lat":[38.884849,38.885876,38.886818,38.883669,38.883514,38.879232,38.879286,38.879875,38.884849]}]],[[{"lng":[-77.145855,-77.143991,-77.138842,-77.13761100000001,-77.141256,-77.141801,-77.142782,-77.14488900000001,-77.145855],"lat":[38.894145,38.894724,38.896057,38.893109,38.891969,38.891069,38.890749,38.890323,38.894145]}]],[[{"lng":[-77.141256,-77.13761100000001,-77.13668199999999,-77.13558399999999,-77.138171,-77.137483,-77.138068,-77.138762,-77.141801,-77.141256],"lat":[38.891969,38.893109,38.893405,38.891494,38.887595,38.885876,38.885786,38.88611,38.891069,38.891969]}]],[[{"lng":[-77.14137599999999,-77.139742,-77.138068,-77.137483,-77.137249,-77.139132,-77.14459600000001,-77.14137599999999],"lat":[38.886629,38.885201,38.885786,38.885876,38.884849,38.879875,38.881706,38.886629]}]],[[{"lng":[-77.146097,-77.144161,-77.14515900000001,-77.144274,-77.14488900000001,-77.142782,-77.141801,-77.138762,-77.138068,-77.139742,-77.14137599999999,-77.14459600000001,-77.146097],"lat":[38.882205,38.886536,38.886883,38.888433,38.890323,38.890749,38.891069,38.88611,38.885786,38.885201,38.886629,38.881706,38.882205]}]],[[{"lng":[-77.153245,-77.147392,-77.145855,-77.14488900000001,-77.144274,-77.14515900000001,-77.148582,-77.149235,-77.152202,-77.153245],"lat":[38.892098,38.893639,38.894145,38.890323,38.888433,38.886883,38.887355,38.889041,38.889033,38.892098]}]],[[{"lng":[-77.15633,-77.15163800000001,-77.152202,-77.149235,-77.148582,-77.14515900000001,-77.144161,-77.146097,-77.15374,-77.156302,-77.15633],"lat":[38.887516,38.887414,38.889033,38.889041,38.887355,38.886883,38.886536,38.882205,38.884742,38.885608,38.887516]}]],[[{"lng":[-77.15536400000001,-77.15374,-77.146097,-77.145482,-77.14713,-77.14970099999999,-77.153842,-77.15536400000001],"lat":[38.883309,38.884742,38.882205,38.87722,38.873606,38.87567,38.878851,38.883309]}]],[[{"lng":[-77.165093,-77.164473,-77.161222,-77.156302,-77.15374,-77.15536400000001,-77.153842,-77.15394999999999,-77.15921299999999,-77.163517,-77.165947,-77.165093],"lat":[38.889795,38.889878,38.887496,38.885608,38.884742,38.883309,38.878851,38.878935,38.883035,38.886391,38.888287,38.889795]}]],[[{"lng":[-77.16305800000001,-77.160754,-77.158981,-77.153245,-77.152202,-77.15163800000001,-77.15633,-77.156302,-77.161222,-77.164473,-77.16305800000001],"lat":[38.889937,38.891575,38.88918,38.892098,38.889033,38.887414,38.887516,38.885608,38.887496,38.889878,38.889937]}]],[[{"lng":[-77.146793,-77.14399299999999,-77.143145,-77.13394599999999,-77.13144800000001,-77.127837,-77.126643,-77.123791,-77.128388,-77.137495,-77.137631,-77.145206,-77.146793],"lat":[38.873341,38.873115,38.873095,38.87491,38.870749,38.867777,38.867873,38.866447,38.866362,38.866093,38.866199,38.872108,38.873341]}]],[[{"lng":[-77.14399299999999,-77.141047,-77.13940100000001,-77.137558,-77.13394599999999,-77.143145,-77.14399299999999],"lat":[38.873115,38.878549,38.879573,38.878552,38.87491,38.873095,38.873115]}]],[[{"lng":[-77.14713,-77.145482,-77.146097,-77.14459600000001,-77.139132,-77.13940100000001,-77.141047,-77.14399299999999,-77.146793,-77.14713],"lat":[38.873606,38.87722,38.882205,38.881706,38.879875,38.879573,38.878549,38.873115,38.873341,38.873606]}]],[[{"lng":[-77.139132,-77.136785,-77.132501,-77.12790699999999,-77.126153,-77.125438,-77.124824,-77.122083,-77.121222,-77.120885,-77.128201,-77.13394599999999,-77.137558,-77.13940100000001,-77.139132],"lat":[38.879875,38.879286,38.879232,38.879391,38.879762,38.880012,38.880274,38.881787,38.879945,38.878256,38.876426,38.87491,38.878552,38.879573,38.879875]}]],[[{"lng":[-77.13394599999999,-77.128201,-77.126368,-77.128372,-77.12749700000001,-77.127837,-77.13144800000001,-77.13394599999999],"lat":[38.87491,38.876426,38.872017,38.871033,38.868389,38.867777,38.870749,38.87491]}]],[[{"lng":[-77.11951500000001,-77.117188,-77.115587,-77.115905,-77.11512500000001,-77.11342399999999,-77.111794,-77.11120200000001,-77.112819,-77.113058,-77.115503,-77.119685,-77.11951500000001],"lat":[38.868122,38.869741,38.873312,38.873809,38.87372,38.873759,38.873598,38.873302,38.867553,38.867491,38.866874,38.866622,38.868122]}]],[[{"lng":[-77.120885,-77.114018,-77.11132000000001,-77.112892,-77.11356499999999,-77.11342399999999,-77.11512500000001,-77.115905,-77.11655500000001,-77.118622,-77.120885],"lat":[38.878256,38.880026,38.878197,38.876849,38.876286,38.873759,38.87372,38.873809,38.874315,38.875686,38.878256]}]],[[{"lng":[-77.128372,-77.126368,-77.128201,-77.120885,-77.118622,-77.11655500000001,-77.124466,-77.12643199999999,-77.12749700000001,-77.128372],"lat":[38.871033,38.872017,38.876426,38.878256,38.875686,38.874315,38.87141,38.86936,38.868389,38.871033]}]],[[{"lng":[-77.12749700000001,-77.12643199999999,-77.124466,-77.11655500000001,-77.115905,-77.115587,-77.117188,-77.11951500000001,-77.119685,-77.123791,-77.126643,-77.127837,-77.12749700000001],"lat":[38.868389,38.86936,38.87141,38.874315,38.873809,38.873312,38.869741,38.868122,38.866622,38.866447,38.867873,38.867777,38.868389]}]],[[{"lng":[-77.122083,-77.120554,-77.11869,-77.117074,-77.11640199999999,-77.11395,-77.11376,-77.11595800000001,-77.114018,-77.120885,-77.121222,-77.122083],"lat":[38.881787,38.882943,38.885362,38.885398,38.883624,38.883755,38.882227,38.882077,38.880026,38.878256,38.879945,38.881787]}]],[[{"lng":[-77.11312599999999,-77.109714,-77.109523,-77.10816699999999,-77.108018,-77.109801,-77.10943899999999,-77.110505,-77.112711,-77.11312599999999],"lat":[38.885536,38.88562,38.885647,38.886061,38.884599,38.884413,38.882481,38.882381,38.88223,38.885536]}]],[[{"lng":[-77.11765699999999,-77.115695,-77.114321,-77.111287,-77.10831399999999,-77.10816699999999,-77.109523,-77.109714,-77.11312599999999,-77.112711,-77.11376,-77.11395,-77.11640199999999,-77.117074,-77.11869,-77.11765699999999],"lat":[38.886477,38.887672,38.88808,38.888804,38.889532,38.886061,38.885647,38.88562,38.885536,38.88223,38.882227,38.883755,38.883624,38.885398,38.885362,38.886477]}]],[[{"lng":[-77.106644,-77.104463,-77.104083,-77.106382,-77.106644],"lat":[38.881796,38.881865,38.881203,38.880004,38.881796]}]],[[{"lng":[-77.107591,-77.10761100000001,-77.107761,-77.106714,-77.106644,-77.106382,-77.106807,-77.107838,-77.107591],"lat":[38.879332,38.879884,38.882558,38.882471,38.881796,38.880004,38.877702,38.877827,38.879332]}]],[[{"lng":[-77.106714,-77.105536,-77.104147,-77.10335600000001,-77.104083,-77.104463,-77.106644,-77.106714],"lat":[38.882471,38.882579,38.883104,38.881601,38.881203,38.881865,38.881796,38.882471]}]],[[{"lng":[-77.104147,-77.10334899999999,-77.09965699999999,-77.099153,-77.099723,-77.102706,-77.10335600000001,-77.104147],"lat":[38.883104,38.883442,38.884816,38.883972,38.883424,38.881935,38.881601,38.883104]}]],[[{"lng":[-77.10816699999999,-77.104035,-77.103955,-77.10334899999999,-77.104147,-77.105536,-77.106714,-77.107761,-77.108018,-77.10816699999999],"lat":[38.886061,38.886095,38.884673,38.883442,38.883104,38.882579,38.882471,38.882558,38.884599,38.886061]}]],[[{"lng":[-77.110505,-77.10943899999999,-77.109099,-77.10906,-77.11024399999999,-77.110505],"lat":[38.882381,38.882481,38.880543,38.879865,38.879863,38.882381]}]],[[{"lng":[-77.109801,-77.108018,-77.107761,-77.10943899999999,-77.109801],"lat":[38.884413,38.884599,38.882558,38.882481,38.884413]}]],[[{"lng":[-77.10943899999999,-77.107761,-77.10761100000001,-77.10906,-77.109099,-77.10943899999999],"lat":[38.882481,38.882558,38.879884,38.879865,38.880543,38.882481]}]],[[{"lng":[-77.109302,-77.10906,-77.10761100000001,-77.107591,-77.107838,-77.10786899999999,-77.10954,-77.109302],"lat":[38.8781,38.879865,38.879884,38.879332,38.877827,38.877551,38.877355,38.8781]}]],[[{"lng":[-77.112425,-77.11024399999999,-77.10906,-77.109302,-77.10954,-77.11132000000001,-77.114018,-77.112425],"lat":[38.880025,38.879863,38.879865,38.8781,38.877355,38.878197,38.880026,38.880025]}]],[[{"lng":[-77.112711,-77.110505,-77.11024399999999,-77.112425,-77.112711],"lat":[38.88223,38.882381,38.879863,38.880025,38.88223]}]],[[{"lng":[-77.11595800000001,-77.11376,-77.112711,-77.112425,-77.114018,-77.11595800000001],"lat":[38.882077,38.882227,38.88223,38.880025,38.880026,38.882077]}]],[[{"lng":[-77.096295,-77.094283,-77.09055600000001,-77.091391,-77.091249,-77.092941,-77.094297,-77.09522699999999,-77.096295],"lat":[38.895789,38.897666,38.898114,38.89605,38.894764,38.894585,38.894808,38.895357,38.895789]}]],[[{"lng":[-77.091391,-77.09055600000001,-77.087349,-77.08524199999999,-77.088853,-77.08888899999999,-77.090811,-77.091249,-77.091391],"lat":[38.89605,38.898114,38.898215,38.897523,38.896542,38.895275,38.894825,38.894764,38.89605]}]],[[{"lng":[-77.088853,-77.08524199999999,-77.083907,-77.086501,-77.08888899999999,-77.088853],"lat":[38.896542,38.897523,38.896908,38.89587,38.895275,38.896542]}]],[[{"lng":[-77.094297,-77.092941,-77.091249,-77.090811,-77.08888899999999,-77.086501,-77.086288,-77.08851,-77.089947,-77.090965,-77.09210400000001,-77.093046,-77.094363,-77.094297],"lat":[38.894808,38.894585,38.894764,38.894825,38.895275,38.89587,38.894634,38.894105,38.89259,38.892502,38.892271,38.891895,38.893017,38.894808]}]],[[{"lng":[-77.100572,-77.09920099999999,-77.099401,-77.09748399999999,-77.093046,-77.09210400000001,-77.09093900000001,-77.09068600000001,-77.093355,-77.095004,-77.09715199999999,-77.09891500000001,-77.099153,-77.09965699999999,-77.100177,-77.100572],"lat":[38.887624,38.887326,38.889098,38.890081,38.891895,38.892271,38.890788,38.88963,38.888628,38.887432,38.885869,38.884179,38.883972,38.884816,38.885966,38.887624]}]],[[{"lng":[-77.090965,-77.089947,-77.08851,-77.086288,-77.08614,-77.08581599999999,-77.086145,-77.08734800000001,-77.08865299999999,-77.09068600000001,-77.09093900000001,-77.09210400000001,-77.090965],"lat":[38.892502,38.89259,38.894105,38.894634,38.893394,38.89123,38.891096,38.890877,38.890415,38.88963,38.890788,38.892271,38.892502]}]],[[{"lng":[-77.10831399999999,-77.10366399999999,-77.10223499999999,-77.101282,-77.098833,-77.097679,-77.094283,-77.096295,-77.09922,-77.100819,-77.097831,-77.09748399999999,-77.099401,-77.09920099999999,-77.100572,-77.100177,-77.104035,-77.10816699999999,-77.10831399999999],"lat":[38.889532,38.890677,38.891361,38.892229,38.896011,38.896746,38.897666,38.895789,38.894688,38.891346,38.890477,38.890081,38.889098,38.887326,38.887624,38.885966,38.886095,38.886061,38.889532]}]],[[{"lng":[-77.09922,-77.096295,-77.09522699999999,-77.094297,-77.094363,-77.093046,-77.09748399999999,-77.097831,-77.100819,-77.09922],"lat":[38.894688,38.895789,38.895357,38.894808,38.893017,38.891895,38.890081,38.890477,38.891346,38.894688]}]],[[{"lng":[-77.080572,-77.075442,-77.07349884847289,-77.0706677711042,-77.070814,-77.070784,-77.07359599999999,-77.076412,-77.07874,-77.080287,-77.080572],"lat":[38.897378,38.898985,38.9010481471918,38.9007674023903,38.900335,38.898229,38.898432,38.898374,38.897702,38.89693,38.897378]}]],[[{"lng":[-77.093219,-77.08900800000001,-77.085908,-77.08283921173231,-77.0822,-77.07929739037991,-77.0783563148089,-77.07349884847289,-77.075442,-77.080572,-77.080287,-77.082059,-77.08457199999999,-77.086501,-77.083907,-77.08524199999999,-77.087349,-77.09055600000001,-77.094283,-77.093219],"lat":[38.898544,38.899926,38.900052,38.902094773373,38.901911,38.9016231616772,38.9015298395811,38.9010481471918,38.898985,38.897378,38.89693,38.896353,38.89634,38.89587,38.896908,38.897523,38.898215,38.898114,38.897666,38.898544]}]],[[{"lng":[-77.086501,-77.08457199999999,-77.082059,-77.08187,-77.08487100000001,-77.08614,-77.086288,-77.086501],"lat":[38.89587,38.89634,38.896353,38.895172,38.893726,38.893394,38.894634,38.89587]}]],[[{"lng":[-77.08614,-77.08487100000001,-77.08187,-77.081121,-77.08027300000001,-77.08398800000001,-77.08581599999999,-77.08614],"lat":[38.893394,38.893726,38.895172,38.894611,38.893243,38.891737,38.89123,38.893394]}]],[[{"lng":[-77.082059,-77.080287,-77.07874,-77.078433,-77.078361,-77.07816699999999,-77.08027300000001,-77.081121,-77.08187,-77.082059],"lat":[38.896353,38.89693,38.897702,38.896041,38.895321,38.894089,38.893243,38.894611,38.895172,38.896353]}]],[[{"lng":[-77.078361,-77.073942,-77.073857,-77.076731,-77.07816699999999,-77.078361],"lat":[38.895321,38.895605,38.894802,38.894388,38.894089,38.895321]}]],[[{"lng":[-77.074022,-77.07338,-77.07359599999999,-77.070784,-77.06913,-77.068392,-77.067718,-77.068077,-77.068305,-77.070802,-77.073132,-77.073857,-77.073942,-77.074022],"lat":[38.896371,38.896628,38.898432,38.898229,38.897683,38.897018,38.893237,38.891978,38.893849,38.895091,38.894819,38.894802,38.895605,38.896371]}]],[[{"lng":[-77.07874,-77.076412,-77.07359599999999,-77.07338,-77.074022,-77.078433,-77.07874],"lat":[38.897702,38.898374,38.898432,38.896628,38.896371,38.896041,38.897702]}]],[[{"lng":[-77.078433,-77.074022,-77.073942,-77.078361,-77.078433],"lat":[38.896041,38.896371,38.895605,38.895321,38.896041]}]],[[{"lng":[-77.08351500000001,-77.080618,-77.08027800000001,-77.07892699999999,-77.078337,-77.077924,-77.080033,-77.081075,-77.083068,-77.08323799999999,-77.08351500000001],"lat":[38.888227,38.888955,38.890038,38.890119,38.889784,38.88961,38.887675,38.887112,38.886479,38.886686,38.888227]}]],[[{"lng":[-77.08398800000001,-77.08027300000001,-77.079261,-77.07892699999999,-77.08027800000001,-77.08127399999999,-77.08384599999999,-77.08398800000001],"lat":[38.891737,38.893243,38.89186,38.890119,38.890038,38.890764,38.890826,38.891737]}]],[[{"lng":[-77.08384599999999,-77.08127399999999,-77.08027800000001,-77.080618,-77.08351500000001,-77.08384599999999],"lat":[38.890826,38.890764,38.890038,38.888955,38.888227,38.890826]}]],[[{"lng":[-77.080033,-77.077924,-77.076654,-77.07512699999999,-77.074527,-77.076337,-77.081075,-77.080033],"lat":[38.887675,38.88961,38.890552,38.891158,38.889859,38.887565,38.887112,38.887675]}]],[[{"lng":[-77.074527,-77.07512699999999,-77.073168,-77.071482,-77.071445,-77.071752,-77.076337,-77.074527],"lat":[38.889859,38.891158,38.89185,38.89195,38.888654,38.887636,38.887565,38.889859]}]],[[{"lng":[-77.070802,-77.068305,-77.068077,-77.06859799999999,-77.071215,-77.070802],"lat":[38.895091,38.893849,38.891978,38.892507,38.893343,38.895091]}]],[[{"lng":[-77.08027300000001,-77.07816699999999,-77.076731,-77.076504,-77.076274,-77.078337,-77.07892699999999,-77.079261,-77.08027300000001],"lat":[38.893243,38.894089,38.894388,38.892761,38.891071,38.889784,38.890119,38.89186,38.893243]}]],[[{"lng":[-77.076731,-77.073857,-77.073587,-77.076504,-77.076731],"lat":[38.894388,38.894802,38.893007,38.892761,38.894388]}]],[[{"lng":[-77.078337,-77.076274,-77.076504,-77.073587,-77.073857,-77.073132,-77.070802,-77.071215,-77.071482,-77.073168,-77.07512699999999,-77.076654,-77.077924,-77.078337],"lat":[38.889784,38.891071,38.892761,38.893007,38.894802,38.894819,38.895091,38.893343,38.89195,38.89185,38.891158,38.890552,38.88961,38.889784]}]],[[{"lng":[-77.094827,-77.09030799999999,-77.08986899999999,-77.089827,-77.092907,-77.094775,-77.094827],"lat":[38.886158,38.886444,38.886289,38.884507,38.884437,38.885698,38.886158]}]],[[{"lng":[-77.095004,-77.093355,-77.09068600000001,-77.09030799999999,-77.094827,-77.095004],"lat":[38.887432,38.888628,38.88963,38.886444,38.886158,38.887432]}]],[[{"lng":[-77.094775,-77.092907,-77.091605,-77.09448,-77.094775],"lat":[38.885698,38.884437,38.880873,38.88101,38.885698]}]],[[{"lng":[-77.09448,-77.091605,-77.092907,-77.089827,-77.08773600000001,-77.087299,-77.090464,-77.09441,-77.09448],"lat":[38.88101,38.880873,38.884437,38.884507,38.884551,38.880666,38.880812,38.878924,38.88101]}]],[[{"lng":[-77.08773600000001,-77.08564800000001,-77.084574,-77.084701,-77.084138,-77.085836,-77.087299,-77.08773600000001],"lat":[38.884551,38.884613,38.884749,38.88384,38.881237,38.880656,38.880666,38.884551]}]],[[{"lng":[-77.090464,-77.087299,-77.085836,-77.084138,-77.083279,-77.08366599999999,-77.08376199999999,-77.089512,-77.090464],"lat":[38.880812,38.880666,38.880656,38.881237,38.877096,38.875368,38.87526,38.87948,38.880812]}]],[[{"lng":[-77.09441,-77.090464,-77.089512,-77.08376199999999,-77.08445399999999,-77.08704,-77.08938499999999,-77.091943,-77.09441],"lat":[38.878924,38.880812,38.87948,38.87526,38.87476,38.874001,38.873429,38.872785,38.878924]}]],[[{"lng":[-77.088345,-77.087688,-77.08630100000001,-77.08385,-77.08323799999999,-77.083068,-77.083702,-77.084574,-77.08564800000001,-77.08773600000001,-77.088054,-77.088345],"lat":[38.8879,38.887583,38.886935,38.886355,38.886686,38.886479,38.886073,38.884749,38.884613,38.884551,38.88562,38.8879]}]],[[{"lng":[-77.09068600000001,-77.08865299999999,-77.088345,-77.088054,-77.08773600000001,-77.089827,-77.08986899999999,-77.09030799999999,-77.09068600000001],"lat":[38.88963,38.890415,38.8879,38.88562,38.884551,38.884507,38.886289,38.886444,38.88963]}]],[[{"lng":[-77.08865299999999,-77.08734800000001,-77.086145,-77.08581599999999,-77.08398800000001,-77.08384599999999,-77.08351500000001,-77.085123,-77.085272,-77.08739799999999,-77.087688,-77.088345,-77.08865299999999],"lat":[38.890415,38.890877,38.891096,38.89123,38.891737,38.890826,38.888227,38.888223,38.889508,38.889158,38.887583,38.8879,38.890415]}]],[[{"lng":[-77.08739799999999,-77.085272,-77.085123,-77.085703,-77.08630100000001,-77.087688,-77.08739799999999],"lat":[38.889158,38.889508,38.888223,38.888369,38.886935,38.887583,38.889158]}]],[[{"lng":[-77.085703,-77.085123,-77.08351500000001,-77.08323799999999,-77.08385,-77.08630100000001,-77.085703],"lat":[38.888369,38.888223,38.888227,38.886686,38.886355,38.886935,38.888369]}]],[[{"lng":[-77.09891500000001,-77.09715199999999,-77.095004,-77.094827,-77.094775,-77.09448,-77.097324,-77.096864,-77.09786800000001,-77.09876300000001,-77.09891500000001],"lat":[38.884179,38.885869,38.887432,38.886158,38.885698,38.88101,38.879793,38.878797,38.878526,38.880561,38.884179]}]],[[{"lng":[-77.103752,-77.09786800000001,-77.096864,-77.097324,-77.09448,-77.09441,-77.091943,-77.10062499999999,-77.100722,-77.101032,-77.100398,-77.103752],"lat":[38.876966,38.878526,38.878797,38.879793,38.88101,38.878924,38.872785,38.870614,38.870588,38.870828,38.871443,38.876966]}]],[[{"lng":[-77.10392,-77.102317,-77.102706,-77.099723,-77.099153,-77.09891500000001,-77.09876300000001,-77.09786800000001,-77.103752,-77.10392],"lat":[38.87902,38.879075,38.881935,38.883424,38.883972,38.884179,38.880561,38.878526,38.876966,38.87902]}]],[[{"lng":[-77.11356499999999,-77.112892,-77.10979399999999,-77.10851,-77.109559,-77.11120200000001,-77.111794,-77.11342399999999,-77.11356499999999],"lat":[38.876286,38.876849,38.874646,38.873912,38.872479,38.873302,38.873598,38.873759,38.876286]}]],[[{"lng":[-77.11132000000001,-77.10954,-77.10786899999999,-77.108238,-77.10750299999999,-77.10851,-77.10979399999999,-77.112892,-77.11132000000001],"lat":[38.878197,38.877355,38.877551,38.876176,38.875481,38.873912,38.874646,38.876849,38.878197]}]],[[{"lng":[-77.10786899999999,-77.107838,-77.106807,-77.106382,-77.104083,-77.10335600000001,-77.102706,-77.102317,-77.10392,-77.103752,-77.10514000000001,-77.108238,-77.10786899999999],"lat":[38.877551,38.877827,38.877702,38.880004,38.881203,38.881601,38.881935,38.879075,38.87902,38.876966,38.876627,38.876176,38.877551]}]],[[{"lng":[-77.10851,-77.10750299999999,-77.101032,-77.100722,-77.10684000000001,-77.107665,-77.109559,-77.10851],"lat":[38.873912,38.875481,38.870828,38.870588,38.869038,38.871185,38.872479,38.873912]}]],[[{"lng":[-77.108238,-77.10514000000001,-77.103752,-77.100398,-77.101032,-77.10750299999999,-77.108238],"lat":[38.876176,38.876627,38.876966,38.871443,38.870828,38.875481,38.876176]}]],[[{"lng":[-77.11120200000001,-77.109559,-77.107665,-77.10684000000001,-77.112819,-77.11120200000001],"lat":[38.873302,38.872479,38.871185,38.869038,38.867553,38.873302]}]],[[{"lng":[-77.131849,-77.12222,-77.12223899999999,-77.11914,-77.116613,-77.11780400000001,-77.119895,-77.122383,-77.125429,-77.127183,-77.131849],"lat":[38.861727,38.862364,38.86313,38.86428,38.862193,38.862062,38.861046,38.859666,38.85932,38.858109,38.861727]}]],[[{"lng":[-77.137495,-77.128388,-77.123791,-77.119685,-77.115503,-77.113058,-77.113226,-77.11550699999999,-77.11602499999999,-77.116613,-77.11914,-77.12223899999999,-77.12222,-77.131849,-77.137495],"lat":[38.866093,38.866362,38.866447,38.866622,38.866874,38.867491,38.866968,38.862955,38.862203,38.862193,38.86428,38.86313,38.862364,38.861727,38.866093]}]],[[{"lng":[-77.127183,-77.125429,-77.122383,-77.119895,-77.12031899999999,-77.119981,-77.118956,-77.12262800000001,-77.123609,-77.125868,-77.127183],"lat":[38.858109,38.85932,38.859666,38.861046,38.858448,38.857878,38.856579,38.856086,38.855305,38.857042,38.858109]}]],[[{"lng":[-77.12262800000001,-77.118956,-77.117921,-77.117746,-77.12048,-77.121151,-77.123609,-77.12262800000001],"lat":[38.856086,38.856579,38.854366,38.854101,38.853393,38.853325,38.855305,38.856086]}]],[[{"lng":[-77.12031899999999,-77.119895,-77.11780400000001,-77.116613,-77.11602499999999,-77.114108,-77.11068,-77.109588,-77.10981200000001,-77.11053800000001,-77.112196,-77.11276100000001,-77.113873,-77.11509100000001,-77.117755,-77.119981,-77.12031899999999],"lat":[38.858448,38.861046,38.862062,38.862193,38.862203,38.861835,38.857178,38.856422,38.856374,38.856263,38.855926,38.856682,38.858754,38.859736,38.859648,38.857878,38.858448]}]],[[{"lng":[-77.119981,-77.117755,-77.11509100000001,-77.113873,-77.116383,-77.118956,-77.119981],"lat":[38.857878,38.859648,38.859736,38.858754,38.857064,38.856579,38.857878]}]],[[{"lng":[-77.118956,-77.116383,-77.113873,-77.11276100000001,-77.112196,-77.11393099999999,-77.11523800000001,-77.117226,-77.117746,-77.117921,-77.118956],"lat":[38.856579,38.857064,38.858754,38.856682,38.855926,38.855133,38.854757,38.85418,38.854101,38.854366,38.856579]}]],[[{"lng":[-77.11550699999999,-77.113226,-77.113058,-77.112819,-77.10684000000001,-77.105463,-77.106207,-77.10901699999999,-77.113647,-77.11550699999999],"lat":[38.862955,38.866968,38.867491,38.867553,38.869038,38.865004,38.863384,38.862542,38.864461,38.862955]}]],[[{"lng":[-77.10684000000001,-77.100722,-77.10062499999999,-77.099068,-77.097967,-77.094554,-77.09992099999999,-77.10104200000001,-77.10254500000001,-77.104112,-77.106207,-77.105463,-77.10684000000001],"lat":[38.869038,38.870588,38.870614,38.869195,38.86846,38.866455,38.864654,38.864847,38.865625,38.863851,38.863384,38.865004,38.869038]}]],[[{"lng":[-77.10901699999999,-77.106207,-77.104112,-77.10185300000001,-77.101327,-77.10648399999999,-77.10901699999999],"lat":[38.862542,38.863384,38.863851,38.85935,38.858774,38.857286,38.862542]}]],[[{"lng":[-77.10254500000001,-77.10104200000001,-77.09992099999999,-77.094554,-77.09239100000001,-77.091961,-77.09871699999999,-77.101327,-77.10185300000001,-77.104112,-77.10254500000001],"lat":[38.865625,38.864847,38.864654,38.866455,38.864767,38.861321,38.859526,38.858774,38.85935,38.863851,38.865625]}]],[[{"lng":[-77.11550699999999,-77.113647,-77.10901699999999,-77.10648399999999,-77.10917999999999,-77.109588,-77.11068,-77.114108,-77.11602499999999,-77.11550699999999],"lat":[38.862955,38.864461,38.862542,38.857286,38.85651,38.856422,38.857178,38.861835,38.862203,38.862955]}]],[[{"lng":[-77.08704,-77.08445399999999,-77.08376199999999,-77.08366599999999,-77.083279,-77.08247,-77.08237200000001,-77.08023900000001,-77.07817799999999,-77.081276,-77.083589,-77.083563,-77.082562,-77.085033,-77.08704],"lat":[38.874001,38.87476,38.87526,38.875368,38.877096,38.874874,38.874273,38.871198,38.869055,38.868862,38.868722,38.872017,38.873566,38.874326,38.874001]}]],[[{"lng":[-77.08938499999999,-77.08704,-77.085033,-77.082562,-77.083563,-77.083589,-77.08593999999999,-77.088131,-77.088294,-77.088345,-77.08938499999999],"lat":[38.873429,38.874001,38.874326,38.873566,38.872017,38.868722,38.86863,38.868112,38.869051,38.87082,38.873429]}]],[[{"lng":[-77.097967,-77.088345,-77.088294,-77.088131,-77.094554,-77.097967],"lat":[38.86846,38.87082,38.869051,38.868112,38.866455,38.86846]}]],[[{"lng":[-77.10062499999999,-77.091943,-77.08938499999999,-77.088345,-77.097967,-77.099068,-77.10062499999999],"lat":[38.870614,38.872785,38.873429,38.87082,38.86846,38.869195,38.870614]}]],[[{"lng":[-77.080855,-77.07969300000001,-77.076292,-77.07556700000001,-77.07057,-77.065394,-77.06371900000001,-77.06292000000001,-77.067162,-77.067866,-77.06984300000001,-77.073573,-77.07588800000001,-77.07756999999999,-77.08033,-77.080855],"lat":[38.866706,38.865965,38.867621,38.867142,38.868899,38.870192,38.86896,38.867127,38.865708,38.865206,38.865135,38.866021,38.865428,38.864989,38.864274,38.866706]}]],[[{"lng":[-77.088131,-77.08593999999999,-77.083589,-77.081276,-77.080855,-77.08033,-77.081846,-77.083292,-77.084101,-77.08642399999999,-77.08702099999999,-77.088131],"lat":[38.868112,38.86863,38.868722,38.868862,38.866706,38.864274,38.863878,38.863512,38.863305,38.862708,38.862563,38.868112]}]],[[{"lng":[-77.094554,-77.088131,-77.08702099999999,-77.091961,-77.09239100000001,-77.094554],"lat":[38.866455,38.868112,38.862563,38.861321,38.864767,38.866455]}]],[[{"lng":[-77.09871699999999,-77.091961,-77.09152899999999,-77.08925600000001,-77.09658,-77.098647,-77.09871699999999],"lat":[38.859526,38.861321,38.859409,38.856219,38.854263,38.858884,38.859526]}]],[[{"lng":[-77.09658,-77.08925600000001,-77.08851900000001,-77.089338,-77.090695,-77.09471000000001,-77.09640899999999,-77.095618,-77.09658],"lat":[38.854263,38.856219,38.855246,38.853414,38.85269,38.847583,38.850865,38.852086,38.854263]}]],[[{"lng":[-77.109588,-77.10917999999999,-77.10648399999999,-77.101327,-77.100348,-77.102647,-77.103004,-77.10498699999999,-77.106138,-77.109337,-77.10981200000001,-77.109588],"lat":[38.856422,38.85651,38.857286,38.858774,38.855854,38.852368,38.852121,38.854066,38.854898,38.856029,38.856374,38.856422]}]],[[{"lng":[-77.102647,-77.100348,-77.101327,-77.09871699999999,-77.098647,-77.09658,-77.101322,-77.102647],"lat":[38.852368,38.855854,38.858774,38.859526,38.858884,38.854263,38.852967,38.852368]}]],[[{"lng":[-77.10011,-77.098286,-77.095618,-77.09640899999999,-77.09471000000001,-77.09523,-77.09688800000001,-77.10137,-77.10011],"lat":[38.850315,38.851715,38.852086,38.850865,38.847583,38.846901,38.847782,38.850761,38.850315]}]],[[{"lng":[-77.102647,-77.101322,-77.09658,-77.095618,-77.098286,-77.10011,-77.10137,-77.103004,-77.102647],"lat":[38.852368,38.852967,38.854263,38.852086,38.851715,38.850315,38.850761,38.852121,38.852368]}]],[[{"lng":[-77.10876399999999,-77.10497100000001,-77.103004,-77.10137,-77.09688800000001,-77.09523,-77.09580099999999,-77.105143,-77.10671600000001,-77.106932,-77.109239,-77.10876399999999],"lat":[38.845561,38.850664,38.852121,38.850761,38.847782,38.846901,38.846289,38.842144,38.841934,38.84244,38.842819,38.845561]}]],[[{"lng":[-77.11053800000001,-77.10981200000001,-77.109337,-77.106138,-77.106848,-77.11022199999999,-77.11053800000001],"lat":[38.856263,38.856374,38.856029,38.854898,38.853743,38.855855,38.856263]}]],[[{"lng":[-77.106138,-77.10498699999999,-77.103004,-77.10497100000001,-77.105255,-77.105671,-77.106848,-77.106138],"lat":[38.854898,38.854066,38.852121,38.850664,38.851298,38.85236,38.853743,38.854898]}]],[[{"lng":[-77.112635,-77.108644,-77.105671,-77.105255,-77.10497100000001,-77.10876399999999,-77.109239,-77.110671,-77.110799,-77.11018300000001,-77.113365,-77.112635],"lat":[38.848595,38.852171,38.85236,38.851298,38.850664,38.845561,38.842819,38.84342,38.843446,38.844795,38.847382,38.848595]}]],[[{"lng":[-77.11523800000001,-77.11393099999999,-77.112196,-77.110229,-77.110922,-77.11456099999999,-77.115072,-77.11523800000001],"lat":[38.854757,38.855133,38.855926,38.853951,38.852407,38.851547,38.853031,38.854757]}]],[[{"lng":[-77.11456099999999,-77.110922,-77.110229,-77.112196,-77.11053800000001,-77.11022199999999,-77.106848,-77.105671,-77.108644,-77.112635,-77.11350899999999,-77.11456099999999],"lat":[38.851547,38.852407,38.853951,38.855926,38.856263,38.855855,38.853743,38.85236,38.852171,38.848595,38.849311,38.851547]}]],[[{"lng":[-77.12048,-77.117746,-77.117226,-77.117138,-77.11758,-77.118876,-77.121151,-77.12048],"lat":[38.853393,38.854101,38.85418,38.852871,38.850495,38.851563,38.853325,38.853393]}]],[[{"lng":[-77.117138,-77.117226,-77.11523800000001,-77.115072,-77.11456099999999,-77.11350899999999,-77.112635,-77.113365,-77.11758,-77.117138],"lat":[38.852871,38.85418,38.854757,38.853031,38.851547,38.849311,38.848595,38.847382,38.850495,38.852871]}]],[[{"lng":[-77.10198800000001,-77.099097,-77.098277,-77.09961199999999,-77.100064,-77.100402,-77.10356899999999,-77.10198800000001],"lat":[38.84182,38.841022,38.839404,38.837632,38.837176,38.83717,38.839881,38.84182]}]],[[{"lng":[-77.10671600000001,-77.105143,-77.09580099999999,-77.09523,-77.093092,-77.08956999999999,-77.08570400000001,-77.085696,-77.0857,-77.087294,-77.08865400000001,-77.08951999999999,-77.09183,-77.095872,-77.099097,-77.10198800000001,-77.10356899999999,-77.10502200000001,-77.105963,-77.10701899999999,-77.10671600000001],"lat":[38.841934,38.842144,38.846289,38.846901,38.845904,38.844745,38.843965,38.843304,38.84296,38.842031,38.841907,38.842082,38.843657,38.845014,38.841022,38.84182,38.839881,38.84081,38.840082,38.841366,38.841934]}]],[[{"lng":[-77.100064,-77.09961199999999,-77.098277,-77.096251,-77.095721,-77.09466999999999,-77.097662,-77.09783,-77.100722,-77.100064],"lat":[38.837176,38.837632,38.839404,38.837908,38.837304,38.835597,38.834775,38.834874,38.836343,38.837176]}]],[[{"lng":[-77.099097,-77.095872,-77.09183,-77.09282899999999,-77.09360700000001,-77.09421399999999,-77.095721,-77.096251,-77.098277,-77.099097],"lat":[38.841022,38.845014,38.843657,38.840118,38.839733,38.83776,38.837304,38.837908,38.839404,38.841022]}]],[[{"lng":[-77.08865400000001,-77.087294,-77.0857,-77.085436,-77.08744799999999,-77.087889,-77.08880000000001,-77.08865400000001],"lat":[38.841907,38.842031,38.84296,38.841856,38.839052,38.83901,38.840076,38.841907]}]],[[{"lng":[-77.09282899999999,-77.09183,-77.08951999999999,-77.08865400000001,-77.08880000000001,-77.087889,-77.08872,-77.08933,-77.09360700000001,-77.09282899999999],"lat":[38.840118,38.843657,38.842082,38.841907,38.840076,38.83901,38.838514,38.839286,38.839733,38.840118]}]],[[{"lng":[-77.095721,-77.09421399999999,-77.09360700000001,-77.08933,-77.08872,-77.087889,-77.08744799999999,-77.085436,-77.08515800000001,-77.087678,-77.09466999999999,-77.095721],"lat":[38.837304,38.83776,38.839733,38.839286,38.838514,38.83901,38.839052,38.841856,38.840425,38.838489,38.835597,38.837304]}]],[[{"lng":[-77.09466999999999,-77.093577,-77.088573,-77.08939700000001,-77.090296,-77.09272799999999,-77.097662,-77.09466999999999],"lat":[38.835597,38.834507,38.833806,38.829745,38.829202,38.831188,38.834775,38.835597]}]],[[{"lng":[-77.09466999999999,-77.087678,-77.08515800000001,-77.08498299999999,-77.084621,-77.084884,-77.08539399999999,-77.086281,-77.088573,-77.093577,-77.09466999999999],"lat":[38.835597,38.838489,38.840425,38.839519,38.838532,38.836211,38.834792,38.834899,38.833806,38.834507,38.835597]}]],[[{"lng":[-77.08939700000001,-77.088573,-77.086281,-77.08539399999999,-77.085407,-77.085471,-77.087805,-77.090296,-77.08939700000001],"lat":[38.829745,38.833806,38.834899,38.834792,38.833862,38.830263,38.827357,38.829202,38.829745]}]],[[{"lng":[-77.089338,-77.08851900000001,-77.084338,-77.083995,-77.081243,-77.075536,-77.072632,-77.07056799999999,-77.06997699999999,-77.074316,-77.07854399999999,-77.079413,-77.08153,-77.085517,-77.08480400000001,-77.088239,-77.088701,-77.090695,-77.089338],"lat":[38.853414,38.855246,38.856407,38.855112,38.85579,38.859074,38.859343,38.859662,38.859535,38.853134,38.847697,38.846667,38.849146,38.851687,38.850168,38.848901,38.847869,38.85269,38.853414]}]],[[{"lng":[-77.08755499999999,-77.088701,-77.088239,-77.08480400000001,-77.085517,-77.08153,-77.079413,-77.082245,-77.08570400000001,-77.08956999999999,-77.08755499999999],"lat":[38.846236,38.847869,38.848901,38.850168,38.851687,38.849146,38.846667,38.843433,38.843965,38.844745,38.846236]}]],[[{"lng":[-77.09471000000001,-77.090695,-77.088701,-77.08755499999999,-77.08956999999999,-77.093092,-77.09523,-77.09471000000001],"lat":[38.847583,38.85269,38.847869,38.846236,38.844745,38.845904,38.846901,38.847583]}]],[[{"lng":[-77.081846,-77.08033,-77.07756999999999,-77.077197,-77.081406,-77.081846],"lat":[38.863878,38.864274,38.864989,38.86311,38.862407,38.863878]}]],[[{"lng":[-77.083292,-77.081846,-77.081406,-77.077197,-77.077298,-77.076894,-77.08004699999999,-77.081653,-77.08264,-77.084101,-77.083292],"lat":[38.863512,38.863878,38.862407,38.86311,38.86253,38.86038,38.860015,38.859091,38.85897,38.863305,38.863512]}]],[[{"lng":[-77.08642399999999,-77.084101,-77.08264,-77.081653,-77.08004699999999,-77.076894,-77.074606,-77.074083,-77.072632,-77.075536,-77.081243,-77.083995,-77.084338,-77.08642399999999],"lat":[38.862708,38.863305,38.85897,38.859091,38.860015,38.86038,38.860415,38.859549,38.859343,38.859074,38.85579,38.855112,38.856407,38.862708]}]],[[{"lng":[-77.091961,-77.08702099999999,-77.08642399999999,-77.084338,-77.08851900000001,-77.08925600000001,-77.09152899999999,-77.091961],"lat":[38.861321,38.862563,38.862708,38.856407,38.855246,38.856219,38.859409,38.861321]}]],[[{"lng":[-77.07588800000001,-77.073573,-77.06984300000001,-77.067866,-77.06903,-77.069328,-77.069391,-77.06997699999999,-77.07056799999999,-77.072632,-77.074083,-77.074606,-77.074422,-77.07588800000001],"lat":[38.865428,38.866021,38.865135,38.865206,38.863457,38.86169,38.861242,38.859535,38.859662,38.859343,38.859549,38.860415,38.860384,38.865428]}]],[[{"lng":[-77.07756999999999,-77.07588800000001,-77.074422,-77.074606,-77.076894,-77.077298,-77.077197,-77.07756999999999],"lat":[38.864989,38.865428,38.860384,38.860415,38.86038,38.86253,38.86311,38.864989]}]],[[{"lng":[-77.084574,-77.083702,-77.083068,-77.081075,-77.076337,-77.071752,-77.07370400000001,-77.075743,-77.076543,-77.07907299999999,-77.078408,-77.074878,-77.07370400000001,-77.07057,-77.07556700000001,-77.076292,-77.07817799999999,-77.08023900000001,-77.08237200000001,-77.08247,-77.083279,-77.084138,-77.084701,-77.084574],"lat":[38.884749,38.886073,38.886479,38.887112,38.887565,38.887636,38.886424,38.884008,38.884791,38.88148,38.876105,38.8698,38.870962,38.868899,38.867142,38.867621,38.869055,38.871198,38.874273,38.874874,38.877096,38.881237,38.88384,38.884749]}]],[[{"lng":[-77.081276,-77.07817799999999,-77.076292,-77.07969300000001,-77.080855,-77.081276],"lat":[38.868862,38.869055,38.867621,38.865965,38.866706,38.868862]}]],[[{"lng":[-77.053546,-77.053758,-77.053106,-77.05309099999999,-77.051917,-77.050608,-77.04974199999999,-77.05052000000001,-77.048948,-77.04947300000001,-77.050803,-77.05240000000001,-77.052953,-77.05538799999999,-77.053546],"lat":[38.846418,38.847947,38.847991,38.848098,38.848264,38.850035,38.849767,38.847333,38.841256,38.841341,38.841465,38.840445,38.840355,38.841064,38.846418]}]],[[{"lng":[-77.05159399999999,-77.051563,-77.048523,-77.045672,-77.04348,-77.041838,-77.04628099999999,-77.047494,-77.048316,-77.047681,-77.048154,-77.04974199999999,-77.050608,-77.049543,-77.049463,-77.049305,-77.049396,-77.04885299999999,-77.051669,-77.05159399999999],"lat":[38.865208,38.86583,38.867123,38.870617,38.871883,38.870903,38.865631,38.863577,38.85859,38.855282,38.85224,38.849767,38.850035,38.853293,38.853657,38.856109,38.860741,38.862448,38.862917,38.865208]}]],[[{"lng":[-77.05216799999999,-77.051964,-77.05174599999999,-77.051669,-77.04885299999999,-77.049396,-77.049305,-77.051934,-77.052378,-77.05216799999999],"lat":[38.857531,38.85995,38.862252,38.862917,38.862448,38.860741,38.856109,38.856097,38.855898,38.857531]}]],[[{"lng":[-77.052378,-77.051934,-77.049305,-77.049463,-77.049543,-77.05260800000001,-77.052378],"lat":[38.855898,38.856097,38.856109,38.853657,38.853293,38.853403,38.855898]}]],[[{"lng":[-77.05260800000001,-77.049543,-77.050608,-77.051917,-77.05309099999999,-77.05260800000001],"lat":[38.853403,38.853293,38.850035,38.848264,38.848098,38.853403]}]],[[{"lng":[-77.06903,-77.067866,-77.067162,-77.06292000000001,-77.062748,-77.06495099999999,-77.06541300000001,-77.066337,-77.06695000000001,-77.06708,-77.06724800000001,-77.068265,-77.069328,-77.06903],"lat":[38.863457,38.865206,38.865708,38.867127,38.865898,38.865583,38.863108,38.861633,38.861236,38.860886,38.860411,38.861029,38.86169,38.863457]}]],[[{"lng":[-77.06495099999999,-77.062748,-77.063104,-77.06369599999999,-77.06541300000001,-77.06495099999999],"lat":[38.865583,38.865898,38.86511,38.862916,38.863108,38.865583]}]],[[{"lng":[-77.06695000000001,-77.066337,-77.06541300000001,-77.06369599999999,-77.063,-77.063327,-77.063323,-77.065198,-77.06676299999999,-77.06708,-77.06695000000001],"lat":[38.861236,38.861633,38.863108,38.862916,38.86131,38.86094,38.858483,38.858401,38.858341,38.860886,38.861236]}]],[[{"lng":[-77.05611399999999,-77.054974,-77.05350900000001,-77.053196,-77.054078,-77.055736,-77.05611399999999],"lat":[38.859693,38.859806,38.859879,38.858359,38.857306,38.857311,38.859693]}]],[[{"lng":[-77.054249,-77.051669,-77.05174599999999,-77.05270899999999,-77.053794,-77.054249],"lat":[38.863021,38.862917,38.862252,38.862391,38.861033,38.863021]}]],[[{"lng":[-77.054334,-77.05213500000001,-77.05159399999999,-77.051669,-77.054249,-77.05435,-77.054334],"lat":[38.864849,38.864688,38.865208,38.862917,38.863021,38.863448,38.864849]}]],[[{"lng":[-77.053196,-77.05350900000001,-77.051964,-77.05216799999999,-77.054078,-77.053196],"lat":[38.858359,38.859879,38.85995,38.857531,38.857306,38.858359]}]],[[{"lng":[-77.053794,-77.05270899999999,-77.05174599999999,-77.051964,-77.05350900000001,-77.053794],"lat":[38.861033,38.862391,38.862252,38.85995,38.859879,38.861033]}]],[[{"lng":[-77.056966,-77.056645,-77.054334,-77.05435,-77.054249,-77.053794,-77.05350900000001,-77.054974,-77.05543,-77.05656399999999,-77.056782,-77.056966],"lat":[38.863899,38.865145,38.864849,38.863448,38.863021,38.861033,38.859879,38.859806,38.861908,38.86176,38.862721,38.863899]}]],[[{"lng":[-77.05656399999999,-77.05543,-77.054974,-77.05611399999999,-77.05656399999999],"lat":[38.86176,38.861908,38.859806,38.859693,38.86176]}]],[[{"lng":[-77.06257100000001,-77.061947,-77.060855,-77.058575,-77.056645,-77.056966,-77.056782,-77.059428,-77.05969,-77.05977900000001,-77.062074,-77.06257100000001],"lat":[38.860985,38.863791,38.86573,38.86542,38.865145,38.863899,38.862721,38.863044,38.861783,38.860515,38.860715,38.860985]}]],[[{"lng":[-77.063327,-77.063,-77.06257100000001,-77.062074,-77.05977900000001,-77.058683,-77.05611399999999,-77.055736,-77.056034,-77.057659,-77.06145600000001,-77.061497,-77.063323,-77.063327],"lat":[38.86094,38.86131,38.860985,38.860715,38.860515,38.860413,38.859693,38.857311,38.857352,38.857191,38.857035,38.858568,38.858483,38.86094]}]],[[{"lng":[-77.063104,-77.062748,-77.060855,-77.061947,-77.06257100000001,-77.063,-77.06369599999999,-77.063104],"lat":[38.86511,38.865898,38.86573,38.863791,38.860985,38.86131,38.862916,38.86511]}]],[[{"lng":[-77.05969,-77.059428,-77.056782,-77.05656399999999,-77.05611399999999,-77.058683,-77.05977900000001,-77.05969],"lat":[38.861783,38.863044,38.862721,38.86176,38.859693,38.860413,38.860515,38.861783]}]],[[{"lng":[-77.065198,-77.063323,-77.061497,-77.06145600000001,-77.061345,-77.061193,-77.060614,-77.064633,-77.065067,-77.06516999999999,-77.065198],"lat":[38.858401,38.858483,38.858568,38.857035,38.853242,38.851174,38.850498,38.852249,38.853179,38.856863,38.858401]}]],[[{"lng":[-77.06145600000001,-77.057659,-77.057557,-77.05750500000001,-77.05767400000001,-77.060614,-77.061193,-77.061345,-77.06145600000001],"lat":[38.857035,38.857191,38.853291,38.851035,38.85053,38.850498,38.851174,38.853242,38.857035]}]],[[{"lng":[-77.05750500000001,-77.057557,-77.057659,-77.056034,-77.055736,-77.055432,-77.055278,-77.05354,-77.053758,-77.056105,-77.05767400000001,-77.05750500000001],"lat":[38.851035,38.853291,38.857191,38.857352,38.857311,38.854898,38.85334,38.85239,38.847947,38.847966,38.85053,38.851035]}]],[[{"lng":[-77.055736,-77.054078,-77.05216799999999,-77.052378,-77.05441,-77.055432,-77.055736],"lat":[38.857311,38.857306,38.857531,38.855898,38.855959,38.854898,38.857311]}]],[[{"lng":[-77.055432,-77.05441,-77.052378,-77.05260800000001,-77.05309099999999,-77.053106,-77.053758,-77.05354,-77.055278,-77.055432],"lat":[38.854898,38.855959,38.855898,38.853403,38.848098,38.847991,38.847947,38.85239,38.85334,38.854898]}]],[[{"lng":[-77.074316,-77.06997699999999,-77.069391,-77.069328,-77.068265,-77.06724800000001,-77.06708,-77.06676299999999,-77.065198,-77.06516999999999,-77.065067,-77.068366,-77.06823799999999,-77.068387,-77.070954,-77.07189099999999,-77.073785,-77.074316],"lat":[38.853134,38.859535,38.861242,38.86169,38.861029,38.860411,38.860886,38.858341,38.858401,38.856863,38.853179,38.853145,38.852123,38.850852,38.85086,38.853135,38.853147,38.853134]}]],[[{"lng":[-77.068366,-77.065067,-77.064633,-77.060614,-77.05767400000001,-77.056105,-77.053758,-77.053546,-77.05538799999999,-77.063766,-77.064722,-77.064998,-77.06659399999999,-77.06679,-77.066975,-77.06731600000001,-77.06823799999999,-77.068366],"lat":[38.853145,38.853179,38.852249,38.850498,38.85053,38.847966,38.847947,38.846418,38.841064,38.844909,38.844677,38.845374,38.845065,38.845536,38.846172,38.850992,38.852123,38.853145]}]],[[{"lng":[-77.074336,-77.073235,-77.069377,-77.066975,-77.06679,-77.06659399999999,-77.064998,-77.064722,-77.06682499999999,-77.070348,-77.071651,-77.07342800000001,-77.075424,-77.074336],"lat":[38.848848,38.847666,38.846182,38.846172,38.845536,38.845065,38.845374,38.844677,38.843899,38.843957,38.844414,38.847106,38.847832,38.848848]}]],[[{"lng":[-77.07477900000001,-77.073785,-77.07189099999999,-77.070954,-77.068387,-77.06823799999999,-77.06731600000001,-77.066975,-77.069377,-77.073235,-77.074336,-77.07477900000001],"lat":[38.851719,38.853147,38.853135,38.85086,38.850852,38.852123,38.850992,38.846172,38.846182,38.847666,38.848848,38.851719]}]],[[{"lng":[-77.07854399999999,-77.074316,-77.073785,-77.07477900000001,-77.074336,-77.075424,-77.077372,-77.07854399999999],"lat":[38.847697,38.853134,38.853147,38.851719,38.848848,38.847832,38.845947,38.847697]}]],[[{"lng":[-77.079413,-77.07854399999999,-77.077372,-77.075424,-77.07342800000001,-77.071651,-77.070348,-77.078554,-77.079302,-77.082245,-77.079413],"lat":[38.846667,38.847697,38.845947,38.847832,38.847106,38.844414,38.843957,38.843672,38.842926,38.843433,38.846667]}]]],null,"Simulation",{"interactive":true,"className":"","stroke":true,"color":"#000","weight":1,"opacity":0.5,"fill":true,"fillColor":["#E79452","#EEB557","#E68C50","#CD5D4C","#EAA153","#BF5349","#EDB056","#E99C53","#B44D45","#D86A4E","#CA5B4A","#E38150","#EFBB5A","#EBA254","#CC5D4C","#EDAC55","#D86A4E","#DC724F","#EBA955","#DD734E","#E68D51","#E99A53","#ECAA54","#E17D4F","#C8594A","#F0BA5A","#EEB256","#ECA754","#EDAC55","#EAA153","#F2C360","#F1BE5C","#D86A4E","#EEB457","#EDAC55","#E68C50","#EFB558","#EEB758","#EAA554","#F1BF5D","#EBA254","#E9A052","#D3634C","#E58E52","#EA9E53","#B14C46","#EBA353","#EDAC55","#E89B52","#EEB157","#EDB357","#251E0A","#D86A4E","#E58A51","#753931","#C05449","#CE5E4B","#E79452","#E17D4F","#E99852","#6F372D","#EEB758","#A34642","#EFB658","#6B362C","#EEB157","#F9E083","#E69352","#E07B50","#E38650","#C95A4A","#F8DD7D","#F1C461","#362413","#F0BA5A","#E79251","#EEB457","#FEF7B7","#CA5B4A","#F1BE5C","#EAA153","#E79452","#DC704E","#D96B4E","#ECA754","#DC704E","#E38350","#DD754F","#191900","#E89551","#DD734E","#4C2B1D","#C15449","#E89551","#E48551","#E69352","#BC5147","#EDAD56","#F0BA5A","#E17D4F","#EAA153","#B34D45","#EBA955","#E68D51","#E58E52","#C15449","#DF7850","#DF7A4F","#DE764E","#EEB057","#EA9F53","#BA5048","#E07C50","#D2624D","#E99A53","#73382F","#F0BA5A","#CE5E4B","#EEB758","#E48551","#EEB457","#EBA254","#E38150","#EAA153","#F2C360","#E17D4F","#C5574A","#E48551","#E69352","#E99852","#EBA353","#F0BD5B","#DD754F","#251E0A","#EAA554","#613227","#E99C53","#AC4A44","#F6D470","#EBA955","#F6D572","#E68F51","#EEB457","#EEB157","#F3CD68","#EFB658","#EBA653","#E68F51","#E38350","#E38350","#E89B52","#EAA153","#EDAD56","#FAE994","#E48551","#E89B52","#EEB256","#F4D16C","#EBA353","#572F22","#A94843","#E07C50","#EFBB5A","#E58E52","#E79052","#AF4B45","#EBA254","#8C3F3A","#FDFAC1","#FFFFCB","#9E4440","#E58E52","#EFB658","#E27F50","#E69352","#E79052","#F1C25F","#9C443F","#D0604C","#E79251","#E58E52","#F7DE80","#F8DD7D","#BE5349","#E89B52","#E89B52","#EDAD56","#E79251","#F4CB67","#ECA855","#F0BC5B","#EEB457","#E99C53","#FFFFCC","#E99852","#B34D45","#EEB256","#E58B51","#F2C864","#C2554A"],"fillOpacity":1,"smoothFactor":1,"noClip":false},null,null,["510131001001 Male Population: 1060","510131001002 Male Population: 772","510131001003 Male Population: 1133","510131001004 Male Population: 1516","510131002001 Male Population: 943","510131002002 Male Population: 1615","510131002003 Male Population: 815","510131002004 Male Population: 982","510131002005 Male Population: 1682","510131003001 Male Population: 1420","510131003002 Male Population: 1536","510131003003 Male Population: 1224","510131003004 Male Population: 721","510131003005 Male Population: 933","510131004001 Male Population: 1523","510131004002 Male Population: 849","510131004003 Male Population: 1415","510131005001 Male Population: 1350","510131005002 Male Population: 871","510131005003 Male Population: 1344","510131005004 Male Population: 1125","510131006001 Male Population: 1003","510131006002 Male Population: 860","510131006003 Male Population: 1257","510131007001 Male Population: 1552","510131007002 Male Population: 731","510131007003 Male Population: 792","510131007004 Male Population: 895","510131007005 Male Population: 846","510131007006 Male Population: 945","510131008001 Male Population: 657","510131008002 Male Population: 699","510131009001 Male Population: 1412","510131009002 Male Population: 780","510131009003 Male Population: 850","510131009004 Male Population: 1136","510131010001 Male Population: 770","510131010002 Male Population: 752","510131010003 Male Population: 907","510131010004 Male Population: 690","510131011001 Male Population: 929","510131011002 Male Population: 950","510131011003 Male Population: 1472","510131011004 Male Population: 1113","510131011005 Male Population: 968","510131012001 Male Population: 1700","510131012002 Male Population: 918","510131012003 Male Population: 848","510131013001 Male Population: 994","510131013002 Male Population: 806","510131013003 Male Population: 783","510131013004 Male Population: 2571","510131013005 Male Population: 1416","510131013006 Male Population: 1147","510131014011 Male Population: 2046","510131014021 Male Population: 1608","510131014022 Male Population: 1504","510131014051 Male Population: 1054","510131014052 Male Population: 1260","510131014061 Male Population: 1022","510131014062 Male Population: 2083","510131014063 Male Population: 758","510131014071 Male Population: 1780","510131014072 Male Population: 766","510131014073 Male Population: 2110","510131014081 Male Population: 805","510131014082 Male Population: 417","510131014091 Male Population: 1066","510131014092 Male Population: 1274","510131015011 Male Population: 1184","510131015012 Male Population: 1548","510131015013 Male Population: 453","510131015021 Male Population: 648","510131015022 Male Population: 2451","510131015023 Male Population: 733","510131015031 Male Population: 1080","510131015032 Male Population: 778","510131016011 Male Population: 120","510131016012 Male Population: 1540","510131016021 Male Population: 703","510131016022 Male Population: 939","510131016031 Male Population: 1055","510131016032 Male Population: 1362","510131016033 Male Population: 1403","510131016034 Male Population: 891","510131016035 Male Population: 1363","510131017011 Male Population: 1208","510131017012 Male Population: 1327","510131017013 Male Population: 2661","510131017031 Male Population: 1051","510131017032 Male Population: 1339","510131017041 Male Population: 2305","510131017051 Male Population: 1605","510131017052 Male Population: 1051","510131017053 Male Population: 1195","510131018011 Male Population: 1070","510131018012 Male Population: 1635","510131018013 Male Population: 844","510131018031 Male Population: 730","510131018032 Male Population: 1260","510131018033 Male Population: 944","510131018034 Male Population: 1687","510131018041 Male Population: 870","510131018042 Male Population: 1120","510131018051 Male Population: 1110","510131018052 Male Population: 1600","510131018053 Male Population: 1302","510131019001 Male Population: 1285","510131019002 Male Population: 1316","510131019003 Male Population: 810","510131020011 Male Population: 960","510131020012 Male Population: 1646","510131020021 Male Population: 1271","510131020031 Male Population: 1477","510131020032 Male Population: 1002","510131020033 Male Population: 2061","510131021001 Male Population: 734","510131021002 Male Population: 1514","510131022001 Male Population: 760","510131022002 Male Population: 1192","510131022003 Male Population: 780","510131022004 Male Population: 932","510131022005 Male Population: 1231","510131023011 Male Population: 943","510131023012 Male Population: 657","510131023021 Male Population: 1262","510131023022 Male Population: 1573","510131023023 Male Population: 1195","510131024001 Male Population: 1074","510131024002 Male Population: 1022","510131024003 Male Population: 924","510131024004 Male Population: 708","510131025001 Male Population: 1330","510131025002 Male Population: 2570","510131025003 Male Population: 908","510131026001 Male Population: 2167","510131026002 Male Population: 984","510131027011 Male Population: 1729","510131027012 Male Population: 532","510131027021 Male Population: 871","510131027022 Male Population: 522","510131028021 Male Population: 1099","510131028031 Male Population: 780","510131028032 Male Population: 805","510131028033 Male Population: 590","510131028041 Male Population: 762","510131028042 Male Population: 904","510131028043 Male Population: 1102","510131028044 Male Population: 1207","510131029011 Male Population: 1210","510131029012 Male Population: 997","510131029013 Male Population: 941","510131029031 Male Population: 837","510131029041 Male Population: 319","510131029042 Male Population: 1194","510131029043 Male Population: 993","510131030001 Male Population: 801","510131030002 Male Population: 557","510131030003 Male Population: 926","510131031001 Male Population: 2230","510131031002 Male Population: 1746","510131031003 Male Population: 1267","510131032001 Male Population: 725","510131032002 Male Population: 1112","510131032003 Male Population: 1095","510131032004 Male Population: 1711","510131033001 Male Population: 932","510131033002 Male Population: 1913","510131034011 Male Population: 60","510131034012 Male Population: 3","510131034031 Male Population: 1810","510131034041 Male Population: 1114","510131034051 Male Population: 768","510131034052 Male Population: 1244","510131034053 Male Population: 1064","510131035011 Male Population: 1094","510131035012 Male Population: 671","510131035013 Male Population: 1818","510131035031 Male Population: 1491","510131035032 Male Population: 1080","510131035033 Male Population: 1110","510131035034 Male Population: 437","510131035035 Male Population: 453","510131035041 Male Population: 1617","510131035042 Male Population: 997","510131035051 Male Population: 993","510131035052 Male Population: 835","510131035053 Male Population: 1078","510131035054 Male Population: 598","510131036011 Male Population: 882","510131036012 Male Population: 718","510131036013 Male Population: 778","510131036021 Male Population: 988","510131036022 Male Population: 1","510131037001 Male Population: 1020","510131037002 Male Population: 1689","510131038001 Male Population: 793","510131038002 Male Population: 1139","510131038003 Male Population: 622","510131038004 Male Population: 1591"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},{"color":"#fff"}]},{"method":"addLegend","args":[{"colors":["#FFFFCC , #F6D775 18.7593984962406%, #E89B52 37.5563909774436%, #CF5F4B 56.3533834586466%, #7D3B34 75.1503759398496%, #2F220F 93.9473684210526%, #191900 "],"labels":["500","1,000","1,500","2,000","2,500"],"na_color":null,"na_label":"NA","opacity":1,"position":"bottomright","type":"numeric","title":"Male Population","extra":{"p_1":0.187593984962406,"p_n":0.9394736842105263},"layerId":null,"className":"info legend","group":null}]}],"limits":{"lat":[38.827357,38.9343702373596],"lng":[-77.172276,-77.041838]}},"evals":[],"jsHooks":[]}</script><p>The redistribution methods apply to census-like samples from a full
population, so we’ll set up a function to both draw a sample and apply
methods to it:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## for the initial sample, we'll aim for an even</span></span>
<span><span class="co">## sampling from across block groups</span></span>
<span><span class="va">sample_n</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">ceiling</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">population</span><span class="op">$</span><span class="va">households</span><span class="op">)</span> <span class="op">*</span> <span class="fl">.1</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">block_groups</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">map_parcel_to_bg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/structure.html" class="external-link">structure</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">map_bg_to_parcel</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">vapply</a></span><span class="op">(</span><span class="va">map_bg_to_parcel</span>, <span class="va">length</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unname.html" class="external-link">unname</a></span><span class="op">(</span><span class="va">map_bg_to_parcel</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">draw_sample</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">run</span> <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">return_full</span> <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># draw households, and retrieve individuals within them</span></span>
<span>  <span class="va">sample_hh</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">map_bg_to_parcel</span>, <span class="kw">function</span><span class="op">(</span><span class="va">bg</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">bg</span><span class="op">)</span> <span class="op">&lt;</span> <span class="va">sample_n</span><span class="op">)</span> <span class="va">bg</span> <span class="kw">else</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="va">bg</span>, <span class="va">sample_n</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span>  <span class="va">full</span> <span class="op">&lt;-</span> <span class="va">population</span><span class="op">$</span><span class="va">households</span><span class="op">[</span></span>
<span>    <span class="va">population</span><span class="op">$</span><span class="va">households</span><span class="op">$</span><span class="va">household</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="va">sample_hh</span>, use.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>,</span>
<span>  <span class="op">]</span></span>
<span>  <span class="va">full</span><span class="op">$</span><span class="va">WGTP</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span>  <span class="va">full_individuals</span> <span class="op">&lt;-</span> <span class="va">population</span><span class="op">$</span><span class="va">individuals</span><span class="op">[</span></span>
<span>    <span class="va">population</span><span class="op">$</span><span class="va">individuals</span><span class="op">$</span><span class="va">household</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">full</span><span class="op">$</span><span class="va">household</span>,</span>
<span>  <span class="op">]</span></span>
<span>  <span class="va">full_individuals</span><span class="op">$</span><span class="va">PWGTP</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span>  <span class="va">individuals</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span></span>
<span>    <span class="va">full</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">full_individuals</span><span class="op">$</span><span class="va">household</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"region"</span>, <span class="va">vars_house</span><span class="op">)</span><span class="op">]</span>,</span>
<span>    <span class="va">full_individuals</span><span class="op">[</span>, <span class="va">vars_person</span><span class="op">]</span></span>
<span>  <span class="op">)</span></span>
<span>  <span class="va">individuals</span><span class="op">$</span><span class="va">SERIALNO</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">individuals</span><span class="op">$</span><span class="va">SERIALNO</span><span class="op">)</span></span>
<span>  <span class="va">individuals</span><span class="op">$</span><span class="va">ID</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">individuals</span><span class="op">$</span><span class="va">ID</span><span class="op">)</span></span>
<span>  <span class="va">individuals</span><span class="op">$</span><span class="va">geoid</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/structure.html" class="external-link">structure</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">sample_hh</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">vapply</a></span><span class="op">(</span><span class="va">sample_hh</span>, <span class="va">length</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="va">sample_hh</span>, use.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span>  <span class="op">)</span><span class="op">[</span><span class="va">individuals</span><span class="op">$</span><span class="va">SERIALNO</span><span class="op">]</span></span>
<span></span>
<span>  <span class="va">bg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">rbind</span>, <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/split.html" class="external-link">split</a></span><span class="op">(</span><span class="va">individuals</span>, <span class="va">individuals</span><span class="op">$</span><span class="va">geoid</span><span class="op">)</span>,</span>
<span>    <span class="kw">function</span><span class="op">(</span><span class="va">d</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">hh</span> <span class="op">&lt;-</span> <span class="va">d</span><span class="op">[</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/duplicated.html" class="external-link">duplicated</a></span><span class="op">(</span><span class="va">d</span><span class="op">$</span><span class="va">SERIALNO</span><span class="op">)</span>, <span class="op">]</span></span>
<span>      <span class="va">hh</span><span class="op">$</span><span class="va">size</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">d</span><span class="op">$</span><span class="va">SERIALNO</span><span class="op">)</span><span class="op">[</span><span class="va">hh</span><span class="op">$</span><span class="va">SERIALNO</span><span class="op">]</span></span>
<span>      <span class="va">size</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tapply.html" class="external-link">tapply</a></span><span class="op">(</span><span class="va">hh</span><span class="op">$</span><span class="va">size</span>, <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">hh</span><span class="op">$</span><span class="va">status</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"OWNER"</span>, <span class="st">"RENTER"</span><span class="op">)</span><span class="op">)</span>, <span class="va">mean</span><span class="op">)</span></span>
<span>      <span class="va">size</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">size</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span></span>
<span>        id <span class="op">=</span> <span class="va">d</span><span class="op">$</span><span class="va">geoid</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span></span>
<span>          <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">vars_list</span><span class="op">)</span>, <span class="kw">function</span><span class="op">(</span><span class="va">var</span><span class="op">)</span> <span class="op">{</span></span>
<span>            <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">as.list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">vapply</a></span><span class="op">(</span></span>
<span>              <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">vars_list</span><span class="op">[[</span><span class="va">var</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>,</span>
<span>              <span class="kw">function</span><span class="op">(</span><span class="va">l</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="op">(</span><span class="va">d</span><span class="op">[[</span><span class="va">var</span><span class="op">]</span><span class="op">]</span> <span class="op">==</span> <span class="va">l</span><span class="op">)</span> <span class="op">*</span> <span class="va">d</span><span class="op">$</span><span class="va">PWGTP</span><span class="op">)</span>, <span class="fl">0</span></span>
<span>            <span class="op">)</span><span class="op">)</span></span>
<span>          <span class="op">}</span></span>
<span>        <span class="op">)</span>, recursive <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        avg_hhsize <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">hh</span><span class="op">$</span><span class="va">size</span><span class="op">)</span>,</span>
<span>        avg_hhsize_own <span class="op">=</span> <span class="va">size</span><span class="op">[[</span><span class="st">"OWNER"</span><span class="op">]</span><span class="op">]</span>,</span>
<span>        avg_hhsize_rent <span class="op">=</span> <span class="va">size</span><span class="op">[[</span><span class="st">"RENTER"</span><span class="op">]</span><span class="op">]</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">)</span><span class="op">)</span></span>
<span></span>
<span>  <span class="va">ps</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span></span>
<span>    <span class="va">population</span><span class="op">$</span><span class="va">regions</span>,</span>
<span>    <span class="va">population</span><span class="op">$</span><span class="va">summary</span><span class="op">[</span><span class="va">population</span><span class="op">$</span><span class="va">regions</span><span class="op">$</span><span class="va">id</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Total"</span>, <span class="va">vars_units</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span><span class="op">]</span></span>
<span>  <span class="op">)</span></span>
<span>  <span class="va">ps</span><span class="op">$</span><span class="va">OBJECTID</span> <span class="op">&lt;-</span> <span class="va">population</span><span class="op">$</span><span class="va">regions</span><span class="op">$</span><span class="va">id</span></span>
<span>  <span class="va">ps</span><span class="op">$</span><span class="va">geoid</span> <span class="op">&lt;-</span> <span class="va">map_parcel_to_bg</span><span class="op">[</span><span class="va">population</span><span class="op">$</span><span class="va">regions</span><span class="op">$</span><span class="va">id</span><span class="op">]</span></span>
<span>  <span class="va">ps</span><span class="op">$</span><span class="va">Unit_Type</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"MULTI"</span>, <span class="st">"SFD"</span>, <span class="st">"SFA"</span><span class="op">)</span><span class="op">[</span><span class="va">ps</span><span class="op">$</span><span class="va">building_type</span><span class="op">]</span></span>
<span></span>
<span>  <span class="va">ps</span><span class="op">$</span><span class="va">PUMA</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/structure.html" class="external-link">structure</a></span><span class="op">(</span></span>
<span>    <span class="va">pums</span><span class="op">$</span><span class="va">crosswalk</span><span class="op">$</span><span class="va">PUMA5CE</span>,</span>
<span>    names <span class="op">=</span> <span class="va">pums</span><span class="op">$</span><span class="va">crosswalk</span><span class="op">$</span><span class="va">GEOID</span></span>
<span>  <span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/substr.html" class="external-link">substring</a></span><span class="op">(</span><span class="va">ps</span><span class="op">$</span><span class="va">geoid</span>, <span class="fl">1</span>, <span class="fl">11</span><span class="op">)</span><span class="op">]</span></span>
<span>  <span class="va">ps</span><span class="op">$</span><span class="va">single_family_home</span> <span class="op">&lt;-</span> <span class="va">ps</span><span class="op">$</span><span class="va">Unit_Type</span> <span class="op">!=</span> <span class="st">"MULTI"</span></span>
<span>  <span class="va">ps</span><span class="op">$</span><span class="va">type</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span></span>
<span>    <span class="va">paste0</span>, <span class="va">ps</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"PUMA"</span>, <span class="st">"single_family_home"</span><span class="op">)</span>, drop <span class="op">=</span> <span class="cn">TRUE</span><span class="op">]</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span>  <span class="va">vdata</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/structure.html" class="external-link">structure</a></span><span class="op">(</span><span class="va">pumas_focal</span>, names <span class="op">=</span> <span class="va">pumas_focal</span><span class="op">)</span>,</span>
<span>    <span class="kw">function</span><span class="op">(</span><span class="va">puma</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">ps</span> <span class="op">&lt;-</span> <span class="va">ps</span><span class="op">[</span><span class="va">ps</span><span class="op">$</span><span class="va">PUMA</span> <span class="op">==</span> <span class="va">puma</span>, <span class="op">]</span></span>
<span>      <span class="va">su</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">individuals</span><span class="op">$</span><span class="va">region</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">ps</span><span class="op">$</span><span class="va">id</span><span class="op">)</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        map <span class="op">=</span> <span class="va">map_bg_to_parcel</span>,</span>
<span>        individuals <span class="op">=</span> <span class="va">individuals</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="va">su</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">floor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">su</span><span class="op">)</span> <span class="op">*</span> <span class="fl">.3</span><span class="op">)</span><span class="op">)</span>, <span class="op">]</span>,</span>
<span>        parcels <span class="op">=</span> <span class="va">ps</span>,</span>
<span>        source <span class="op">=</span> <span class="va">bg</span><span class="op">[</span><span class="va">bg</span><span class="op">$</span><span class="va">id</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">ps</span><span class="op">$</span><span class="va">geoid</span>, <span class="op">]</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">)</span></span>
<span>  <span class="va">ps</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">rbind</span>, <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">vdata</span>, <span class="st">"[["</span>, <span class="st">"parcels"</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="va">individuals</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">rbind</span>, <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">vdata</span>, <span class="st">"[["</span>, <span class="st">"individuals"</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="va">hh</span> <span class="op">&lt;-</span> <span class="va">individuals</span><span class="op">[</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/duplicated.html" class="external-link">duplicated</a></span><span class="op">(</span><span class="va">individuals</span><span class="op">$</span><span class="va">SERIALNO</span><span class="op">)</span>, <span class="op">]</span></span>
<span>  <span class="va">hh</span><span class="op">$</span><span class="va">single_family_home</span> <span class="op">&lt;-</span> <span class="va">hh</span><span class="op">$</span><span class="va">building_type</span> <span class="op">!=</span> <span class="st">"MULTI"</span></span>
<span>  <span class="va">hh</span><span class="op">$</span><span class="va">size</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">individuals</span><span class="op">$</span><span class="va">SERIALNO</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">hh</span><span class="op">$</span><span class="va">SERIALNO</span><span class="op">)</span><span class="op">]</span></span>
<span>  <span class="va">ps</span><span class="op">$</span><span class="va">Residents</span> <span class="op">&lt;-</span> <span class="va">ps</span><span class="op">$</span><span class="va">Total</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/tapply.html" class="external-link">tapply</a></span><span class="op">(</span></span>
<span>    <span class="va">hh</span><span class="op">$</span><span class="va">size</span>, <span class="va">hh</span><span class="op">$</span><span class="va">single_family_home</span>, <span class="va">mean</span></span>
<span>  <span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">ps</span><span class="op">$</span><span class="va">single_family_home</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span>  <span class="va">vestimates</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    Prop <span class="op">=</span> <span class="fu"><a href="../reference/redistribute.html">redistribute</a></span><span class="op">(</span></span>
<span>      <span class="va">bg</span>, <span class="va">ps</span>, <span class="va">map_bg_to_parcel</span>,</span>
<span>      weight <span class="op">=</span> <span class="st">"Total"</span>, source_id <span class="op">=</span> <span class="st">"id"</span>, default_value <span class="op">=</span> <span class="fl">0</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="st">"Prop Adj"</span> <span class="op">=</span> <span class="fu"><a href="../reference/redistribute.html">redistribute</a></span><span class="op">(</span></span>
<span>      <span class="va">bg</span>, <span class="va">ps</span>, <span class="va">map_bg_to_parcel</span>,</span>
<span>      weight <span class="op">=</span> <span class="st">"Residents"</span>, source_id <span class="op">=</span> <span class="st">"id"</span>, default_value <span class="op">=</span> <span class="fl">0</span></span>
<span>    <span class="op">)</span>,</span>
<span>    Baseline <span class="op">=</span> <span class="fu">apply_method</span><span class="op">(</span><span class="va">vdata</span>, <span class="va">est_baseline</span>, parcel_only <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    Rake <span class="op">=</span> <span class="fu">apply_method</span><span class="op">(</span><span class="va">vdata</span>, <span class="va">est_rake</span>, parcel_only <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    <span class="st">"Rake 2 Step"</span> <span class="op">=</span> <span class="fu">apply_method</span><span class="op">(</span><span class="va">vdata</span>, <span class="va">est_twostep</span>, parcel_only <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    <span class="st">"Rake N Step"</span> <span class="op">=</span> <span class="fu">apply_method</span><span class="op">(</span><span class="va">vdata</span>, <span class="va">est_nstep</span>, parcel_only <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    <span class="st">"Rake General"</span> <span class="op">=</span> <span class="fu">apply_method</span><span class="op">(</span><span class="va">vdata</span>, <span class="va">est_grake</span>, parcel_only <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span>  <span class="va">actual</span> <span class="op">&lt;-</span> <span class="va">population</span><span class="op">$</span><span class="va">summary</span><span class="op">[</span><span class="va">ps</span><span class="op">$</span><span class="va">id</span>, <span class="op">]</span></span>
<span>  <span class="va">verror</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">rbind</span>, <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/structure.html" class="external-link">structure</a></span><span class="op">(</span><span class="va">pvars</span>, names <span class="op">=</span> <span class="va">pvars</span><span class="op">)</span>,</span>
<span>    <span class="kw">function</span><span class="op">(</span><span class="va">var</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">colMeans</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">vestimates</span>, <span class="kw">function</span><span class="op">(</span><span class="va">d</span><span class="op">)</span> <span class="va">d</span><span class="op">[[</span><span class="va">var</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>,</span>
<span>        check.names <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>      <span class="op">)</span> <span class="op">-</span> <span class="va">actual</span><span class="op">[[</span><span class="va">var</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">)</span><span class="op">)</span></span>
<span>  <span class="va">verror</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">verror</span>, Average <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">colMeans</a></span><span class="op">(</span><span class="va">verror</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">return_full</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      data <span class="op">=</span> <span class="va">data</span>, source <span class="op">=</span> <span class="va">bg</span>, parcels <span class="op">=</span> <span class="va">ps</span>, map <span class="op">=</span> <span class="va">map_bg_to_parcel</span>,</span>
<span>      estimates <span class="op">=</span> <span class="va">vestimates</span>, error <span class="op">=</span> <span class="va">verror</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>    <span class="va">verror</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Now we can look at results from a single sample. These are not
comparable to the other results because (a) they are simulated
independently from the real samples (so, for instance, the race category
baselines are randomized), and (b) error is measured at the parcel
level, rather than the block group level.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">estimates_sim</span> <span class="op">&lt;-</span> <span class="fu">draw_sample</span><span class="op">(</span>return_full <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu">kable</span><span class="op">(</span><span class="va">estimates_sim</span><span class="op">$</span><span class="va">error</span>, digits <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="17%">
<col width="10%">
<col width="10%">
<col width="10%">
<col width="10%">
<col width="13%">
<col width="13%">
<col width="14%">
</colgroup>
<thead><tr class="header">
<th align="left"></th>
<th align="right">Prop</th>
<th align="right">Prop Adj</th>
<th align="right">Baseline</th>
<th align="right">Rake</th>
<th align="right">Rake 2 Step</th>
<th align="right">Rake N Step</th>
<th align="right">Rake General</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">sex_female</td>
<td align="right">6.12818</td>
<td align="right">6.12862</td>
<td align="right">6.39725</td>
<td align="right">6.39734</td>
<td align="right">6.39693</td>
<td align="right">6.39703</td>
<td align="right">6.39529</td>
</tr>
<tr class="even">
<td align="left">sex_male</td>
<td align="right">6.12776</td>
<td align="right">6.12816</td>
<td align="right">6.40932</td>
<td align="right">6.40926</td>
<td align="right">6.40967</td>
<td align="right">6.40958</td>
<td align="right">6.41156</td>
</tr>
<tr class="odd">
<td align="left">race_black</td>
<td align="right">4.37830</td>
<td align="right">4.39213</td>
<td align="right">4.59542</td>
<td align="right">4.59556</td>
<td align="right">4.59536</td>
<td align="right">4.59533</td>
<td align="right">4.59449</td>
</tr>
<tr class="even">
<td align="left">race_white</td>
<td align="right">0.38175</td>
<td align="right">0.38283</td>
<td align="right">0.39677</td>
<td align="right">0.39678</td>
<td align="right">0.39679</td>
<td align="right">0.39680</td>
<td align="right">0.39683</td>
</tr>
<tr class="odd">
<td align="left">race_other</td>
<td align="right">2.13181</td>
<td align="right">2.13793</td>
<td align="right">2.21731</td>
<td align="right">2.21732</td>
<td align="right">2.21729</td>
<td align="right">2.21724</td>
<td align="right">2.21733</td>
</tr>
<tr class="even">
<td align="left">race_asian</td>
<td align="right">1.75365</td>
<td align="right">1.75875</td>
<td align="right">1.81846</td>
<td align="right">1.81854</td>
<td align="right">1.81857</td>
<td align="right">1.81859</td>
<td align="right">1.81820</td>
</tr>
<tr class="odd">
<td align="left">race_native</td>
<td align="right">4.38921</td>
<td align="right">4.40084</td>
<td align="right">4.58963</td>
<td align="right">4.58981</td>
<td align="right">4.58994</td>
<td align="right">4.58999</td>
<td align="right">4.59068</td>
</tr>
<tr class="even">
<td align="left">income_lt50</td>
<td align="right">0.00000</td>
<td align="right">0.00000</td>
<td align="right">0.00000</td>
<td align="right">0.00000</td>
<td align="right">0.00000</td>
<td align="right">0.00000</td>
<td align="right">0.00000</td>
</tr>
<tr class="odd">
<td align="left">income_gt200</td>
<td align="right">11.75876</td>
<td align="right">11.75962</td>
<td align="right">12.29152</td>
<td align="right">12.29150</td>
<td align="right">12.29119</td>
<td align="right">12.29126</td>
<td align="right">12.29463</td>
</tr>
<tr class="even">
<td align="left">income_100_200</td>
<td align="right">0.55227</td>
<td align="right">0.55234</td>
<td align="right">0.55166</td>
<td align="right">0.55166</td>
<td align="right">0.55166</td>
<td align="right">0.55166</td>
<td align="right">0.55165</td>
</tr>
<tr class="odd">
<td align="left">income_50_100</td>
<td align="right">0.00032</td>
<td align="right">0.00032</td>
<td align="right">0.00032</td>
<td align="right">0.00032</td>
<td align="right">0.00032</td>
<td align="right">0.00032</td>
<td align="right">0.00032</td>
</tr>
<tr class="even">
<td align="left">Average</td>
<td align="right">3.41836</td>
<td align="right">3.42196</td>
<td align="right">3.56979</td>
<td align="right">3.56983</td>
<td align="right">3.56979</td>
<td align="right">3.56980</td>
<td align="right">3.57009</td>
</tr>
</tbody>
</table>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://biocomplexity.virginia.edu/institute/divisions/social-and-decision-analytics" class="external-link">Biocomplexity Institute</a>, Micah Iserman.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>

<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Simulate a population of individuals within households, with complex relationships between
demographic and location features."><title>Generate a Population — generate_population • redistribute</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Generate a Population — generate_population"><meta property="og:description" content="Simulate a population of individuals within households, with complex relationships between
demographic and location features."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">redistribute</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/introduction.html">Introduction</a>
    <a class="dropdown-item" href="../articles/estimate_comparisons.html">Method Comparisons</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/uva-bi-sdad/redistribute/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Generate a Population</h1>
      <small class="dont-index">Source: <a href="https://github.com/uva-bi-sdad/redistribute/blob/HEAD/R/generate_population.R" class="external-link"><code>R/generate_population.R</code></a></small>
      <div class="d-none name"><code>generate_population.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Simulate a population of individuals within households, with complex relationships between
demographic and location features.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">generate_population</span><span class="op">(</span>N <span class="op">=</span> <span class="fl">1000</span>, regions <span class="op">=</span> <span class="cn">NULL</span>, capacities <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  region_ids <span class="op">=</span> <span class="cn">NULL</span>, attraction_loci <span class="op">=</span> <span class="fl">3</span>, random_regions <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>  cost_loci <span class="op">=</span> <span class="fl">2</span>, size_loci <span class="op">=</span> <span class="fl">5</span>, similarity_metric <span class="op">=</span> <span class="st">"euclidean"</span>,</span>
<span>  n_neighbors <span class="op">=</span> <span class="fl">50</span>, neighbor_range <span class="op">=</span> <span class="fl">0.5</span>, n_races <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  n_building_types <span class="op">=</span> <span class="fl">3</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>N</dt>
<dd><p>Number of initial individuals to generate. Final number of individuals will be larger.</p></dd>


<dt>regions</dt>
<dd><p>A vector of region IDs, a matrix of coordinates, or an <code>sf</code> object with
geometries from which coordinates can be derived. If not specified
(and <code>capacities</code> is not specified), regions similar to housing units (with a mix of
single and multi-family locations) will be generated.</p></dd>


<dt>capacities</dt>
<dd><p>A vector with the maximum number of households for each entry in <code>regions</code>.</p></dd>


<dt>region_ids</dt>
<dd><p>A vector of unique IDs for each <code>regions</code>, or a column name in
<code>regions</code> containing IDs.</p></dd>


<dt>attraction_loci</dt>
<dd><p>Number of locations selected to be centers of attractiveness,
which influence where households are located.</p></dd>


<dt>random_regions</dt>
<dd><p>A number between <code>0</code> and <code>1</code>, which determines the proportion of
people who are randomly relocated, in the case that there is more capacity than households.</p></dd>


<dt>cost_loci</dt>
<dd><p>Number of locations selected to be centers of cost, which influences
the initial income associated with households.</p></dd>


<dt>size_loci</dt>
<dd><p>Number of locations selected to be centers of size, which influence
household sizes.</p></dd>


<dt>similarity_metric</dt>
<dd><p>Name of a metric to use to calculate nearness between
neighbors; see <code><a href="https://rdrr.io/pkg/lingmatch/man/lma_simets.html" class="external-link">lma_simets</a></code>.</p></dd>


<dt>n_neighbors</dt>
<dd><p>Number of neighbors used to influence each new household's
initial age and race.</p></dd>


<dt>neighbor_range</dt>
<dd><p>Minimum similarity between people to be considered
neighbors, between <code>0</code> and <code>1</code> (where <code>0</code> means unrestricted,
and <code>1</code> means same region only).</p></dd>


<dt>n_races</dt>
<dd><p>Number of different race groups to sample from.</p></dd>


<dt>n_building_types</dt>
<dd><p>Number of different building types to sample from.</p></dd>


<dt>verbose</dt>
<dd><p>Logical; if <code>TRUE</code>, will show status messages.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A list with entries for <code>params</code> (with initial settings), and two
<code>data.frames</code>:</p><dl><dt><code>households</code></dt>
<dd><p></p><table class="table table"><tr><td><code>household</code></td><td>Household ID.</td></tr><tr><td><code>region</code></td><td>Region ID.</td></tr><tr><td><code>head_income</code></td><td>Income of the first household member.</td></tr><tr><td><code>size</code></td><td>Number of individuals in the household.</td></tr><tr><td><code>building_type</code></td><td>Categorical indicator of building type.</td></tr><tr><td><code>renting</code></td><td>Binary indicator of renting status.</td></tr></table><p></p></dd>

  <dt><code>individuals</code></dt>
<dd><p></p><table class="table table"><tr><td><code>household</code></td><td>Household ID.</td></tr><tr><td><code>person</code></td><td>Person ID.</td></tr><tr><td><code>neighbors</code></td><td>Number of neighbors who bore on variables.</td></tr><tr><td><code>age</code></td><td>Age in years.</td></tr><tr><td><code>sex</code></td><td>Categorical indicator of sex.</td></tr><tr><td><code>race</code></td><td>Categorical indicator of race.</td></tr><tr><td><code>income</code></td><td>Income of individual.</td></tr></table><p></p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The population is generated in two steps:</p>
<p><strong>First</strong>, households are generated and placed within <code>regions</code>. Placement within regions
is determined by total distance from one or more regions selected as attraction loci. If
coordinates are not provided, these are first randomly generated.</p>
<p>After households are placed, household incomes (of the first member) is generated
based on cost loci, which are then used to generate building types (where types are increasingly
associated with income) and then household size (based on size loci, income, and building type).
Renting status is then generated based on income and building type:
60% chance if income is under the mean income, and 20% otherwise, multiplied by .8
if the building type is of a selected renting type, or .3 otherwise.</p>
<p><strong>Second</strong>, individuals are generated for each household. To generate an individual,
first, neighbors are searched for, based on <code>n_neighbors</code> and <code>neighbor_range</code>.
Any neighbors are summarized: average age and income, and tabulated race.</p>
<p>These then affect the first member of the household: age is first drawn from a Beta
distribution (with shapes of <code>1</code> and <code>2</code> if renting or <code>1.5</code> otherwise,
multiplied by <code>80</code>) and added to <code>18</code>, then adjusted toward a random value centered
on the average neighbor age (floored Gaussian with a standard deviation of <code>1</code>), and race
is sampled (that with the highest result of a Binomial draw with <code>n_races</code> trials
proportion of <code>neighbors * base rate</code> chance of success for each race group).</p>
<p>Neighbors also affect the income of the second member of the household if the first
member's income is under the neighbor mean income (or under <code>40,000</code> given no neighbors);
in this case, the second member's income is drawn from a Gaussian distribution centered on
the first member's income, with a standard deviation of <code>10,000</code>.</p>
<p>The second member's age is based on that of the first member; a floored Gaussian centered on
the first member's age, with a standard deviation of <code>15</code> if the first member's age
if over <code>40</code>, or <code>5</code> otherwise, trimmed to be between <code>18</code> and <code>90</code>.</p>
<p>The second member's race has a 70% chance to be that of the first member,
and a 30% chance to be selected like the first member's.</p>
<p>Members after the second have no income, have age randomly selected from a
uniform distribution between <code>0</code> and the first member's age minus <code>15</code>
(which is then rounded up), and have race determined by either the first or second
member (50% chance).</p>
<p>Sex has a 50% chance to be <code>0</code> or <code>1</code> for all but the second member; their sex
has a 10% chance to be the same as the first member's, and 90% chance to be opposite.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu">generate_population</span><span class="op">(</span><span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $params</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $params$neighbors</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 50</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $params$range</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $params$races_rates</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.4731305 0.1186169 0.2704882 0.5000000 0.1430624 0.1530886</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $params$n_building_types</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $regions</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   id capacity     cost building_type      X      Y</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  1        1 474876.1             2  98488 108252</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  2        1 481347.3             2 108290 106556</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $households</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   household region head_income size building_type renting</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1         1      1      187712   11             2       1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2         2      2      192513   10             2       1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $individuals</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    household person neighbors age sex race income</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1          1      1         0  27   0    0 187712</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2          1      2         0  31   1    0      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3          1      3         0   5   0    0      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4          1      4         0   7   0    0      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5          1      5         0   5   0    0      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6          1      6         0   4   0    0      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7          1      7         0   1   1    0      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8          1      8         0   5   0    0      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9          1      9         0   5   0    0      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10         1     10         0   8   0    0      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11         1     11         0   6   0    0      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12         2     12         0  38   0    0 192513</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13         2     13         0  34   1    0      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14         2     14         0   1   0    0      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15         2     15         0  11   0    0      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16         2     16         0   7   0    0      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17         2     17         0  12   1    0      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18         2     18         0  11   0    0      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19         2     19         0  12   0    0      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20         2     20         0   8   0    0      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21         2     21         0   3   0    0      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by <a href="https://biocomplexity.virginia.edu/institute/divisions/social-and-decision-analytics" class="external-link">Biocomplexity Institute</a>, Micah Iserman.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

